/*! For license information please see main.c935efb6.iframe.bundle.js.LICENSE.txt */
(self.webpackChunk_projectstorm_react_diagrams_gallery=self.webpackChunk_projectstorm_react_diagrams_gallery||[]).push([[179],{"./demos sync ^\\.[\\\\/](?:(?%21\\.)(?=.)[^/]*?\\.stories\\.tsx)$":(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./1_SimpleUsage.stories.tsx":"./demos/1_SimpleUsage.stories.tsx","./2_AdvancedUsage.stories.tsx":"./demos/2_AdvancedUsage.stories.tsx","./3_Customization.stories.tsx":"./demos/3_Customization.stories.tsx","./4_Libraries.stories.tsx":"./demos/4_Libraries.stories.tsx"};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id="./demos sync ^\\.[\\\\/](?:(?%21\\.)(?=.)[^/]*?\\.stories\\.tsx)$"},"./.storybook/preview.js-generated-config-entry.js":(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";var preview_namespaceObject={};__webpack_require__.r(preview_namespaceObject),__webpack_require__.d(preview_namespaceObject,{__namedExportsOrder:()=>__namedExportsOrder,parameters:()=>parameters});__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.symbol.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.define-properties.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.define-property.js");var ClientApi=__webpack_require__("../node_modules/.pnpm/@storybook+client-api@6.5.15_react@18.2.0/node_modules/@storybook/client-api/dist/esm/ClientApi.js"),parameters={layout:"fullscreen"},__namedExportsOrder=["parameters"];function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.keys(preview_namespaceObject).forEach((function(key){var value=preview_namespaceObject[key];switch(key){case"args":return(0,ClientApi.uc)(value);case"argTypes":return(0,ClientApi.v9)(value);case"decorators":return value.forEach((function(decorator){return(0,ClientApi.$9)(decorator,!1)}));case"loaders":return value.forEach((function(loader){return(0,ClientApi.HZ)(loader,!1)}));case"parameters":return(0,ClientApi.h1)(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},value),!1);case"argTypesEnhancers":return value.forEach((function(enhancer){return(0,ClientApi.My)(enhancer)}));case"argsEnhancers":return value.forEach((function(enhancer){return(0,ClientApi._C)(enhancer)}));case"render":return(0,ClientApi.$P)(value);case"globals":case"globalTypes":var v={};return v[key]=value,(0,ClientApi.h1)(v,!1);case"__namedExportsOrder":case"decorateStory":case"renderToDOM":return null;default:return console.log(key+" was not supported :( !")}}))},"./demos/1_SimpleUsage.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CanvasDrag:()=>CanvasDrag,CanvasGridSize:()=>CanvasGridSize,CanvasPanAndZoom:()=>CanvasPanAndZoom,DemoSimple:()=>DemoSimple,DynamicPorts:()=>DynamicPorts,EventsAndListeners:()=>EventsAndListeners,LinksWithLabels:()=>LinksWithLabels,LockedWidget:()=>LockedWidget,PerformanceDemo:()=>PerformanceDemo,SimpleFlowExample:()=>SimpleFlowExample,ZoomToFit:()=>ZoomToFit,ZoomToFitSelectNodes:()=>ZoomToFitSelectNodes,__namedExportsOrder:()=>__namedExportsOrder,default:()=>_1_SimpleUsage_stories});var dist=__webpack_require__("../packages/react-canvas-core/dist/index.js"),react_diagrams_dist=(__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.string.link.js"),__webpack_require__("../packages/react-diagrams/dist/index.js")),react=__webpack_require__("../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),DemoCanvasWidget=__webpack_require__("./demos/helpers/DemoCanvasWidget.tsx"),jsx_runtime=__webpack_require__("../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function generateNodes(model,offsetX,offsetY){var node1=new react_diagrams_dist.Fs("Node 1","rgb(0,192,255)"),port1=node1.addOutPort("Out");node1.setPosition(100+offsetX,100+offsetY);var node2=new react_diagrams_dist.Fs("Node 2","rgb(192,255,0)"),port2=node2.addInPort("In");node2.setPosition(200+offsetX,100+offsetY);var link1=port1.link(port2);model.addAll(node1,node2,link1)}__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/web.dom-collections.for-each.js");var esm=__webpack_require__("../node_modules/.pnpm/@storybook+addon-actions@6.5.15_react@18.2.0/node_modules/@storybook/addon-actions/dist/esm/index.js");var DemoWorkspaceWidget=__webpack_require__("./demos/helpers/DemoWorkspaceWidget.tsx");function demo_zoom_to_fit_generateNodes(model,offsetX,offsetY){var node1=new react_diagrams_dist.Fs("Node 1","rgb(0,192,255)"),port1=node1.addOutPort("Out");node1.setPosition(100+offsetX,100+offsetY);var node2=new react_diagrams_dist.Fs("Node 2","rgb(192,255,0)"),port2=node2.addInPort("In");node2.setPosition(200+offsetX,100+offsetY);var link1=port1.link(port2);model.addAll(node1,node2,link1)}function demo_zoom_to_fit_nodes_generateNodes(model,offsetX,offsetY){var node1=new react_diagrams_dist.Fs("Node 1","rgb(0,192,255)"),port1=node1.addOutPort("Out");node1.setPosition(100+offsetX,100+offsetY);var node2=new react_diagrams_dist.Fs("Node 2","rgb(192,255,0)"),port2=node2.addInPort("In");node2.setPosition(200+offsetX,100+offsetY);var link1=port1.link(port2);model.addAll(node1,node2,link1)}__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.concat.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.reflect.construct.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.create.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.symbol.to-primitive.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.date.to-primitive.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.symbol.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.number.constructor.js");function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var CanvasDragToggle=function(_React$Component){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(CanvasDragToggle,_React$Component);var _super=_createSuper(CanvasDragToggle);function CanvasDragToggle(){var _this;_classCallCheck(this,CanvasDragToggle);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_super.call.apply(_super,[this].concat(args))).enableDrag=function(){_this.props.engine.getStateMachine().getCurrentState().dragCanvas.config.allowDrag=!0},_this.disableDrag=function(){_this.props.engine.getStateMachine().getCurrentState().dragCanvas.config.allowDrag=!1},_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(CanvasDragToggle,[{key:"render",value:function render(){var engine=this.props.engine;return(0,jsx_runtime.jsx)(DemoWorkspaceWidget.F,{buttons:[(0,jsx_runtime.jsx)(DemoWorkspaceWidget.R,{onClick:this.enableDrag,children:"Enable canvas drag"},1),(0,jsx_runtime.jsx)(DemoWorkspaceWidget.R,{onClick:this.disableDrag,children:"Disable canvas drag"},2)],children:(0,jsx_runtime.jsx)(DemoCanvasWidget._,{children:(0,jsx_runtime.jsx)(dist.JE,{engine})})})}}]),CanvasDragToggle}(react.Component);function demo_pan_and_zoom_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function demo_pan_and_zoom_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function demo_pan_and_zoom_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function demo_pan_and_zoom_setPrototypeOf(o,p){return demo_pan_and_zoom_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},demo_pan_and_zoom_setPrototypeOf(o,p)}function demo_pan_and_zoom_createSuper(Derived){var hasNativeReflectConstruct=function demo_pan_and_zoom_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=demo_pan_and_zoom_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=demo_pan_and_zoom_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return demo_pan_and_zoom_possibleConstructorReturn(this,result)}}function demo_pan_and_zoom_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function demo_pan_and_zoom_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function demo_pan_and_zoom_getPrototypeOf(o){return demo_pan_and_zoom_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},demo_pan_and_zoom_getPrototypeOf(o)}var CanvasPanAndZoomToggle=function(_React$Component){!function demo_pan_and_zoom_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&demo_pan_and_zoom_setPrototypeOf(subClass,superClass)}(CanvasPanAndZoomToggle,_React$Component);var _super=demo_pan_and_zoom_createSuper(CanvasPanAndZoomToggle);function CanvasPanAndZoomToggle(){return demo_pan_and_zoom_classCallCheck(this,CanvasPanAndZoomToggle),_super.apply(this,arguments)}return function demo_pan_and_zoom_createClass(Constructor,protoProps,staticProps){return protoProps&&demo_pan_and_zoom_defineProperties(Constructor.prototype,protoProps),staticProps&&demo_pan_and_zoom_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(CanvasPanAndZoomToggle,[{key:"render",value:function render(){var engine=this.props.engine;return(0,jsx_runtime.jsx)(DemoCanvasWidget._,{children:(0,jsx_runtime.jsx)(dist.JE,{engine})})}}]),CanvasPanAndZoomToggle}(react.Component);__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.function.name.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.from.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.is-array.js");var lodash=__webpack_require__("../node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/lodash.js");function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function demo_dynamic_ports_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function demo_dynamic_ports_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function demo_dynamic_ports_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function demo_dynamic_ports_setPrototypeOf(o,p){return demo_dynamic_ports_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},demo_dynamic_ports_setPrototypeOf(o,p)}function demo_dynamic_ports_createSuper(Derived){var hasNativeReflectConstruct=function demo_dynamic_ports_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=demo_dynamic_ports_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=demo_dynamic_ports_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return demo_dynamic_ports_possibleConstructorReturn(this,result)}}function demo_dynamic_ports_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function demo_dynamic_ports_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function demo_dynamic_ports_getPrototypeOf(o){return demo_dynamic_ports_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},demo_dynamic_ports_getPrototypeOf(o)}var CloneSelected=function(_React$Component){!function demo_dynamic_ports_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&demo_dynamic_ports_setPrototypeOf(subClass,superClass)}(CloneSelected,_React$Component);var _super=demo_dynamic_ports_createSuper(CloneSelected);function CloneSelected(){var _this;demo_dynamic_ports_classCallCheck(this,CloneSelected);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_super.call.apply(_super,[this].concat(args))).addPorts=function(){var _step,_iterator=_createForOfIteratorHelper(lodash.values(_this.props.model.getNodes()));try{for(_iterator.s();!(_step=_iterator.n()).done;){var node=_step.value;"Node 2"===node.getOptions().name?node.addInPort("in-"+(node.getInPorts().length+1),!1):node.addOutPort("out-"+(node.getOutPorts().length+1),!1)}}catch(err){_iterator.e(err)}finally{_iterator.f()}_this.props.engine.repaintCanvas()},_this}return function demo_dynamic_ports_createClass(Constructor,protoProps,staticProps){return protoProps&&demo_dynamic_ports_defineProperties(Constructor.prototype,protoProps),staticProps&&demo_dynamic_ports_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(CloneSelected,[{key:"render",value:function render(){var engine=this.props.engine;return(0,jsx_runtime.jsx)(DemoWorkspaceWidget.F,{buttons:(0,jsx_runtime.jsx)(DemoWorkspaceWidget.R,{onClick:this.addPorts,children:"Add more ports"}),children:(0,jsx_runtime.jsx)(DemoCanvasWidget._,{children:(0,jsx_runtime.jsx)(dist.JE,{engine})})})}}]),CloneSelected}(react.Component);dist.C7.TESTING=!0;const _1_SimpleUsage_stories={title:"Simple Usage"};var DemoSimple=function(){var engine=(0,react_diagrams_dist.ZP)(),model=new react_diagrams_dist.Vm,node1=new react_diagrams_dist.Fs({name:"Node 1",color:"rgb(0,192,255)"});node1.setPosition(100,100);var port1=node1.addOutPort("Out"),node2=new react_diagrams_dist.Fs("Node 2","rgb(192,255,0)"),port2=node2.addInPort("In");node2.setPosition(400,100);var link1=port1.link(port2);return link1.getOptions().testName="Test",link1.addLabel("Hello World!"),model.addAll(node1,node2,link1),engine.setModel(model),(0,jsx_runtime.jsx)(DemoCanvasWidget._,{children:(0,jsx_runtime.jsx)(dist.JE,{engine})})},SimpleFlowExample=function(){var engine=(0,react_diagrams_dist.ZP)(),state=engine.getStateMachine().getCurrentState();state instanceof react_diagrams_dist.Qo&&(state.dragNewLink.config.allowLooseLinks=!1);var model=new react_diagrams_dist.Vm,node1=new react_diagrams_dist.Fs("Node 1","rgb(0,192,255)"),port1=node1.addOutPort("Out");node1.setPosition(100,100);var node2=new react_diagrams_dist.Fs("Node 2","rgb(192,255,0)"),port2=node2.addInPort("In");node2.setPosition(400,100);var link1=port1.link(port2),node3=new react_diagrams_dist.Fs("Node 3","rgb(0,192,255)");return node3.addOutPort("Out"),node3.setPosition(100,200),model.addAll(node1,node2,node3,link1),engine.setModel(model),(0,jsx_runtime.jsx)(DemoCanvasWidget._,{children:(0,jsx_runtime.jsx)(dist.JE,{engine})})},PerformanceDemo=function(){for(var engine=(0,react_diagrams_dist.ZP)(),model=new react_diagrams_dist.Vm,i=0;i<8;i++)for(var j=0;j<8;j++)generateNodes(model,200*i,100*j);return engine.setModel(model),(0,jsx_runtime.jsx)(DemoCanvasWidget._,{children:(0,jsx_runtime.jsx)(dist.JE,{engine})})},LockedWidget=function(){var engine=(0,react_diagrams_dist.ZP)(),model=new react_diagrams_dist.Vm,node1=new react_diagrams_dist.Fs("Node 1","rgb(0,192,255)"),port1=node1.addOutPort("Out");node1.setPosition(100,100);var node2=new react_diagrams_dist.Fs("Node 2","rgb(192,255,0)"),port2=node2.addInPort("In");node2.setPosition(400,100);var link1=port1.link(port2);model.addAll(node1,node2,link1);var node3=new react_diagrams_dist.Fs("Node 3","rgb(0,192,255)"),port3=node3.addOutPort("Out");node3.setPosition(100,250);var node4=new react_diagrams_dist.Fs("Node 4","rgb(192,255,0)"),port4=node4.addInPort("In");node4.setPosition(400,250);var link2=port3.link(port4);return link2.point(350,225),link2.point(200,225),model.addAll(node3,node4,link2),engine.setModel(model),model.setLocked(!0),(0,jsx_runtime.jsx)(DemoCanvasWidget._,{children:(0,jsx_runtime.jsx)(dist.JE,{engine})})},CanvasGridSize=function(){var engine=(0,react_diagrams_dist.ZP)(),model=new react_diagrams_dist.Vm;model.setGridSize(50);var node1=new react_diagrams_dist.Fs("Node 1","rgb(0,192,255)"),port=node1.addOutPort("Out");node1.setPosition(100,100);var node2=new react_diagrams_dist.Fs("Node 2","rgb(192,255,0)"),port2=node2.addInPort("In");node2.setPosition(400,100);var link1=port.link(port2);return model.addAll(node1,node2,link1),engine.setModel(model),(0,jsx_runtime.jsx)(DemoCanvasWidget._,{children:(0,jsx_runtime.jsx)(dist.JE,{engine})})},EventsAndListeners=function(){var engine=(0,react_diagrams_dist.ZP)(),model=new react_diagrams_dist.Vm,node1=new react_diagrams_dist.Fs("Node 1","rgb(255,99,66)"),port1=node1.addOutPort("Out");node1.setPosition(100,100);var node2=new react_diagrams_dist.Fs("Node 2","rgb(192,255,0)"),port2=node2.addInPort("In");node2.setPosition(400,40);var node3=new react_diagrams_dist.Fs("Node 3","rgb(128,99,255)"),port3=node3.addInPort("In");node3.setPosition(300,160);var link1=port1.link(port2),link2=port1.link(port3);return model.addAll(node1,node2,node3,link1,link2).forEach((function(item){item.registerListener({eventDidFire:(0,esm.action)("element eventDidFire")})})),model.registerListener({eventDidFire:(0,esm.action)("model eventDidFire")}),engine.setModel(model),(0,jsx_runtime.jsx)(DemoCanvasWidget._,{children:(0,jsx_runtime.jsx)(dist.JE,{engine})})},ZoomToFit=function(){for(var engine=(0,react_diagrams_dist.ZP)(),model=new react_diagrams_dist.Vm,i=0;i<8;i++)for(var j=0;j<8;j++)demo_zoom_to_fit_generateNodes(model,200*i,100*j);return engine.setModel(model),(0,jsx_runtime.jsx)(DemoWorkspaceWidget.F,{buttons:(0,jsx_runtime.jsx)(DemoWorkspaceWidget.R,{onClick:function onClick(){return engine.zoomToFit()},children:"Zoom to fit"}),children:(0,jsx_runtime.jsx)(DemoCanvasWidget._,{children:(0,jsx_runtime.jsx)(dist.JE,{engine})})})},ZoomToFitSelectNodes=function(){for(var engine=(0,react_diagrams_dist.ZP)(),model=new react_diagrams_dist.Vm,i=0;i<8;i++)for(var j=0;j<8;j++)demo_zoom_to_fit_nodes_generateNodes(model,200*i,100*j);return engine.setModel(model),(0,jsx_runtime.jsx)(DemoWorkspaceWidget.F,{buttons:(0,jsx_runtime.jsx)(DemoWorkspaceWidget.R,{onClick:function onClick(){return engine.zoomToFitSelectedNodes(50)},children:"Zoom to fit"}),children:(0,jsx_runtime.jsx)(DemoCanvasWidget._,{children:(0,jsx_runtime.jsx)(dist.JE,{engine})})})},CanvasDrag=function(){var engine=(0,react_diagrams_dist.ZP)(),model=new react_diagrams_dist.Vm,node1=new react_diagrams_dist.Fs("Node 1","rgb(0,192,255)"),port1=node1.addOutPort("Out");node1.setPosition(100,100);var node2=new react_diagrams_dist.Fs("Node 2","rgb(192,255,0)"),port2=node2.addInPort("In");node2.setPosition(400,100);var link1=port1.link(port2);return model.addAll(node1,node2,link1),engine.setModel(model),(0,jsx_runtime.jsx)(CanvasDragToggle,{engine,model})},CanvasPanAndZoom=function(){var engine=(0,react_diagrams_dist.ZP)({registerDefaultPanAndZoomCanvasAction:!0,registerDefaultZoomCanvasAction:!1}),model=new react_diagrams_dist.Vm,node1=new react_diagrams_dist.Fs("Node 1","rgb(0,192,255)"),port1=node1.addOutPort("Out");node1.setPosition(100,100);var node2=new react_diagrams_dist.Fs("Node 2","rgb(192,255,0)"),port2=node2.addInPort("In");node2.setPosition(400,100);var link1=port1.link(port2);return model.addAll(node1,node2,link1),engine.setModel(model),(0,jsx_runtime.jsx)(CanvasPanAndZoomToggle,{engine,model})},DynamicPorts=function(){var engine=(0,react_diagrams_dist.ZP)(),model=new react_diagrams_dist.Vm,node1=new react_diagrams_dist.Fs("Node 1","rgb(0,192,255)");node1.setPosition(100,100);var node2=new react_diagrams_dist.Fs("Node 2","rgb(192,255,0)");return node2.setPosition(400,100),model.addAll(node1,node2),engine.setModel(model),(0,jsx_runtime.jsx)(CloneSelected,{engine,model})},LinksWithLabels=function(){var engine=(0,react_diagrams_dist.ZP)(),model=new react_diagrams_dist.Vm,node1=new react_diagrams_dist.Fs("Node A","rgb(0,192,255)"),port1=node1.addOutPort("Out");node1.setPosition(100,100);var node2=new react_diagrams_dist.Fs("Node B","rgb(255,255,0)"),port2=node2.addInPort("In");node2.setPosition(400,50);var node3=new react_diagrams_dist.Fs("Node C (no label)","rgb(192,255,255)"),port3=node3.addInPort("In");node3.setPosition(450,180);var node4=new react_diagrams_dist.Fs("Node D","rgb(192,0,255)"),port4=node4.addInPort("In");node4.setPosition(300,250);var link1=port1.link(port2);link1.addLabel("Custom label 1"),link1.addLabel("Custom label 2");var link2=port1.link(port3),link3=port1.link(port4);return link3.addLabel("Emoji label: ðŸŽ‰"),model.addAll(node1,node2,node3,node4,link1,link2,link3),engine.setModel(model),(0,jsx_runtime.jsx)(DemoWorkspaceWidget.F,{buttons:(0,jsx_runtime.jsx)(DemoWorkspaceWidget.R,{onClick:function onClick(){(0,esm.action)("Serialized Graph")(JSON.stringify(model.serializeDiagram(),null,2))},children:"Serialize Graph"}),children:(0,jsx_runtime.jsx)(DemoCanvasWidget._,{children:(0,jsx_runtime.jsx)(dist.JE,{engine})})})},__namedExportsOrder=["DemoSimple","SimpleFlowExample","PerformanceDemo","LockedWidget","CanvasGridSize","EventsAndListeners","ZoomToFit","ZoomToFitSelectNodes","CanvasDrag","CanvasPanAndZoom","DynamicPorts","LinksWithLabels"]},"./demos/2_AdvancedUsage.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CloneSelected:()=>_2_AdvancedUsage_stories_CloneSelected,DragAndDrop:()=>DragAndDrop,LinkingByClickingInsteadOfDragging:()=>LinkingByClickingInsteadOfDragging,ProgramaticallyModifyingGraph:()=>ProgramaticallyModifyingGraph,RightAnglesRouting:()=>RightAnglesRouting,SerializingAndDeSerializing:()=>SerializingAndDeSerializing,SettingCustomDeleteKeys:()=>SettingCustomDeleteKeys,SmartRouting:()=>SmartRouting,__namedExportsOrder:()=>__namedExportsOrder,default:()=>_2_AdvancedUsage_stories});var dist=__webpack_require__("../packages/react-canvas-core/dist/index.js"),react_diagrams_dist=(__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.string.link.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.reflect.construct.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.create.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.symbol.to-primitive.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.date.to-primitive.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.symbol.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.number.constructor.js"),__webpack_require__("../packages/react-diagrams/dist/index.js")),lodash=__webpack_require__("../node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/lodash.js"),react=__webpack_require__("../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),DemoWorkspaceWidget=__webpack_require__("./demos/helpers/DemoWorkspaceWidget.tsx"),DemoCanvasWidget=__webpack_require__("./demos/helpers/DemoCanvasWidget.tsx"),jsx_runtime=__webpack_require__("../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var CloneSelected=function(_React$Component){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(CloneSelected,_React$Component);var _super=_createSuper(CloneSelected);function CloneSelected(props){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CloneSelected),(_this=_super.call(this,props)).cloneSelected=_this.cloneSelected.bind(_assertThisInitialized(_this)),_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(CloneSelected,[{key:"cloneSelected",value:function cloneSelected(){var engine=this.props.engine,offset_x=100,offset_y=100,model=engine.getModel(),itemMap={};lodash.forEach(model.getSelectedEntities(),(function(item){var newItem=item.clone(itemMap);newItem instanceof react_diagrams_dist.XF?(newItem.setPosition(newItem.getX()+offset_x,newItem.getY()+offset_y),model.addNode(newItem)):newItem instanceof react_diagrams_dist.KW&&(newItem.getPoints().forEach((function(p){p.setPosition(p.getX()+offset_x,p.getY()+offset_y)})),model.addLink(newItem)),newItem.setSelected(!1)})),this.forceUpdate()}},{key:"render",value:function render(){var engine=this.props.engine;return(0,jsx_runtime.jsx)(DemoWorkspaceWidget.F,{buttons:(0,jsx_runtime.jsx)(DemoWorkspaceWidget.R,{onClick:this.cloneSelected,children:"Clone Selected"}),children:(0,jsx_runtime.jsx)(DemoCanvasWidget._,{children:(0,jsx_runtime.jsx)(dist.JE,{engine})})})}}]),CloneSelected}(react.Component);var esm=__webpack_require__("../node_modules/.pnpm/@storybook+addon-actions@6.5.15_react@18.2.0/node_modules/@storybook/addon-actions/dist/esm/index.js"),json_beautify=__webpack_require__("../node_modules/.pnpm/json-beautify@1.1.1/node_modules/json-beautify/index.js");__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.keys.js");function demo_mutate_graph_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function demo_mutate_graph_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function demo_mutate_graph_setPrototypeOf(o,p){return demo_mutate_graph_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},demo_mutate_graph_setPrototypeOf(o,p)}function demo_mutate_graph_createSuper(Derived){var hasNativeReflectConstruct=function demo_mutate_graph_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=demo_mutate_graph_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=demo_mutate_graph_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return demo_mutate_graph_possibleConstructorReturn(this,result)}}function demo_mutate_graph_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return demo_mutate_graph_assertThisInitialized(self)}function demo_mutate_graph_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function demo_mutate_graph_getPrototypeOf(o){return demo_mutate_graph_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},demo_mutate_graph_getPrototypeOf(o)}var NodeDelayedPosition=function(_React$Component){!function demo_mutate_graph_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&demo_mutate_graph_setPrototypeOf(subClass,superClass)}(NodeDelayedPosition,_React$Component);var _super=demo_mutate_graph_createSuper(NodeDelayedPosition);function NodeDelayedPosition(props){var _this;return function demo_mutate_graph_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,NodeDelayedPosition),(_this=_super.call(this,props)).updatePosition=_this.updatePosition.bind(demo_mutate_graph_assertThisInitialized(_this)),_this.updatePositionViaSerialize=_this.updatePositionViaSerialize.bind(demo_mutate_graph_assertThisInitialized(_this)),_this}return function demo_mutate_graph_createClass(Constructor,protoProps,staticProps){return protoProps&&demo_mutate_graph_defineProperties(Constructor.prototype,protoProps),staticProps&&demo_mutate_graph_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(NodeDelayedPosition,[{key:"updatePosition",value:function updatePosition(){var engine=this.props.engine,nodes=engine.getModel().getNodes(),node=nodes[Object.keys(nodes)[0]];node.setPosition(node.getX()+30,node.getY()+30),engine.repaintCanvas()}},{key:"updatePositionViaSerialize",value:function updatePositionViaSerialize(){var engine=this.props.engine,model=engine.getModel(),str=JSON.stringify(model.serialize()),model2=new react_diagrams_dist.Vm,obj=JSON.parse(str),node=lodash.values(obj.layers[1].models)[0];node.x+=30,node.y+=30,model2.deserializeModel(obj,engine),engine.setModel(model2)}},{key:"render",value:function render(){var engine=this.props.engine;return(0,jsx_runtime.jsx)(DemoWorkspaceWidget.F,{buttons:[(0,jsx_runtime.jsx)(DemoWorkspaceWidget.R,{onClick:this.updatePosition,children:"Update position"},1),(0,jsx_runtime.jsx)(DemoWorkspaceWidget.R,{onClick:this.updatePositionViaSerialize,children:"Update position via serialize"},2)],children:(0,jsx_runtime.jsx)(DemoCanvasWidget._,{children:(0,jsx_runtime.jsx)(dist.JE,{engine})})})}}]),NodeDelayedPosition}(react.Component);__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.slice.js");var _templateObject,S,emotion_styled_browser_esm=__webpack_require__("../node_modules/.pnpm/@emotion+styled@11.10.5_jrh5enlbqfbnumycmktdqgd6se/node_modules/@emotion/styled/dist/emotion-styled.browser.esm.js");function TrayWidget_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function TrayWidget_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function TrayWidget_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function TrayWidget_setPrototypeOf(o,p){return TrayWidget_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},TrayWidget_setPrototypeOf(o,p)}function TrayWidget_createSuper(Derived){var hasNativeReflectConstruct=function TrayWidget_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=TrayWidget_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=TrayWidget_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return TrayWidget_possibleConstructorReturn(this,result)}}function TrayWidget_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function TrayWidget_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function TrayWidget_getPrototypeOf(o){return TrayWidget_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},TrayWidget_getPrototypeOf(o)}(S||(S={})).Tray=emotion_styled_browser_esm.Z.div(_templateObject||(_templateObject=function _taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n\t\tmin-width: 200px;\n\t\tbackground: rgb(20, 20, 20);\n\t\tflex-grow: 0;\n\t\tflex-shrink: 0;\n\t"])));var TrayItemWidget_templateObject,TrayItemWidget_S,TrayWidget=function(_React$Component){!function TrayWidget_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&TrayWidget_setPrototypeOf(subClass,superClass)}(TrayWidget,_React$Component);var _super=TrayWidget_createSuper(TrayWidget);function TrayWidget(){return TrayWidget_classCallCheck(this,TrayWidget),_super.apply(this,arguments)}return function TrayWidget_createClass(Constructor,protoProps,staticProps){return protoProps&&TrayWidget_defineProperties(Constructor.prototype,protoProps),staticProps&&TrayWidget_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(TrayWidget,[{key:"render",value:function render(){return(0,jsx_runtime.jsx)(S.Tray,{children:this.props.children})}}]),TrayWidget}(react.Component);__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.function.name.js");function TrayItemWidget_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function TrayItemWidget_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function TrayItemWidget_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function TrayItemWidget_setPrototypeOf(o,p){return TrayItemWidget_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},TrayItemWidget_setPrototypeOf(o,p)}function TrayItemWidget_createSuper(Derived){var hasNativeReflectConstruct=function TrayItemWidget_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=TrayItemWidget_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=TrayItemWidget_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return TrayItemWidget_possibleConstructorReturn(this,result)}}function TrayItemWidget_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function TrayItemWidget_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function TrayItemWidget_getPrototypeOf(o){return TrayItemWidget_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},TrayItemWidget_getPrototypeOf(o)}!function(_S){_S.Tray=emotion_styled_browser_esm.Z.div(TrayItemWidget_templateObject||(TrayItemWidget_templateObject=function TrayItemWidget_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n\t\tcolor: white;\n\t\tfont-family: Helvetica, Arial;\n\t\tpadding: 5px;\n\t\tmargin: 0px 10px;\n\t\tborder: solid 1px ",";\n\t\tborder-radius: 5px;\n\t\tmargin-bottom: 2px;\n\t\tcursor: pointer;\n\t"])),(function(p){return p.color}))}(TrayItemWidget_S||(TrayItemWidget_S={}));var BodyWidget_templateObject,_templateObject2,_templateObject3,_templateObject4,BodyWidget_S,TrayItemWidget=function(_React$Component){!function TrayItemWidget_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&TrayItemWidget_setPrototypeOf(subClass,superClass)}(TrayItemWidget,_React$Component);var _super=TrayItemWidget_createSuper(TrayItemWidget);function TrayItemWidget(){return TrayItemWidget_classCallCheck(this,TrayItemWidget),_super.apply(this,arguments)}return function TrayItemWidget_createClass(Constructor,protoProps,staticProps){return protoProps&&TrayItemWidget_defineProperties(Constructor.prototype,protoProps),staticProps&&TrayItemWidget_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(TrayItemWidget,[{key:"render",value:function render(){var _this=this;return(0,jsx_runtime.jsx)(TrayItemWidget_S.Tray,{color:this.props.color,draggable:!0,onDragStart:function onDragStart(event){event.dataTransfer.setData("storm-diagram-node",JSON.stringify(_this.props.model))},className:"tray-item",children:this.props.name})}}]),TrayItemWidget}(react.Component);function BodyWidget_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}function BodyWidget_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function BodyWidget_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function BodyWidget_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function BodyWidget_setPrototypeOf(o,p){return BodyWidget_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},BodyWidget_setPrototypeOf(o,p)}function BodyWidget_createSuper(Derived){var hasNativeReflectConstruct=function BodyWidget_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=BodyWidget_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=BodyWidget_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return BodyWidget_possibleConstructorReturn(this,result)}}function BodyWidget_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function BodyWidget_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function BodyWidget_getPrototypeOf(o){return BodyWidget_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},BodyWidget_getPrototypeOf(o)}!function(_S){_S.Body=emotion_styled_browser_esm.Z.div(BodyWidget_templateObject||(BodyWidget_templateObject=BodyWidget_taggedTemplateLiteralLoose(["\n\t\tflex-grow: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tmin-height: 100%;\n\t"]))),_S.Header=emotion_styled_browser_esm.Z.div(_templateObject2||(_templateObject2=BodyWidget_taggedTemplateLiteralLoose(["\n\t\tdisplay: flex;\n\t\tbackground: rgb(30, 30, 30);\n\t\tflex-grow: 0;\n\t\tflex-shrink: 0;\n\t\tcolor: white;\n\t\tfont-family: Helvetica, Arial, sans-serif;\n\t\tpadding: 10px;\n\t\talign-items: center;\n\t"]))),_S.Content=emotion_styled_browser_esm.Z.div(_templateObject3||(_templateObject3=BodyWidget_taggedTemplateLiteralLoose(["\n\t\tdisplay: flex;\n\t\tflex-grow: 1;\n\t"]))),_S.Layer=emotion_styled_browser_esm.Z.div(_templateObject4||(_templateObject4=BodyWidget_taggedTemplateLiteralLoose(["\n\t\tposition: relative;\n\t\tflex-grow: 1;\n\t"])))}(BodyWidget_S||(BodyWidget_S={}));var BodyWidget=function(_React$Component){!function BodyWidget_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&BodyWidget_setPrototypeOf(subClass,superClass)}(BodyWidget,_React$Component);var _super=BodyWidget_createSuper(BodyWidget);function BodyWidget(){return BodyWidget_classCallCheck(this,BodyWidget),_super.apply(this,arguments)}return function BodyWidget_createClass(Constructor,protoProps,staticProps){return protoProps&&BodyWidget_defineProperties(Constructor.prototype,protoProps),staticProps&&BodyWidget_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(BodyWidget,[{key:"render",value:function render(){var _this=this;return(0,jsx_runtime.jsxs)(BodyWidget_S.Body,{children:[(0,jsx_runtime.jsx)(BodyWidget_S.Header,{children:(0,jsx_runtime.jsx)("div",{className:"title",children:"Storm React Diagrams - DnD demo"})}),(0,jsx_runtime.jsxs)(BodyWidget_S.Content,{children:[(0,jsx_runtime.jsxs)(TrayWidget,{children:[(0,jsx_runtime.jsx)(TrayItemWidget,{model:{type:"in"},name:"In Node",color:"rgb(192,255,0)"}),(0,jsx_runtime.jsx)(TrayItemWidget,{model:{type:"out"},name:"Out Node",color:"rgb(0,192,255)"})]}),(0,jsx_runtime.jsx)(BodyWidget_S.Layer,{onDrop:function onDrop(event){var data=JSON.parse(event.dataTransfer.getData("storm-diagram-node")),nodesCount=lodash.keys(_this.props.app.getDiagramEngine().getModel().getNodes()).length,node=null;"in"===data.type?(node=new react_diagrams_dist.Fs("Node "+(nodesCount+1),"rgb(192,255,0)")).addInPort("In"):(node=new react_diagrams_dist.Fs("Node "+(nodesCount+1),"rgb(0,192,255)")).addOutPort("Out");var point=_this.props.app.getDiagramEngine().getRelativeMousePoint(event);node.setPosition(point),_this.props.app.getDiagramEngine().getModel().addNode(node),_this.forceUpdate()},onDragOver:function onDragOver(event){event.preventDefault()},children:(0,jsx_runtime.jsx)(DemoCanvasWidget._,{children:(0,jsx_runtime.jsx)(dist.JE,{engine:this.props.app.getDiagramEngine()})})})]})]})}}]),BodyWidget}(react.Component);function Application_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function Application_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}var Application=function(){function Application(){!function Application_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Application),this.activeModel=void 0,this.diagramEngine=void 0,this.diagramEngine=react_diagrams_dist.ZP(),this.newModel()}return function Application_createClass(Constructor,protoProps,staticProps){return protoProps&&Application_defineProperties(Constructor.prototype,protoProps),staticProps&&Application_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(Application,[{key:"newModel",value:function newModel(){this.activeModel=new react_diagrams_dist.Vm,this.diagramEngine.setModel(this.activeModel);var node1=new react_diagrams_dist.Fs("Node 1","rgb(0,192,255)"),port=node1.addOutPort("Out");node1.setPosition(100,100);var node2=new react_diagrams_dist.Fs("Node 2","rgb(192,255,0)"),port2=node2.addInPort("In");node2.setPosition(400,100);var link1=port.link(port2);this.activeModel.addAll(node1,node2,link1)}},{key:"getActiveDiagram",value:function getActiveDiagram(){return this.activeModel}},{key:"getDiagramEngine",value:function getDiagramEngine(){return this.diagramEngine}}]),Application}();function demo_right_angles_routing_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function demo_right_angles_routing_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function demo_right_angles_routing_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function demo_right_angles_routing_setPrototypeOf(o,p){return demo_right_angles_routing_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},demo_right_angles_routing_setPrototypeOf(o,p)}function demo_right_angles_routing_createSuper(Derived){var hasNativeReflectConstruct=function demo_right_angles_routing_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=demo_right_angles_routing_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=demo_right_angles_routing_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return demo_right_angles_routing_possibleConstructorReturn(this,result)}}function demo_right_angles_routing_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function demo_right_angles_routing_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function demo_right_angles_routing_getPrototypeOf(o){return demo_right_angles_routing_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},demo_right_angles_routing_getPrototypeOf(o)}var RightAnglePortModel=function(_DefaultPortModel){!function demo_right_angles_routing_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&demo_right_angles_routing_setPrototypeOf(subClass,superClass)}(RightAnglePortModel,_DefaultPortModel);var _super=demo_right_angles_routing_createSuper(RightAnglePortModel);function RightAnglePortModel(){return demo_right_angles_routing_classCallCheck(this,RightAnglePortModel),_super.apply(this,arguments)}return function demo_right_angles_routing_createClass(Constructor,protoProps,staticProps){return protoProps&&demo_right_angles_routing_defineProperties(Constructor.prototype,protoProps),staticProps&&demo_right_angles_routing_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(RightAnglePortModel,[{key:"createLinkModel",value:function createLinkModel(factory){return new react_diagrams_dist.C6}}]),RightAnglePortModel}(react_diagrams_dist.Gi);var react_diagrams_core_dist=__webpack_require__("../packages/react-diagrams-core/dist/index.js");function CreateLinkState_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function CreateLinkState_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function CreateLinkState_setPrototypeOf(o,p){return CreateLinkState_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},CreateLinkState_setPrototypeOf(o,p)}function CreateLinkState_createSuper(Derived){var hasNativeReflectConstruct=function CreateLinkState_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=CreateLinkState_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=CreateLinkState_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return CreateLinkState_possibleConstructorReturn(this,result)}}function CreateLinkState_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function CreateLinkState_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function CreateLinkState_getPrototypeOf(o){return CreateLinkState_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},CreateLinkState_getPrototypeOf(o)}var CreateLinkState=function(_State){!function CreateLinkState_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&CreateLinkState_setPrototypeOf(subClass,superClass)}(CreateLinkState,_State);var _super=CreateLinkState_createSuper(CreateLinkState);function CreateLinkState(){var _this;return function CreateLinkState_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CreateLinkState),(_this=_super.call(this,{name:"create-new-link"})).sourcePort=void 0,_this.link=void 0,_this.registerAction(new dist.aU({type:dist.n$.MOUSE_UP,fire:function fire(actionEvent){var element=_this.engine.getActionEventBus().getModelForEvent(actionEvent),_actionEvent$event=actionEvent.event,clientX=_actionEvent$event.clientX,clientY=_actionEvent$event.clientY,ox=_this.engine.getModel().getOffsetX(),oy=_this.engine.getModel().getOffsetY();if(element instanceof react_diagrams_core_dist.AJ&&!_this.sourcePort){_this.sourcePort=element;var link=_this.sourcePort.createLinkModel();link.setSourcePort(_this.sourcePort),link.getFirstPoint().setPosition(clientX-ox,clientY-oy),link.getLastPoint().setPosition(clientX-ox+20,clientY-oy+20),_this.link=_this.engine.getModel().addLink(link)}else element instanceof react_diagrams_core_dist.AJ&&_this.sourcePort&&element!=_this.sourcePort?_this.sourcePort.canLinkToPort(element)&&(_this.link.setTargetPort(element),element.reportPosition(),_this.clearState(),_this.eject()):element===_this.link.getLastPoint()&&_this.link.point(clientX-ox,clientY-oy,-1);_this.engine.repaintCanvas()}})),_this.registerAction(new dist.aU({type:dist.n$.MOUSE_MOVE,fire:function fire(actionEvent){if(_this.link){var event=actionEvent.event;_this.link.getLastPoint().setPosition(event.clientX,event.clientY),_this.engine.repaintCanvas()}}})),_this.registerAction(new dist.aU({type:dist.n$.KEY_UP,fire:function fire(actionEvent){27===actionEvent.event.keyCode&&(_this.link.remove(),_this.clearState(),_this.eject(),_this.engine.repaintCanvas())}})),_this}return function CreateLinkState_createClass(Constructor,protoProps,staticProps){return protoProps&&CreateLinkState_defineProperties(Constructor.prototype,protoProps),staticProps&&CreateLinkState_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(CreateLinkState,[{key:"clearState",value:function clearState(){this.link=void 0,this.sourcePort=void 0}}]),CreateLinkState}(dist.ZM);function DefaultState_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function DefaultState_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function DefaultState_setPrototypeOf(o,p){return DefaultState_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},DefaultState_setPrototypeOf(o,p)}function DefaultState_createSuper(Derived){var hasNativeReflectConstruct=function DefaultState_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=DefaultState_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DefaultState_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DefaultState_possibleConstructorReturn(this,result)}}function DefaultState_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function DefaultState_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function DefaultState_getPrototypeOf(o){return DefaultState_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},DefaultState_getPrototypeOf(o)}var DefaultState=function(_State){!function DefaultState_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DefaultState_setPrototypeOf(subClass,superClass)}(DefaultState,_State);var _super=DefaultState_createSuper(DefaultState);function DefaultState(){var _this;return function DefaultState_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DefaultState),(_this=_super.call(this,{name:"starting-state"})).dragCanvas=void 0,_this.createLink=void 0,_this.dragItems=void 0,_this.childStates=[new dist.If],_this.dragCanvas=new dist.qR,_this.createLink=new CreateLinkState,_this.dragItems=new react_diagrams_core_dist.mk,_this.registerAction(new dist.aU({type:dist.n$.MOUSE_DOWN,fire:function fire(event){var element=_this.engine.getActionEventBus().getModelForEvent(event);if(element){if(element instanceof react_diagrams_core_dist.AJ)return;_this.transitionWithEvent(_this.dragItems,event)}else _this.transitionWithEvent(_this.dragCanvas,event)}})),_this.registerAction(new dist.aU({type:dist.n$.TOUCH_START,fire:function fire(event){_this.transitionWithEvent(new dist.qR,event)}})),_this.registerAction(new dist.aU({type:dist.n$.MOUSE_UP,fire:function fire(event){_this.engine.getActionEventBus().getModelForEvent(event)instanceof react_diagrams_core_dist.AJ&&_this.transitionWithEvent(_this.createLink,event)}})),_this}return function DefaultState_createClass(Constructor,protoProps,staticProps){return protoProps&&DefaultState_defineProperties(Constructor.prototype,protoProps),staticProps&&DefaultState_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DefaultState)}(dist.ZM);dist.C7.TESTING=!0;const _2_AdvancedUsage_stories={title:"Advanced Usage"};var _2_AdvancedUsage_stories_CloneSelected=function(){var engine=(0,react_diagrams_dist.ZP)(),model=new react_diagrams_dist.Vm,node1=new react_diagrams_dist.Fs("Node 1","rgb(0,192,255)"),port=node1.addOutPort("Out");node1.setPosition(100,100);var node2=new react_diagrams_dist.Fs("Node 2","rgb(192,255,0)"),port2=node2.addInPort("In");node2.setPosition(400,100);var link1=port.link(port2);return model.addAll(node1,node2,link1),engine.setModel(model),(0,jsx_runtime.jsx)(CloneSelected,{engine,model})},SerializingAndDeSerializing=function(){var engine=(0,react_diagrams_dist.ZP)(),model=new react_diagrams_dist.Vm,node1=new react_diagrams_dist.Fs("Node 1","rgb(0,192,255)"),port1=node1.addOutPort("Out");node1.setPosition(100,100);var node2=new react_diagrams_dist.Fs("Node 2","rgb(192,255,0)"),port2=node2.addInPort("In");node2.setPosition(400,100);var link1=port1.link(port2);link1.addLabel(new react_diagrams_dist.Py({label:"Label"})),model.addAll(node1,node2,link1),engine.setModel(model);var str=JSON.stringify(model.serialize()),model2=new react_diagrams_dist.Vm;return model2.deserializeModel(JSON.parse(str),engine),engine.setModel(model2),(0,jsx_runtime.jsx)(DemoWorkspaceWidget.F,{buttons:(0,jsx_runtime.jsx)(DemoWorkspaceWidget.R,{onClick:function onClick(){(0,esm.action)("Serialized Graph")(json_beautify(model2.serialize(),null,2,80))},children:"Serialize Graph"}),children:(0,jsx_runtime.jsx)(DemoCanvasWidget._,{children:(0,jsx_runtime.jsx)(dist.JE,{engine})})})},ProgramaticallyModifyingGraph=function(){var engine=(0,react_diagrams_dist.ZP)(),model=new react_diagrams_dist.Vm,node1=new react_diagrams_dist.Fs("Node 1","rgb(0,192,255)"),port1=node1.addOutPort("Out");node1.setPosition(100,100);var node2=new react_diagrams_dist.Fs("Node 2","rgb(192,255,0)"),port2=node2.addInPort("In");node2.setPosition(400,100);var link1=port1.link(port2);return model.addAll(node1,node2,link1),engine.setModel(model),(0,jsx_runtime.jsx)(NodeDelayedPosition,{engine,model})},DragAndDrop=function(){var app=new Application;return(0,jsx_runtime.jsx)(BodyWidget,{app})},SmartRouting=function(){var engine=(0,react_diagrams_dist.ZP)(),model=new react_diagrams_dist.Vm,node1=new react_diagrams_dist.Fs("Node A","rgb(0,192,255)"),port1=node1.addPort(new react_diagrams_dist.Gi(!1,"out-1","Out"));node1.setPosition(340,350);var node2=new react_diagrams_dist.Fs("Node B","rgb(255,255,0)"),port2=node2.addPort(new react_diagrams_dist.Gi(!1,"out-1","Out"));node2.setPosition(240,80);var node3=new react_diagrams_dist.Fs("Node C","rgb(192,255,255)"),port3=node3.addPort(new react_diagrams_dist.Gi(!0,"in-1","In"));node3.setPosition(540,180);var node4=new react_diagrams_dist.Fs("Node D","rgb(192,0,255)"),port4=node4.addPort(new react_diagrams_dist.Gi(!0,"in-1","In"));node4.setPosition(95,185);var node5=new react_diagrams_dist.Fs("Node E","rgb(192,255,0)");node5.setPosition(250,180);var pathfinding=engine.getLinkFactories().getFactory(react_diagrams_dist.xU.NAME),link1=port1.link(port4,pathfinding),link2=port2.link(port3,pathfinding);return link1.addLabel(new react_diagrams_dist.Py({label:"I am a label!",offsetY:20})),model.addAll(node1,node2,node3,node4,node5,link1,link2),engine.setModel(model),(0,jsx_runtime.jsx)(DemoWorkspaceWidget.F,{buttons:(0,jsx_runtime.jsx)(DemoWorkspaceWidget.R,{onClick:function onClick(){(0,esm.action)("Serialized Graph")(JSON.stringify(model.serialize(),null,2))},children:"Serialize Graph"}),children:(0,jsx_runtime.jsx)(DemoCanvasWidget._,{children:(0,jsx_runtime.jsx)(dist.JE,{engine})})})},RightAnglesRouting=function(){var engine=(0,react_diagrams_dist.ZP)();engine.getLinkFactories().registerFactory(new react_diagrams_dist.$Q);var model=new react_diagrams_dist.Vm,node1=new react_diagrams_dist.Fs("Node A","rgb(0,192,255)"),port1=node1.addPort(new RightAnglePortModel(!1,"out-1","Out"));node1.setPosition(340,350);var node2=new react_diagrams_dist.Fs("Node B","rgb(255,255,0)"),port2=node2.addPort(new RightAnglePortModel(!1,"out-1","Out"));node2.setPosition(240,80);var node3=new react_diagrams_dist.Fs("Node C","rgb(192,255,255)"),port3=node3.addPort(new RightAnglePortModel(!0,"in-1","In"));node3.setPosition(540,180);var node4=new react_diagrams_dist.Fs("Node D","rgb(192,0,255)"),port4=node4.addPort(new RightAnglePortModel(!0,"in-1","In"));node4.setPosition(95,185);var link1=port1.link(port4),link2=port2.link(port3);return model.addAll(node1,node2,node3,node4,link1,link2),engine.setModel(model),(0,jsx_runtime.jsx)(DemoWorkspaceWidget.F,{buttons:(0,jsx_runtime.jsx)(DemoWorkspaceWidget.R,{onClick:function onClick(){(0,esm.action)("Serialized Graph")(JSON.stringify(model.serialize(),null,2))},children:"Serialize Graph"}),children:(0,jsx_runtime.jsx)(DemoCanvasWidget._,{children:(0,jsx_runtime.jsx)(dist.JE,{engine})})})},LinkingByClickingInsteadOfDragging=function(){var engine=(0,react_diagrams_dist.ZP)(),model=new react_diagrams_dist.Vm,node1=new react_diagrams_dist.Fs("Node 1","rgb(0,192,255)");node1.addOutPort("Out"),node1.setPosition(100,100);var node2=new react_diagrams_dist.Fs("Node 2","rgb(192,255,0)");return node2.addInPort("In"),node2.setPosition(400,100),model.addAll(node1,node2),engine.setModel(model),engine.getStateMachine().pushState(new DefaultState),(0,jsx_runtime.jsx)(DemoCanvasWidget._,{children:(0,jsx_runtime.jsx)(dist.JE,{engine})})},SettingCustomDeleteKeys=function(){var engine=(0,react_diagrams_dist.ZP)({registerDefaultDeleteItemsAction:!1}),model=new react_diagrams_dist.Vm,node1=new react_diagrams_dist.Fs({name:"Node 1",color:"rgb(0,192,255)"});node1.setPosition(100,100);var port1=node1.addOutPort("Out"),node2=new react_diagrams_dist.Fs("Node 2","rgb(192,255,0)"),port2=node2.addInPort("In");node2.setPosition(400,100);var link1=port1.link(port2);return link1.getOptions().testName="Test",link1.addLabel("Hello World!"),model.addAll(node1,node2,link1),engine.setModel(model),engine.getActionEventBus().registerAction(new dist.zp({keyCodes:[46]})),(0,jsx_runtime.jsx)(DemoCanvasWidget._,{children:(0,jsx_runtime.jsx)(dist.JE,{engine})})},__namedExportsOrder=["CloneSelected","SerializingAndDeSerializing","ProgramaticallyModifyingGraph","DragAndDrop","SmartRouting","RightAnglesRouting","LinkingByClickingInsteadOfDragging","SettingCustomDeleteKeys"]},"./demos/3_Customization.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CustomAnimatedLinks:()=>CustomAnimatedLinks,CustomDiamondNode:()=>CustomDiamondNode,CustomEvent:()=>CustomEvent,CustomLinkEndsWithArrows:()=>CustomLinkEndsWithArrows,CustomLinkLabel:()=>CustomLinkLabel,__namedExportsOrder:()=>__namedExportsOrder,default:()=>_3_Customization_stories});var dist=__webpack_require__("../packages/react-canvas-core/dist/index.js"),react=(__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.string.link.js"),__webpack_require__("../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js")),react_diagrams_dist=__webpack_require__("../packages/react-diagrams/dist/index.js"),DemoCanvasWidget=__webpack_require__("./demos/helpers/DemoCanvasWidget.tsx");__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.reflect.construct.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.create.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.symbol.to-primitive.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.date.to-primitive.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.symbol.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.number.constructor.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.reflect.get.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.get-own-property-descriptor.js");function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(target,property,receiver){var base=_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},_get.apply(this,arguments)}function _superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=_getPrototypeOf(object)););return object}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var _templateObject,S,EditableLabelModel=function(_LabelModel){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(EditableLabelModel,_LabelModel);var _super=_createSuper(EditableLabelModel);function EditableLabelModel(){var _this,options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,EditableLabelModel),(_this=_super.call(this,Object.assign({},options,{type:"editable-label"}))).value=void 0,_this.value=options.value||"",_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(EditableLabelModel,[{key:"serialize",value:function serialize(){return Object.assign({},_get(_getPrototypeOf(EditableLabelModel.prototype),"serialize",this).call(this),{value:this.value})}},{key:"deserialize",value:function deserialize(event){_get(_getPrototypeOf(EditableLabelModel.prototype),"deserialize",this).call(this,event),this.value=event.data.value}}]),EditableLabelModel}(react_diagrams_dist.aS),emotion_styled_browser_esm=(__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.function.name.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.from.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("../node_modules/.pnpm/@emotion+styled@11.10.5_jrh5enlbqfbnumycmktdqgd6se/node_modules/@emotion/styled/dist/emotion-styled.browser.esm.js")),esm=__webpack_require__("../node_modules/.pnpm/@storybook+addon-actions@6.5.15_react@18.2.0/node_modules/@storybook/addon-actions/dist/esm/index.js"),jsx_runtime=__webpack_require__("../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}(S||(S={})).Label=emotion_styled_browser_esm.Z.div(_templateObject||(_templateObject=function _taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n\t\tuser-select: none;\n\t\tpointer-events: auto;\n\t"])));var EditableLabelWidget=function EditableLabelWidget(props){var _React$useState2=_slicedToArray(react.useState(props.model.value),2),str=_React$useState2[0],setStr=_React$useState2[1];return(0,jsx_runtime.jsxs)(S.Label,{children:[(0,jsx_runtime.jsx)("input",{value:str,onChange:function onChange(event){var newVal=event.target.value;setStr(newVal),props.model.value=newVal}}),(0,jsx_runtime.jsx)("button",{onClick:function onClick(){return(0,esm.action)("model eventDidFire")("You clicked the button")},children:"Click me!"})]})};function EditableLabelFactory_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function EditableLabelFactory_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function EditableLabelFactory_setPrototypeOf(o,p){return EditableLabelFactory_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},EditableLabelFactory_setPrototypeOf(o,p)}function EditableLabelFactory_createSuper(Derived){var hasNativeReflectConstruct=function EditableLabelFactory_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=EditableLabelFactory_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=EditableLabelFactory_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return EditableLabelFactory_possibleConstructorReturn(this,result)}}function EditableLabelFactory_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function EditableLabelFactory_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function EditableLabelFactory_getPrototypeOf(o){return EditableLabelFactory_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},EditableLabelFactory_getPrototypeOf(o)}EditableLabelWidget.displayName="EditableLabelWidget";var EditableLabelFactory=function(_AbstractReactFactory){!function EditableLabelFactory_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&EditableLabelFactory_setPrototypeOf(subClass,superClass)}(EditableLabelFactory,_AbstractReactFactory);var _super=EditableLabelFactory_createSuper(EditableLabelFactory);function EditableLabelFactory(){return function EditableLabelFactory_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,EditableLabelFactory),_super.call(this,"editable-label")}return function EditableLabelFactory_createClass(Constructor,protoProps,staticProps){return protoProps&&EditableLabelFactory_defineProperties(Constructor.prototype,protoProps),staticProps&&EditableLabelFactory_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(EditableLabelFactory,[{key:"generateModel",value:function generateModel(){return new EditableLabelModel}},{key:"generateReactWidget",value:function generateReactWidget(event){return(0,jsx_runtime.jsx)(EditableLabelWidget,{model:event.model})}}]),EditableLabelFactory}(dist.a3);__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.index-of.js");var lodash=__webpack_require__("../node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/lodash.js");function demo_custom_action_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function demo_custom_action_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function demo_custom_action_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function demo_custom_action_setPrototypeOf(o,p){return demo_custom_action_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},demo_custom_action_setPrototypeOf(o,p)}function demo_custom_action_createSuper(Derived){var hasNativeReflectConstruct=function demo_custom_action_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=demo_custom_action_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=demo_custom_action_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return demo_custom_action_possibleConstructorReturn(this,result)}}function demo_custom_action_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function demo_custom_action_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function demo_custom_action_getPrototypeOf(o){return demo_custom_action_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},demo_custom_action_getPrototypeOf(o)}var CustomDeleteItemsAction=function(_Action){!function demo_custom_action_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&demo_custom_action_setPrototypeOf(subClass,superClass)}(CustomDeleteItemsAction,_Action);var _super=demo_custom_action_createSuper(CustomDeleteItemsAction);function CustomDeleteItemsAction(){var _this,options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return demo_custom_action_classCallCheck(this,CustomDeleteItemsAction),options=Object.assign({keyCodes:[46,8]},options),_this=_super.call(this,{type:dist.n$.KEY_DOWN,fire:function fire(event){if(-1!==options.keyCodes.indexOf(event.event.keyCode)){var selectedEntities=_this.engine.getModel().getSelectedEntities();if(selectedEntities.length>0)window.confirm("Are you sure you want to delete?")&&(lodash.forEach(selectedEntities,(function(model){model.isLocked()||model.remove()})),_this.engine.repaintCanvas())}}})}return function demo_custom_action_createClass(Constructor,protoProps,staticProps){return protoProps&&demo_custom_action_defineProperties(Constructor.prototype,protoProps),staticProps&&demo_custom_action_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(CustomDeleteItemsAction)}(dist.aU);function DiamondPortModel_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function DiamondPortModel_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function DiamondPortModel_setPrototypeOf(o,p){return DiamondPortModel_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},DiamondPortModel_setPrototypeOf(o,p)}function DiamondPortModel_createSuper(Derived){var hasNativeReflectConstruct=function DiamondPortModel_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=DiamondPortModel_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DiamondPortModel_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DiamondPortModel_possibleConstructorReturn(this,result)}}function DiamondPortModel_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function DiamondPortModel_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function DiamondPortModel_getPrototypeOf(o){return DiamondPortModel_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},DiamondPortModel_getPrototypeOf(o)}var DiamondPortModel=function(_PortModel){!function DiamondPortModel_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DiamondPortModel_setPrototypeOf(subClass,superClass)}(DiamondPortModel,_PortModel);var _super=DiamondPortModel_createSuper(DiamondPortModel);function DiamondPortModel(alignment){return function DiamondPortModel_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DiamondPortModel),_super.call(this,{type:"diamond",name:alignment,alignment})}return function DiamondPortModel_createClass(Constructor,protoProps,staticProps){return protoProps&&DiamondPortModel_defineProperties(Constructor.prototype,protoProps),staticProps&&DiamondPortModel_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DiamondPortModel,[{key:"createLinkModel",value:function createLinkModel(){return new react_diagrams_dist.Si}}]),DiamondPortModel}(react_diagrams_dist.AJ);function DiamondNodeModel_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function DiamondNodeModel_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function DiamondNodeModel_setPrototypeOf(o,p){return DiamondNodeModel_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},DiamondNodeModel_setPrototypeOf(o,p)}function DiamondNodeModel_createSuper(Derived){var hasNativeReflectConstruct=function DiamondNodeModel_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=DiamondNodeModel_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DiamondNodeModel_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DiamondNodeModel_possibleConstructorReturn(this,result)}}function DiamondNodeModel_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function DiamondNodeModel_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function DiamondNodeModel_getPrototypeOf(o){return DiamondNodeModel_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},DiamondNodeModel_getPrototypeOf(o)}var DiamondNodeWidget_templateObject,DiamondNodeWidget_S,DiamondNodeModel=function(_NodeModel){!function DiamondNodeModel_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DiamondNodeModel_setPrototypeOf(subClass,superClass)}(DiamondNodeModel,_NodeModel);var _super=DiamondNodeModel_createSuper(DiamondNodeModel);function DiamondNodeModel(){var _this;return function DiamondNodeModel_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DiamondNodeModel),(_this=_super.call(this,{type:"diamond"})).addPort(new DiamondPortModel(react_diagrams_dist.tK.TOP)),_this.addPort(new DiamondPortModel(react_diagrams_dist.tK.LEFT)),_this.addPort(new DiamondPortModel(react_diagrams_dist.tK.BOTTOM)),_this.addPort(new DiamondPortModel(react_diagrams_dist.tK.RIGHT)),_this}return function DiamondNodeModel_createClass(Constructor,protoProps,staticProps){return protoProps&&DiamondNodeModel_defineProperties(Constructor.prototype,protoProps),staticProps&&DiamondNodeModel_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DiamondNodeModel)}(react_diagrams_dist.XF);function DiamondNodeWidget_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function DiamondNodeWidget_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function DiamondNodeWidget_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function DiamondNodeWidget_setPrototypeOf(o,p){return DiamondNodeWidget_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},DiamondNodeWidget_setPrototypeOf(o,p)}function DiamondNodeWidget_createSuper(Derived){var hasNativeReflectConstruct=function DiamondNodeWidget_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=DiamondNodeWidget_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DiamondNodeWidget_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DiamondNodeWidget_possibleConstructorReturn(this,result)}}function DiamondNodeWidget_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function DiamondNodeWidget_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function DiamondNodeWidget_getPrototypeOf(o){return DiamondNodeWidget_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},DiamondNodeWidget_getPrototypeOf(o)}!function(_S){_S.Port=emotion_styled_browser_esm.Z.div(DiamondNodeWidget_templateObject||(DiamondNodeWidget_templateObject=function DiamondNodeWidget_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n\t\twidth: 16px;\n\t\theight: 16px;\n\t\tz-index: 10;\n\t\tbackground: rgba(0, 0, 0, 0.5);\n\t\tborder-radius: 8px;\n\t\tcursor: pointer;\n\n\t\t&:hover {\n\t\t\tbackground: rgba(0, 0, 0, 1);\n\t\t}\n\t"])))}(DiamondNodeWidget_S||(DiamondNodeWidget_S={}));var DiamondNodeWidget=function(_React$Component){!function DiamondNodeWidget_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DiamondNodeWidget_setPrototypeOf(subClass,superClass)}(DiamondNodeWidget,_React$Component);var _super=DiamondNodeWidget_createSuper(DiamondNodeWidget);function DiamondNodeWidget(){return DiamondNodeWidget_classCallCheck(this,DiamondNodeWidget),_super.apply(this,arguments)}return function DiamondNodeWidget_createClass(Constructor,protoProps,staticProps){return protoProps&&DiamondNodeWidget_defineProperties(Constructor.prototype,protoProps),staticProps&&DiamondNodeWidget_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DiamondNodeWidget,[{key:"render",value:function render(){return(0,jsx_runtime.jsxs)("div",{className:"diamond-node",style:{position:"relative",width:this.props.size,height:this.props.size},children:[(0,jsx_runtime.jsx)("svg",{width:this.props.size,height:this.props.size,dangerouslySetInnerHTML:{__html:'\n          <g id="Layer_1">\n          </g>\n          <g id="Layer_2">\n            <polygon fill="mediumpurple" stroke="'+(this.props.node.isSelected()?"white":"#000000")+'" stroke-width="3" stroke-miterlimit="10" points="10,'+this.props.size/2+" "+this.props.size/2+",10 "+(this.props.size-10)+","+this.props.size/2+" "+this.props.size/2+","+(this.props.size-10)+' "/>\n          </g>\n        '}}),(0,jsx_runtime.jsx)(react_diagrams_dist.ER,{style:{top:this.props.size/2-8,left:-8,position:"absolute"},port:this.props.node.getPort(react_diagrams_dist.tK.LEFT),engine:this.props.engine,children:(0,jsx_runtime.jsx)(DiamondNodeWidget_S.Port,{})}),(0,jsx_runtime.jsx)(react_diagrams_dist.ER,{style:{left:this.props.size/2-8,top:-8,position:"absolute"},port:this.props.node.getPort(react_diagrams_dist.tK.TOP),engine:this.props.engine,children:(0,jsx_runtime.jsx)(DiamondNodeWidget_S.Port,{})}),(0,jsx_runtime.jsx)(react_diagrams_dist.ER,{style:{left:this.props.size-8,top:this.props.size/2-8,position:"absolute"},port:this.props.node.getPort(react_diagrams_dist.tK.RIGHT),engine:this.props.engine,children:(0,jsx_runtime.jsx)(DiamondNodeWidget_S.Port,{})}),(0,jsx_runtime.jsx)(react_diagrams_dist.ER,{style:{left:this.props.size/2-8,top:this.props.size-8,position:"absolute"},port:this.props.node.getPort(react_diagrams_dist.tK.BOTTOM),engine:this.props.engine,children:(0,jsx_runtime.jsx)(DiamondNodeWidget_S.Port,{})})]})}}]),DiamondNodeWidget}(react.Component);function DiamondNodeFactory_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function DiamondNodeFactory_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function DiamondNodeFactory_setPrototypeOf(o,p){return DiamondNodeFactory_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},DiamondNodeFactory_setPrototypeOf(o,p)}function DiamondNodeFactory_createSuper(Derived){var hasNativeReflectConstruct=function DiamondNodeFactory_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=DiamondNodeFactory_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DiamondNodeFactory_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DiamondNodeFactory_possibleConstructorReturn(this,result)}}function DiamondNodeFactory_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function DiamondNodeFactory_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function DiamondNodeFactory_getPrototypeOf(o){return DiamondNodeFactory_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},DiamondNodeFactory_getPrototypeOf(o)}var DiamondNodeFactory=function(_AbstractReactFactory){!function DiamondNodeFactory_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DiamondNodeFactory_setPrototypeOf(subClass,superClass)}(DiamondNodeFactory,_AbstractReactFactory);var _super=DiamondNodeFactory_createSuper(DiamondNodeFactory);function DiamondNodeFactory(){return function DiamondNodeFactory_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DiamondNodeFactory),_super.call(this,"diamond")}return function DiamondNodeFactory_createClass(Constructor,protoProps,staticProps){return protoProps&&DiamondNodeFactory_defineProperties(Constructor.prototype,protoProps),staticProps&&DiamondNodeFactory_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DiamondNodeFactory,[{key:"generateReactWidget",value:function generateReactWidget(event){return(0,jsx_runtime.jsx)(DiamondNodeWidget,{engine:this.engine,size:50,node:event.model})}},{key:"generateModel",value:function generateModel(event){return new DiamondNodeModel}}]),DiamondNodeFactory}(dist.a3);function SimplePortFactory_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function SimplePortFactory_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function SimplePortFactory_setPrototypeOf(o,p){return SimplePortFactory_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},SimplePortFactory_setPrototypeOf(o,p)}function SimplePortFactory_createSuper(Derived){var hasNativeReflectConstruct=function SimplePortFactory_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=SimplePortFactory_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=SimplePortFactory_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return SimplePortFactory_possibleConstructorReturn(this,result)}}function SimplePortFactory_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function SimplePortFactory_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function SimplePortFactory_getPrototypeOf(o){return SimplePortFactory_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},SimplePortFactory_getPrototypeOf(o)}var SimplePortFactory=function(_AbstractModelFactory){!function SimplePortFactory_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&SimplePortFactory_setPrototypeOf(subClass,superClass)}(SimplePortFactory,_AbstractModelFactory);var _super=SimplePortFactory_createSuper(SimplePortFactory);function SimplePortFactory(type,cb){var _this;return function SimplePortFactory_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SimplePortFactory),(_this=_super.call(this,type)).cb=void 0,_this.cb=cb,_this}return function SimplePortFactory_createClass(Constructor,protoProps,staticProps){return protoProps&&SimplePortFactory_defineProperties(Constructor.prototype,protoProps),staticProps&&SimplePortFactory_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(SimplePortFactory,[{key:"generateModel",value:function generateModel(event){return this.cb(event.initialConfig)}}]),SimplePortFactory}(dist.Zi);function demo_custom_link1_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function demo_custom_link1_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function demo_custom_link1_createClass(Constructor,protoProps,staticProps){return protoProps&&demo_custom_link1_defineProperties(Constructor.prototype,protoProps),staticProps&&demo_custom_link1_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}function demo_custom_link1_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function demo_custom_link1_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&demo_custom_link1_setPrototypeOf(subClass,superClass)}function demo_custom_link1_setPrototypeOf(o,p){return demo_custom_link1_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},demo_custom_link1_setPrototypeOf(o,p)}function demo_custom_link1_createSuper(Derived){var hasNativeReflectConstruct=function demo_custom_link1_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=demo_custom_link1_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=demo_custom_link1_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return demo_custom_link1_possibleConstructorReturn(this,result)}}function demo_custom_link1_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function demo_custom_link1_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function demo_custom_link1_getPrototypeOf(o){return demo_custom_link1_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},demo_custom_link1_getPrototypeOf(o)}var AdvancedLinkModel=function(_DefaultLinkModel){demo_custom_link1_inherits(AdvancedLinkModel,_DefaultLinkModel);var _super=demo_custom_link1_createSuper(AdvancedLinkModel);function AdvancedLinkModel(){return demo_custom_link1_classCallCheck(this,AdvancedLinkModel),_super.call(this,{type:"advanced",width:10})}return demo_custom_link1_createClass(AdvancedLinkModel)}(react_diagrams_dist.Si),AdvancedPortModel=function(_DefaultPortModel){demo_custom_link1_inherits(AdvancedPortModel,_DefaultPortModel);var _super2=demo_custom_link1_createSuper(AdvancedPortModel);function AdvancedPortModel(){return demo_custom_link1_classCallCheck(this,AdvancedPortModel),_super2.apply(this,arguments)}return demo_custom_link1_createClass(AdvancedPortModel,[{key:"createLinkModel",value:function createLinkModel(){return new AdvancedLinkModel}}]),AdvancedPortModel}(react_diagrams_dist.Gi),AdvancedLinkSegment=function(_React$Component){demo_custom_link1_inherits(AdvancedLinkSegment,_React$Component);var _super3=demo_custom_link1_createSuper(AdvancedLinkSegment);function AdvancedLinkSegment(props){var _this;return demo_custom_link1_classCallCheck(this,AdvancedLinkSegment),(_this=_super3.call(this,props)).path=void 0,_this.circle=void 0,_this.callback=void 0,_this.percent=void 0,_this.handle=void 0,_this.mounted=void 0,_this.percent=0,_this}return demo_custom_link1_createClass(AdvancedLinkSegment,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;this.mounted=!0,this.callback=function(){if(_this2.circle&&_this2.path){_this2.percent+=2,_this2.percent>100&&(_this2.percent=0);var point=_this2.path.getPointAtLength(_this2.path.getTotalLength()*(_this2.percent/100));_this2.circle.setAttribute("cx",""+point.x),_this2.circle.setAttribute("cy",""+point.y),_this2.mounted&&requestAnimationFrame(_this2.callback)}},requestAnimationFrame(this.callback)}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.mounted=!1}},{key:"render",value:function render(){var _this3=this;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("path",{fill:"none",ref:function ref(_ref){_this3.path=_ref},strokeWidth:this.props.model.getOptions().width,stroke:"rgba(255,0,0,0.5)",d:this.props.path}),(0,jsx_runtime.jsx)("circle",{ref:function ref(_ref2){_this3.circle=_ref2},r:10,fill:"orange"})]})}}]),AdvancedLinkSegment}(react.Component),AdvancedLinkFactory=function(_DefaultLinkFactory){demo_custom_link1_inherits(AdvancedLinkFactory,_DefaultLinkFactory);var _super4=demo_custom_link1_createSuper(AdvancedLinkFactory);function AdvancedLinkFactory(){return demo_custom_link1_classCallCheck(this,AdvancedLinkFactory),_super4.call(this,"advanced")}return demo_custom_link1_createClass(AdvancedLinkFactory,[{key:"generateModel",value:function generateModel(){return new AdvancedLinkModel}},{key:"generateLinkSegment",value:function generateLinkSegment(model,selected,path){return(0,jsx_runtime.jsx)("g",{children:(0,jsx_runtime.jsx)(AdvancedLinkSegment,{model,path})})}}]),AdvancedLinkFactory}(react_diagrams_dist.oQ);var react_diagrams_core_dist=__webpack_require__("../packages/react-diagrams-core/dist/index.js");function demo_custom_link2_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function demo_custom_link2_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function demo_custom_link2_createClass(Constructor,protoProps,staticProps){return protoProps&&demo_custom_link2_defineProperties(Constructor.prototype,protoProps),staticProps&&demo_custom_link2_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}function demo_custom_link2_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function demo_custom_link2_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&demo_custom_link2_setPrototypeOf(subClass,superClass)}function demo_custom_link2_setPrototypeOf(o,p){return demo_custom_link2_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},demo_custom_link2_setPrototypeOf(o,p)}function demo_custom_link2_createSuper(Derived){var hasNativeReflectConstruct=function demo_custom_link2_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=demo_custom_link2_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=demo_custom_link2_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return demo_custom_link2_possibleConstructorReturn(this,result)}}function demo_custom_link2_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function demo_custom_link2_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function demo_custom_link2_getPrototypeOf(o){return demo_custom_link2_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},demo_custom_link2_getPrototypeOf(o)}var demo_custom_link2_AdvancedLinkModel=function(_DefaultLinkModel){demo_custom_link2_inherits(AdvancedLinkModel,_DefaultLinkModel);var _super=demo_custom_link2_createSuper(AdvancedLinkModel);function AdvancedLinkModel(){return demo_custom_link2_classCallCheck(this,AdvancedLinkModel),_super.call(this,{type:"advanced",width:4})}return demo_custom_link2_createClass(AdvancedLinkModel)}(react_diagrams_dist.Si),demo_custom_link2_AdvancedPortModel=function(_DefaultPortModel){demo_custom_link2_inherits(AdvancedPortModel,_DefaultPortModel);var _super2=demo_custom_link2_createSuper(AdvancedPortModel);function AdvancedPortModel(){return demo_custom_link2_classCallCheck(this,AdvancedPortModel),_super2.apply(this,arguments)}return demo_custom_link2_createClass(AdvancedPortModel,[{key:"createLinkModel",value:function createLinkModel(){return new demo_custom_link2_AdvancedLinkModel}}]),AdvancedPortModel}(react_diagrams_dist.Gi),CustomLinkArrowWidget=function CustomLinkArrowWidget(props){var point=props.point,previousPoint=props.previousPoint,angle=90+180*Math.atan2(point.getPosition().y-previousPoint.getPosition().y,point.getPosition().x-previousPoint.getPosition().x)/Math.PI;return(0,jsx_runtime.jsx)("g",{className:"arrow",transform:"translate("+point.getPosition().x+", "+point.getPosition().y+")",children:(0,jsx_runtime.jsx)("g",{style:{transform:"rotate("+angle+"deg)"},children:(0,jsx_runtime.jsx)("g",{transform:"translate(0, -3)",children:(0,jsx_runtime.jsx)("polygon",{points:"0,10 8,30 -8,30",fill:props.color,"data-id":point.getID(),"data-linkid":point.getLink().getID()})})})})};CustomLinkArrowWidget.displayName="CustomLinkArrowWidget";var AdvancedLinkWidget=function(_DefaultLinkWidget){demo_custom_link2_inherits(AdvancedLinkWidget,_DefaultLinkWidget);var _super3=demo_custom_link2_createSuper(AdvancedLinkWidget);function AdvancedLinkWidget(){return demo_custom_link2_classCallCheck(this,AdvancedLinkWidget),_super3.apply(this,arguments)}return demo_custom_link2_createClass(AdvancedLinkWidget,[{key:"generateArrow",value:function generateArrow(point,previousPoint){return(0,jsx_runtime.jsx)(CustomLinkArrowWidget,{point,previousPoint,colorSelected:this.props.link.getOptions().selectedColor,color:this.props.link.getOptions().color},point.getID())}},{key:"render",value:function render(){var _this=this,points=this.props.link.getPoints(),paths=[];this.refPaths=[];for(var _loop=function _loop(j){paths.push(_this.generateLink(react_diagrams_core_dist.hL.generateLinePath(points[j],points[j+1]),{"data-linkid":_this.props.link.getID(),"data-point":j,onMouseDown:function onMouseDown(event){_this.addPointToLink(event,j+1)}},j))},j=0;j<points.length-1;j++)_loop(j);for(var i=1;i<points.length-1;i++)paths.push(this.generatePoint(points[i]));return null!==this.props.link.getTargetPort()?paths.push(this.generateArrow(points[points.length-1],points[points.length-2])):paths.push(this.generatePoint(points[points.length-1])),(0,jsx_runtime.jsx)("g",{"data-default-link-test":this.props.link.getOptions().testName,children:paths})}}]),AdvancedLinkWidget}(react_diagrams_dist.A7),demo_custom_link2_AdvancedLinkFactory=function(_DefaultLinkFactory){demo_custom_link2_inherits(AdvancedLinkFactory,_DefaultLinkFactory);var _super4=demo_custom_link2_createSuper(AdvancedLinkFactory);function AdvancedLinkFactory(){return demo_custom_link2_classCallCheck(this,AdvancedLinkFactory),_super4.call(this,"advanced")}return demo_custom_link2_createClass(AdvancedLinkFactory,[{key:"generateModel",value:function generateModel(){return new demo_custom_link2_AdvancedLinkModel}},{key:"generateReactWidget",value:function generateReactWidget(event){return(0,jsx_runtime.jsx)(AdvancedLinkWidget,{link:event.model,diagramEngine:this.engine})}}]),AdvancedLinkFactory}(react_diagrams_dist.oQ);dist.C7.TESTING=!0;const _3_Customization_stories={title:"Customization"};var CustomDiamondNode=function(){var engine=(0,react_diagrams_dist.ZP)();engine.getPortFactories().registerFactory(new SimplePortFactory("diamond",(function(config){return new DiamondPortModel(react_diagrams_dist.tK.LEFT)}))),engine.getNodeFactories().registerFactory(new DiamondNodeFactory);var model=new react_diagrams_dist.Vm,node1=new react_diagrams_dist.Fs("Node 1","rgb(0,192,255)"),port1=node1.addOutPort("Out");node1.setPosition(100,200);var node2=new DiamondNodeModel;node2.setPosition(250,108);var node3=new react_diagrams_dist.Fs("Node 3","red"),port3=node3.addInPort("In");node3.setPosition(500,100);var link1=port1.link(node2.getPort(react_diagrams_dist.tK.LEFT)),link2=port3.link(node2.getPort(react_diagrams_dist.tK.RIGHT)),node4=new react_diagrams_dist.Fs("Node 4","rgb(0,192,255)"),port4=node4.addOutPort("Out");node4.setPosition(200,10);var link3=port4.link(node2.getPort(react_diagrams_dist.tK.TOP)),node5=new react_diagrams_dist.Fs("Node 5","mediumpurple"),port5=node5.addInPort("In");node5.setPosition(400,300);var link4=port5.link(node2.getPort(react_diagrams_dist.tK.BOTTOM));return model.addAll(node1,node2,node3,link1,link2,node4,link3,link4,node5),engine.setModel(model),(0,jsx_runtime.jsx)(DemoCanvasWidget._,{children:(0,jsx_runtime.jsx)(dist.JE,{engine})})},CustomAnimatedLinks=function(){var engine=(0,react_diagrams_dist.ZP)();engine.getLinkFactories().registerFactory(new AdvancedLinkFactory);var node1=new react_diagrams_dist.Fs("Source","rgb(0,192,255)"),port1=node1.addPort(new AdvancedPortModel(!1,"out-1","Out thick")),port2=node1.addPort(new react_diagrams_dist.Gi(!1,"out-2","Out default"));node1.setPosition(100,100);var node2=new react_diagrams_dist.Fs("Target","rgb(192,255,0)"),port3=node2.addPort(new AdvancedPortModel(!0,"in-1","In thick")),port4=node2.addPort(new react_diagrams_dist.Gi(!0,"in-2","In default"));node2.setPosition(300,100);var node3=new react_diagrams_dist.Fs("Source","rgb(0,192,255)");node3.addPort(new AdvancedPortModel(!1,"out-1","Out thick")),node3.addPort(new react_diagrams_dist.Gi(!1,"out-2","Out default")),node3.setPosition(100,200);var node4=new react_diagrams_dist.Fs("Target","rgb(192,255,0)");node4.addPort(new AdvancedPortModel(!0,"in-1","In thick")),node4.addPort(new react_diagrams_dist.Gi(!0,"in-2","In default")),node4.setPosition(300,200);var model=new react_diagrams_dist.Vm;return model.addAll(port1.link(port3),port2.link(port4)),model.addAll(node1,node2,node3,node4),engine.setModel(model),(0,jsx_runtime.jsx)(DemoCanvasWidget._,{children:(0,jsx_runtime.jsx)(dist.JE,{engine})})},CustomLinkEndsWithArrows=function(){var engine=(0,react_diagrams_dist.ZP)();engine.getLinkFactories().registerFactory(new demo_custom_link2_AdvancedLinkFactory);var node1=new react_diagrams_dist.Fs("Source","rgb(0,192,255)"),port1=node1.addPort(new demo_custom_link2_AdvancedPortModel(!1,"out"));node1.setPosition(100,100);var node2=new react_diagrams_dist.Fs("Target","rgb(192,255,0)"),port2=node2.addPort(new demo_custom_link2_AdvancedPortModel(!0,"in"));node2.setPosition(500,350);var node3=new react_diagrams_dist.Fs("Source","rgb(0,192,255)"),port3=node3.addPort(new demo_custom_link2_AdvancedPortModel(!1,"out"));node3.setPosition(100,500);var node4=new react_diagrams_dist.Fs("Target","rgb(192,255,0)"),port4=node4.addPort(new demo_custom_link2_AdvancedPortModel(!0,"in"));node4.setPosition(500,450);var model=new react_diagrams_dist.Vm;return model.addAll(port1.link(port2),port3.link(port4)),model.addAll(node1,node2,node3,node4),engine.setModel(model),(0,jsx_runtime.jsx)(DemoCanvasWidget._,{children:(0,jsx_runtime.jsx)(dist.JE,{engine})})},CustomLinkLabel=function(){var engine=(0,react_diagrams_dist.ZP)();engine.getLabelFactories().registerFactory(new EditableLabelFactory);var model=new react_diagrams_dist.Vm,node1=new react_diagrams_dist.Fs("Node1","red"),port1=node1.addOutPort("out");node1.setPosition(250,100);var node2=new react_diagrams_dist.Fs("Node2","green"),port2=node2.addInPort("in");node2.setPosition(800,300);var link1=port1.link(port2);return link1.addLabel(new EditableLabelModel({value:"Hello, I am label!"})),model.addAll(node1,port1,node2,port2,link1),engine.setModel(model),(0,jsx_runtime.jsx)(DemoCanvasWidget._,{children:(0,jsx_runtime.jsx)(dist.JE,{engine})})},CustomEvent=function(){var engine=(0,react_diagrams_dist.ZP)({registerDefaultDeleteItemsAction:!1}),model=new react_diagrams_dist.Vm,node1=new react_diagrams_dist.Fs({name:"Node 1",color:"rgb(0,192,255)"});node1.setPosition(100,100);var port1=node1.addOutPort("Out"),node2=new react_diagrams_dist.Fs("Node 2","rgb(192,255,0)"),port2=node2.addInPort("In");node2.setPosition(400,100);var link1=port1.link(port2);return link1.getOptions().testName="Test",link1.addLabel("Hello World!"),model.addAll(node1,node2,link1),engine.setModel(model),engine.getActionEventBus().registerAction(new CustomDeleteItemsAction),(0,jsx_runtime.jsx)(DemoCanvasWidget._,{children:(0,jsx_runtime.jsx)(dist.JE,{engine})})},__namedExportsOrder=["CustomDiamondNode","CustomAnimatedLinks","CustomLinkEndsWithArrows","CustomLinkLabel","CustomEvent"]},"./demos/4_Libraries.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{DagreDistribute:()=>DagreDistribute,GsapAnimation:()=>GsapAnimation,__namedExportsOrder:()=>__namedExportsOrder,default:()=>_4_Libraries_stories});var dist=__webpack_require__("../packages/react-canvas-core/dist/index.js"),react_diagrams_dist=(__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.function.name.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.string.link.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/web.timers.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.map.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.reflect.construct.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.create.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.symbol.to-primitive.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.date.to-primitive.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.symbol.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.number.constructor.js"),__webpack_require__("../packages/react-diagrams/dist/index.js")),react=__webpack_require__("../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),DemoWorkspaceWidget=__webpack_require__("./demos/helpers/DemoWorkspaceWidget.tsx"),DemoCanvasWidget=__webpack_require__("./demos/helpers/DemoCanvasWidget.tsx"),jsx_runtime=__webpack_require__("../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}function createNode(name){return new react_diagrams_dist.Fs(name,"rgb(0,192,255)")}var count=0;function connectNodes(nodeFrom,nodeTo,engine){count++;var portOut=nodeFrom.addPort(new react_diagrams_dist.Gi(!0,nodeFrom.name+"-out-"+count,"Out")),portTo=nodeTo.addPort(new react_diagrams_dist.Gi(!1,nodeFrom.name+"-to-"+count,"IN"));return portOut.link(portTo)}var DemoWidget=function(_React$Component){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(DemoWidget,_React$Component);var _super=_createSuper(DemoWidget);function DemoWidget(props){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DemoWidget),(_this=_super.call(this,props)).engine=void 0,_this.autoDistribute=function(){_this.engine.redistribute(_this.props.model),_this.reroute(),_this.props.engine.repaintCanvas()},_this.autoRefreshLinks=function(){_this.engine.refreshLinks(_this.props.model),_this.reroute(),_this.props.engine.repaintCanvas()},_this.engine=new react_diagrams_dist.z6({graph:{rankdir:"RL",ranker:"longest-path",marginx:25,marginy:25},includeLinks:!0,nodeMargin:25}),_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DemoWidget,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;setTimeout((function(){_this2.autoDistribute()}),500)}},{key:"reroute",value:function reroute(){this.props.engine.getLinkFactories().getFactory(react_diagrams_dist.xU.NAME).calculateRoutingMatrix()}},{key:"render",value:function render(){return(0,jsx_runtime.jsx)(DemoWorkspaceWidget.F,{buttons:(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(DemoWorkspaceWidget.R,{onClick:this.autoDistribute,children:"Re-distribute"}),(0,jsx_runtime.jsx)(DemoWorkspaceWidget.R,{onClick:this.autoRefreshLinks,children:"Refresh Links"})]}),children:(0,jsx_runtime.jsx)(DemoCanvasWidget._,{children:(0,jsx_runtime.jsx)(dist.JE,{engine:this.props.engine})})})}}]),DemoWidget}(react.Component);var gsap=__webpack_require__("../node_modules/.pnpm/gsap@3.11.4/node_modules/gsap/index.js");function demo_animation_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function demo_animation_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function demo_animation_setPrototypeOf(o,p){return demo_animation_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},demo_animation_setPrototypeOf(o,p)}function demo_animation_createSuper(Derived){var hasNativeReflectConstruct=function demo_animation_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=demo_animation_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=demo_animation_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return demo_animation_possibleConstructorReturn(this,result)}}function demo_animation_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function demo_animation_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function demo_animation_getPrototypeOf(o){return demo_animation_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},demo_animation_getPrototypeOf(o)}var NodeDelayedPosition=function(_React$Component){!function demo_animation_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&demo_animation_setPrototypeOf(subClass,superClass)}(NodeDelayedPosition,_React$Component);var _super=demo_animation_createSuper(NodeDelayedPosition);function NodeDelayedPosition(props){return function demo_animation_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,NodeDelayedPosition),_super.call(this,props)}return function demo_animation_createClass(Constructor,protoProps,staticProps){return protoProps&&demo_animation_defineProperties(Constructor.prototype,protoProps),staticProps&&demo_animation_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(NodeDelayedPosition,[{key:"render",value:function render(){var engine=this.props.engine;return(0,jsx_runtime.jsx)(DemoWorkspaceWidget.F,{children:(0,jsx_runtime.jsx)(DemoCanvasWidget._,{children:(0,jsx_runtime.jsx)(dist.JE,{engine})})})}}]),NodeDelayedPosition}(react.Component);dist.C7.TESTING=!0;const _4_Libraries_stories={title:"External Libs"};var DagreDistribute=function(){var engine=(0,react_diagrams_dist.ZP)(),model=new react_diagrams_dist.Vm,nodesFrom=[],nodesTo=[];nodesFrom.push(createNode("from-1")),nodesFrom.push(createNode("from-2")),nodesFrom.push(createNode("from-3")),nodesTo.push(createNode("to-1")),nodesTo.push(createNode("to-2")),nodesTo.push(createNode("to-3"));var links=nodesFrom.map((function(node,index){return connectNodes(node,nodesTo[index])}));return links.push(connectNodes(nodesTo[0],nodesTo[1])),links.push(connectNodes(nodesTo[1],nodesTo[2])),links.push(connectNodes(nodesTo[0],nodesTo[2])),links.push(connectNodes(nodesFrom[0],nodesFrom[2])),links.push(connectNodes(nodesFrom[0],nodesTo[2])),nodesFrom.forEach((function(node,index){node.setPosition(70*index,70*index),model.addNode(node)})),nodesTo.forEach((function(node,index){node.setPosition(70*index,100),model.addNode(node)})),links.forEach((function(link){model.addLink(link)})),engine.setModel(model),(0,jsx_runtime.jsx)(DemoWidget,{model,engine})},GsapAnimation=function(){var engine=(0,react_diagrams_dist.ZP)({repaintDebounceMs:12}),model=new react_diagrams_dist.Vm,node1=new react_diagrams_dist.Fs("Node 1","rgb(0,192,255)"),port1=node1.addOutPort("Out");node1.setPosition(100,100);var node2=new react_diagrams_dist.Fs("Node 2","rgb(192,255,0)"),port2=node2.addInPort("In");node2.setPosition(400,100);var node3=new react_diagrams_dist.Fs("Node 3","rgb(192,255,0)");node2.setPosition(200,300);var node4=new react_diagrams_dist.Fs("Node 4","rgb(192,255,0)");node2.setPosition(400,400);var link1=port1.link(port2);model.addAll(node1,node2,link1,node3,node4),engine.setModel(model);setInterval((function(){[node1,node2,node3,node4].map((function(node){var obj={x:0,y:0};gsap.ZP.fromTo(obj,{x:node.getPosition().x,y:node.getPosition().y},{x:Math.floor(500*Math.random()),y:Math.floor(500*Math.random()),duration:.8,onUpdate:function onUpdate(){node.setPosition(obj.x,obj.y),engine.repaintCanvas()}})}))}),2e3);return(0,jsx_runtime.jsx)(NodeDelayedPosition,{engine,model})},__namedExportsOrder=["DagreDistribute","GsapAnimation"]},"./demos/helpers/DemoCanvasWidget.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{_:()=>DemoCanvasWidget});__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.reflect.construct.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.create.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.symbol.to-primitive.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.date.to-primitive.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.symbol.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.number.constructor.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.get-prototype-of.js");var _templateObject,_templateObject2,S,_S,react__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),_emotion_styled__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("../node_modules/.pnpm/@emotion+styled@11.10.5_jrh5enlbqfbnumycmktdqgd6se/node_modules/@emotion/styled/dist/emotion-styled.browser.esm.js"),_emotion_react__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("../node_modules/.pnpm/@emotion+react@11.10.5_3stiutgnnbnfnf3uowm5cip22i/node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function _taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}(_S=S||(S={})).Container=_emotion_styled__WEBPACK_IMPORTED_MODULE_14__.Z.div(_templateObject||(_templateObject=_taggedTemplateLiteralLoose(["\n\t\theight: 100%;\n\t\tbackground-color: ",";\n\t\tbackground-size: 50px 50px;\n\t\tdisplay: flex;\n\n\t\t> * {\n\t\t\theight: 100%;\n\t\t\tmin-height: 100%;\n\t\t\twidth: 100%;\n\t\t}\n\n\t\tbackground-image: linear-gradient(\n\t\t\t\t0deg,\n\t\t\t\ttransparent 24%,\n\t\t\t\t"," 25%,\n\t\t\t\t"," 26%,\n\t\t\t\ttransparent 27%,\n\t\t\t\ttransparent 74%,\n\t\t\t\t"," 75%,\n\t\t\t\t"," 76%,\n\t\t\t\ttransparent 77%,\n\t\t\t\ttransparent\n\t\t\t),\n\t\t\tlinear-gradient(\n\t\t\t\t90deg,\n\t\t\t\ttransparent 24%,\n\t\t\t\t"," 25%,\n\t\t\t\t"," 26%,\n\t\t\t\ttransparent 27%,\n\t\t\t\ttransparent 74%,\n\t\t\t\t"," 75%,\n\t\t\t\t"," 76%,\n\t\t\t\ttransparent 77%,\n\t\t\t\ttransparent\n\t\t\t);\n\t"])),(function(p){return p.background}),(function(p){return p.color}),(function(p){return p.color}),(function(p){return p.color}),(function(p){return p.color}),(function(p){return p.color}),(function(p){return p.color}),(function(p){return p.color}),(function(p){return p.color})),_S.Expand=(0,_emotion_react__WEBPACK_IMPORTED_MODULE_16__.iv)(_templateObject2||(_templateObject2=_taggedTemplateLiteralLoose(["\n\t\thtml,\n\t\tbody,\n\t\t#root {\n\t\t\theight: 100%;\n\t\t}\n\t"])));var DemoCanvasWidget=function(_React$Component){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(DemoCanvasWidget,_React$Component);var _super=_createSuper(DemoCanvasWidget);function DemoCanvasWidget(){return _classCallCheck(this,DemoCanvasWidget),_super.apply(this,arguments)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DemoCanvasWidget,[{key:"render",value:function render(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_emotion_react__WEBPACK_IMPORTED_MODULE_16__.xB,{styles:S.Expand}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(S.Container,{background:this.props.background||"rgb(60, 60, 60)",color:this.props.color||"rgba(255,255,255, 0.05)",children:this.props.children})]})}}]),DemoCanvasWidget}(react__WEBPACK_IMPORTED_MODULE_13__.Component)},"./demos/helpers/DemoWorkspaceWidget.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{F:()=>DemoWorkspaceWidget,R:()=>DemoButton});__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.reflect.construct.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.create.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.symbol.to-primitive.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.date.to-primitive.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.symbol.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.number.constructor.js");var _templateObject,_templateObject2,_templateObject3,_templateObject4,S,_S,react__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),_emotion_styled__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("../node_modules/.pnpm/@emotion+styled@11.10.5_jrh5enlbqfbnumycmktdqgd6se/node_modules/@emotion/styled/dist/emotion-styled.browser.esm.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}function _taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(_S=S||(S={})).Toolbar=_emotion_styled__WEBPACK_IMPORTED_MODULE_14__.Z.div(_templateObject2||(_templateObject2=_taggedTemplateLiteralLoose(["\n\t\tpadding: 5px;\n\t\tdisplay: flex;\n\t\tflex-shrink: 0;\n\t"]))),_S.Content=_emotion_styled__WEBPACK_IMPORTED_MODULE_14__.Z.div(_templateObject3||(_templateObject3=_taggedTemplateLiteralLoose(["\n\t\tflex-grow: 1;\n\t\theight: 100%;\n\t"]))),_S.Container=_emotion_styled__WEBPACK_IMPORTED_MODULE_14__.Z.div(_templateObject4||(_templateObject4=_taggedTemplateLiteralLoose(["\n\t\tbackground: black;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\theight: 100%;\n\t\tborder-radius: 5px;\n\t\toverflow: hidden;\n\t"])));var DemoButton=_emotion_styled__WEBPACK_IMPORTED_MODULE_14__.Z.button(_templateObject||(_templateObject=_taggedTemplateLiteralLoose(["\n\tbackground: rgb(60, 60, 60);\n\tfont-size: 14px;\n\tpadding: 5px 10px;\n\tborder: none;\n\tcolor: white;\n\toutline: none;\n\tcursor: pointer;\n\tmargin: 2px;\n\tborder-radius: 3px;\n\n\t&:hover {\n\t\tbackground: rgb(0, 192, 255);\n\t}\n"]))),DemoWorkspaceWidget=function(_React$Component){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(DemoWorkspaceWidget,_React$Component);var _super=_createSuper(DemoWorkspaceWidget);function DemoWorkspaceWidget(){return _classCallCheck(this,DemoWorkspaceWidget),_super.apply(this,arguments)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DemoWorkspaceWidget,[{key:"render",value:function render(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(S.Container,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(S.Toolbar,{children:this.props.buttons}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(S.Content,{children:this.props.children})]})}}]),DemoWorkspaceWidget}(react__WEBPACK_IMPORTED_MODULE_13__.Component)},"./storybook-init-framework-entry.js":(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__("../node_modules/.pnpm/@storybook+react@6.5.15_zdqfsof44thopmx4b7elbx45zy/node_modules/@storybook/react/dist/esm/client/index.js")},"../packages/geometry/dist/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{hr:()=>BezierCurve,E9:()=>Point,Ae:()=>Rectangle,dq:()=>boundingBoxFromPoints,zh:()=>boundingBoxFromPolygons});__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.symbol.to-primitive.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.date.to-primitive.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.symbol.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.number.constructor.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.map.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.reduce.js");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}var Matrix=function(){function Matrix(matrix){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Matrix),this.matrix=matrix}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(Matrix,[{key:"mmul",value:function mmul(matrix){var _this=this;return this.matrix=this.matrix.map((function(row,i){return matrix.asArray()[0].map((function(_,j){return row.reduce((function(acc,_,n){return acc+_this.matrix[i][n]*matrix.asArray()[n][j]}),0)}))})),this}},{key:"asArray",value:function asArray(){return this.matrix}},{key:"get",value:function get(rowIndex,columnIndex){return this.asArray()[rowIndex][columnIndex]}}],[{key:"multiply",value:function multiply(){for(var m=arguments.length<=0?void 0:arguments[0],i=1;i<arguments.length;i++)m=m.mmul(i<0||arguments.length<=i?void 0:arguments[i]);return m}},{key:"scaleMatrix",value:function scaleMatrix(x,y){return new Matrix([[x,0,0],[0,y,0],[0,0,1]])}},{key:"translateMatrix",value:function translateMatrix(x,y){return new Matrix([[1,0,x],[0,1,y],[0,0,1]])}},{key:"rotateMatrix",value:function rotateMatrix(deg){return new Matrix([[Math.cos(deg),-1*Math.sin(deg),0],[Math.sin(deg),Math.cos(deg),0],[0,0,1]])}},{key:"createScaleMatrix",value:function createScaleMatrix(x,y,origin){return this.multiply(Matrix.translateMatrix(origin.x,origin.y),Matrix.scaleMatrix(x,y),Matrix.translateMatrix(-origin.x,-origin.y))}},{key:"createRotateMatrix",value:function createRotateMatrix(deg,origin){return this.multiply(Matrix.translateMatrix(origin.x,origin.y),Matrix.rotateMatrix(deg),Matrix.translateMatrix(-origin.x,-origin.y))}}]),Matrix}();function Point_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function Point_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function Point_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}var BoundsCorner,Point=function(){function Point(){var x=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Point_classCallCheck(this,Point),this.x=x,this.y=y}return function Point_createClass(Constructor,protoProps,staticProps){return protoProps&&Point_defineProperties(Constructor.prototype,protoProps),staticProps&&Point_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(Point,[{key:"translate",value:function translate(x,y){this.x+=x,this.y+=y}},{key:"clone",value:function clone(){return new Point(this.x,this.y)}},{key:"toSVG",value:function toSVG(){return this.x+" "+this.y}},{key:"asMatrix",value:function asMatrix(){return new Matrix([[this.x],[this.y],[1]])}},{key:"transform",value:function transform(matrix){var _final=matrix.mmul(this.asMatrix());this.x=_final.get(0,0),this.y=_final.get(1,0)}}],[{key:"middlePoint",value:function middlePoint(pointA,pointB){return new Point((pointB.x+pointA.x)/2,(pointB.y+pointA.y)/2)}}]),Point}(),lodash=(__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.create.js"),__webpack_require__("../node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/lodash.js"));!function(BoundsCorner){BoundsCorner.TOP_LEFT="TL",BoundsCorner.TOP_RIGHT="TR",BoundsCorner.BOTTOM_RIGHT="BR",BoundsCorner.BOTTOM_LEFT="BL"}(BoundsCorner||(BoundsCorner={}));var boundsFromPositionAndSize=function boundsFromPositionAndSize(x,y,width,height){var _ref;return(_ref={})[BoundsCorner.TOP_LEFT]=new Point(x,y),_ref[BoundsCorner.TOP_RIGHT]=new Point(x+width,y),_ref[BoundsCorner.BOTTOM_RIGHT]=new Point(x+width,y+height),_ref[BoundsCorner.BOTTOM_LEFT]=new Point(x,y+height),_ref},createEmptyBounds=function createEmptyBounds(){var _ref2;return(_ref2={})[BoundsCorner.TOP_LEFT]=new Point,_ref2[BoundsCorner.TOP_RIGHT]=new Point,_ref2[BoundsCorner.BOTTOM_RIGHT]=new Point,_ref2[BoundsCorner.BOTTOM_LEFT]=new Point,_ref2},boundingBoxFromPoints=function boundingBoxFromPoints(points){var _ref;if(0===points.length)return createEmptyBounds();for(var minX=points[0].x,maxX=points[0].x,minY=points[0].y,maxY=points[0].y,i=1;i<points.length;i++)points[i].x<minX&&(minX=points[i].x),points[i].x>maxX&&(maxX=points[i].x),points[i].y<minY&&(minY=points[i].y),points[i].y>maxY&&(maxY=points[i].y);return(_ref={})[BoundsCorner.TOP_LEFT]=new Point(minX,minY),_ref[BoundsCorner.TOP_RIGHT]=new Point(maxX,minY),_ref[BoundsCorner.BOTTOM_RIGHT]=new Point(maxX,maxY),_ref[BoundsCorner.BOTTOM_LEFT]=new Point(minX,maxY),_ref},boundingBoxFromPolygons=function boundingBoxFromPolygons(polygons){return boundingBoxFromPoints(lodash.flatMap(polygons,(function(polygon){return polygon.getPoints()})))};function Polygon_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function Polygon_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function Polygon_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}var Polygon=function(){function Polygon(){var points=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Polygon_classCallCheck(this,Polygon),this.points=points}return function Polygon_createClass(Constructor,protoProps,staticProps){return protoProps&&Polygon_defineProperties(Constructor.prototype,protoProps),staticProps&&Polygon_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(Polygon,[{key:"serialize",value:function serialize(){return lodash.map(this.points,(function(point){return[point.x,point.y]}))}},{key:"deserialize",value:function deserialize(data){this.points=lodash.map(data,(function(point){return new Point(point[0],point[1])}))}},{key:"scale",value:function scale(x,y,origin){var matrix=Matrix.createScaleMatrix(x,y,origin);lodash.forEach(this.points,(function(point){point.transform(matrix)}))}},{key:"transform",value:function transform(matrix){lodash.forEach(this.points,(function(point){point.transform(matrix)}))}},{key:"setPoints",value:function setPoints(points){this.points=points}},{key:"getPoints",value:function getPoints(){return this.points}},{key:"rotate",value:function rotate(degrees){this.transform(Matrix.createRotateMatrix(degrees/(180/Math.PI),this.getOrigin()))}},{key:"translate",value:function translate(offsetX,offsetY){lodash.forEach(this.points,(function(point){point.translate(offsetX,offsetY)}))}},{key:"doClone",value:function doClone(ob){this.points=lodash.map(ob.points,(function(point){return point.clone()}))}},{key:"clone",value:function clone(){var ob=Object.create(this);return ob.doClone(this),ob}},{key:"getOrigin",value:function getOrigin(){if(0===this.points.length)return null;var dimensions=boundingBoxFromPoints(this.points);return Point.middlePoint(dimensions[BoundsCorner.TOP_LEFT],dimensions[BoundsCorner.BOTTOM_RIGHT])}},{key:"getBoundingBox",value:function getBoundingBox(){return boundingBoxFromPoints(this.points)}}]),Polygon}();__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.reflect.construct.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.reflect.get.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.get-own-property-descriptor.js");function Rectangle_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function Rectangle_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(target,property,receiver){var base=_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},_get.apply(this,arguments)}function _superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=_getPrototypeOf(object)););return object}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var BezierCurvepPoints,Rectangle=function(_Polygon){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(Rectangle,_Polygon);var _super=_createSuper(Rectangle);function Rectangle(points){return function Rectangle_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Rectangle),points||(points=createEmptyBounds()),_super.call(this,[points[BoundsCorner.TOP_LEFT],points[BoundsCorner.TOP_RIGHT],points[BoundsCorner.BOTTOM_RIGHT],points[BoundsCorner.BOTTOM_LEFT]])}return function Rectangle_createClass(Constructor,protoProps,staticProps){return protoProps&&Rectangle_defineProperties(Constructor.prototype,protoProps),staticProps&&Rectangle_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(Rectangle,[{key:"updateDimensions",value:function updateDimensions(x,y,width,height){var points=boundsFromPositionAndSize(x,y,width,height);this.setPoints([points[BoundsCorner.TOP_LEFT],points[BoundsCorner.TOP_RIGHT],points[BoundsCorner.BOTTOM_RIGHT],points[BoundsCorner.BOTTOM_LEFT]])}},{key:"setPoints",value:function setPoints(points){if(4!==points.length)throw"Rectangles must always have 4 points";_get(_getPrototypeOf(Rectangle.prototype),"setPoints",this).call(this,points)}},{key:"containsPoint",value:function containsPoint(point){var tl=this.getTopLeft(),br=this.getBottomRight();return point.x>=tl.x&&point.x<=br.x&&point.y>=tl.y&&point.y<=br.y}},{key:"getWidth",value:function getWidth(){return Math.sqrt(Math.pow(this.getTopLeft().x-this.getTopRight().x,2)+Math.pow(this.getTopLeft().y-this.getTopRight().y,2))}},{key:"getHeight",value:function getHeight(){return Math.sqrt(Math.pow(this.getBottomLeft().x-this.getTopLeft().x,2)+Math.pow(this.getBottomLeft().y-this.getTopLeft().y,2))}},{key:"getTopMiddle",value:function getTopMiddle(){return Point.middlePoint(this.getTopLeft(),this.getTopRight())}},{key:"getBottomMiddle",value:function getBottomMiddle(){return Point.middlePoint(this.getBottomLeft(),this.getBottomRight())}},{key:"getLeftMiddle",value:function getLeftMiddle(){return Point.middlePoint(this.getBottomLeft(),this.getTopLeft())}},{key:"getRightMiddle",value:function getRightMiddle(){return Point.middlePoint(this.getBottomRight(),this.getTopRight())}},{key:"getTopLeft",value:function getTopLeft(){return this.points[0]}},{key:"getTopRight",value:function getTopRight(){return this.points[1]}},{key:"getBottomRight",value:function getBottomRight(){return this.points[2]}},{key:"getBottomLeft",value:function getBottomLeft(){return this.points[3]}}],[{key:"fromPositionAndSize",value:function fromPositionAndSize(x,y,width,height){return new Rectangle(boundsFromPositionAndSize(x,y,width,height))}},{key:"fromPointAndSize",value:function fromPointAndSize(position,width,height){return new Rectangle(boundsFromPositionAndSize(position.x,position.y,width,height))}}]),Rectangle}(Polygon);function BezierCurve_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function BezierCurve_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function BezierCurve_get(){return BezierCurve_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(target,property,receiver){var base=BezierCurve_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},BezierCurve_get.apply(this,arguments)}function BezierCurve_superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=BezierCurve_getPrototypeOf(object)););return object}function BezierCurve_setPrototypeOf(o,p){return BezierCurve_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},BezierCurve_setPrototypeOf(o,p)}function BezierCurve_createSuper(Derived){var hasNativeReflectConstruct=function BezierCurve_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=BezierCurve_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=BezierCurve_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return BezierCurve_possibleConstructorReturn(this,result)}}function BezierCurve_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function BezierCurve_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function BezierCurve_getPrototypeOf(o){return BezierCurve_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},BezierCurve_getPrototypeOf(o)}!function(BezierCurvepPoints){BezierCurvepPoints[BezierCurvepPoints.SOURCE=0]="SOURCE",BezierCurvepPoints[BezierCurvepPoints.SOURCE_CONTROL=1]="SOURCE_CONTROL",BezierCurvepPoints[BezierCurvepPoints.TARGET_CONTROL=2]="TARGET_CONTROL",BezierCurvepPoints[BezierCurvepPoints.TARGET=3]="TARGET"}(BezierCurvepPoints||(BezierCurvepPoints={}));var BezierCurve=function(_Polygon){!function BezierCurve_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&BezierCurve_setPrototypeOf(subClass,superClass)}(BezierCurve,_Polygon);var _super=BezierCurve_createSuper(BezierCurve);function BezierCurve(){return function BezierCurve_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BezierCurve),_super.call(this,[new Point(0,0),new Point(0,0),new Point(0,0),new Point(0,0)])}return function BezierCurve_createClass(Constructor,protoProps,staticProps){return protoProps&&BezierCurve_defineProperties(Constructor.prototype,protoProps),staticProps&&BezierCurve_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(BezierCurve,[{key:"getSVGCurve",value:function getSVGCurve(){return"M"+this.getSource().toSVG()+" C"+this.getSourceControl().toSVG()+", "+this.getTargetControl().toSVG()+", "+this.getTarget().toSVG()}},{key:"setPoints",value:function setPoints(points){if(4!==points.length)throw new Error("BezierCurve must have extactly 4 points");BezierCurve_get(BezierCurve_getPrototypeOf(BezierCurve.prototype),"setPoints",this).call(this,points)}},{key:"getSource",value:function getSource(){return this.points[BezierCurvepPoints.SOURCE]}},{key:"getSourceControl",value:function getSourceControl(){return this.points[BezierCurvepPoints.SOURCE_CONTROL]}},{key:"getTargetControl",value:function getTargetControl(){return this.points[BezierCurvepPoints.TARGET_CONTROL]}},{key:"getTarget",value:function getTarget(){return this.points[BezierCurvepPoints.TARGET]}},{key:"setSource",value:function setSource(point){this.points[BezierCurvepPoints.SOURCE]=point}},{key:"setSourceControl",value:function setSourceControl(point){this.points[BezierCurvepPoints.SOURCE_CONTROL]=point}},{key:"setTargetControl",value:function setTargetControl(point){this.points[BezierCurvepPoints.TARGET_CONTROL]=point}},{key:"setTarget",value:function setTarget(point){this.points[BezierCurvepPoints.TARGET]=point}}]),BezierCurve}(Polygon)},"../packages/react-canvas-core/dist/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{s2:()=>AbstractDisplacementState,Zi:()=>AbstractModelFactory,a3:()=>AbstractReactFactory,aU:()=>Action_Action,gq:()=>BaseModel,NW:()=>BasePositionModel,u1:()=>CanvasEngine,N5:()=>CanvasModel,JE:()=>CanvasWidget,zp:()=>DeleteItemsAction,qR:()=>DragCanvasState_DragCanvasState,r3:()=>FactoryBank,n$:()=>Action_InputType,iz:()=>LayerModel,C2:()=>MoveItemsState_MoveItemsState,G:()=>PeformanceWidget,If:()=>SelectingState_SelectingState,B1:()=>SelectionBoxLayerFactory,ZM:()=>State_State,C7:()=>Toolkit});__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.promise.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.reflect.construct.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.create.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.symbol.to-primitive.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.date.to-primitive.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.symbol.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.number.constructor.js");var lodash=__webpack_require__("../node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/lodash.js");__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.string.replace.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.regexp.to-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.date.to-string.js");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}var Toolkit=function(){function Toolkit(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Toolkit)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(Toolkit,null,[{key:"UID",value:function UID(){return Toolkit.TESTING?(Toolkit.TESTING_UID++,""+Toolkit.TESTING_UID):"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(c){var r=16*Math.random()|0;return("x"===c?r:3&r|8).toString(16)}))}},{key:"closest",value:function closest(element,selector){return Element.prototype.closest||(Element.prototype.closest=function(s){var el=this;do{if(Element.prototype.matches.call(el,s))return el;el=el.parentElement||el.parentNode}while(null!==el&&1===el.nodeType);return null}),element.closest(selector)}}]),Toolkit}();function BaseObserver_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function BaseObserver_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}Toolkit.TESTING=!1,Toolkit.TESTING_UID=0;var BaseObserver=function(){function BaseObserver(){!function BaseObserver_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BaseObserver),this.listeners={}}return function BaseObserver_createClass(Constructor,protoProps,staticProps){return protoProps&&BaseObserver_defineProperties(Constructor.prototype,protoProps),staticProps&&BaseObserver_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(BaseObserver,[{key:"fireEventInternal",value:function fireEventInternal(fire,k,event){this.iterateListeners((function(listener){if(!fire&&!event.firing)return!1;listener[k]&&listener[k](event)}))}},{key:"fireEvent",value:function fireEvent(event,k){event=Object.assign({firing:!0,stopPropagation:function stopPropagation(){event.firing=!1}},event),this.fireEventInternal(!0,"eventWillFire",Object.assign(Object.assign({},event),{function:k})),this.fireEventInternal(!1,k,event),this.fireEventInternal(!0,"eventDidFire",Object.assign(Object.assign({},event),{function:k}))}},{key:"iterateListeners",value:function iterateListeners(cb){for(var id in this.listeners){if(!1===cb(this.listeners[id]))return}}},{key:"getListenerHandle",value:function getListenerHandle(listener){var _this=this,_loop=function _loop(id){if(_this.listeners[id]===listener)return{v:{id,listener,deregister:function deregister(){delete _this.listeners[id]}}}};for(var id in this.listeners){var _ret=_loop(id);if("object"==typeof _ret)return _ret.v}}},{key:"registerListener",value:function registerListener(listener){var _this2=this,id=Toolkit.UID();return this.listeners[id]=listener,{id,listener,deregister:function deregister(){delete _this2.listeners[id]}}}},{key:"deregisterListener",value:function deregisterListener(listener){if("object"==typeof listener)return listener.deregister(),!0;var handle=this.getListenerHandle(listener);return!!handle&&(handle.deregister(),!0)}}]),BaseObserver}();function FactoryBank_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function FactoryBank_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var Action_InputType,FactoryBank=function(_BaseObserver){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(FactoryBank,_BaseObserver);var _super=_createSuper(FactoryBank);function FactoryBank(){var _this;return function FactoryBank_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,FactoryBank),(_this=_super.call(this)).factories={},_this}return function FactoryBank_createClass(Constructor,protoProps,staticProps){return protoProps&&FactoryBank_defineProperties(Constructor.prototype,protoProps),staticProps&&FactoryBank_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(FactoryBank,[{key:"getFactories",value:function getFactories(){return lodash.values(this.factories)}},{key:"clearFactories",value:function clearFactories(){for(var factory in this.factories)this.deregisterFactory(factory)}},{key:"getFactory",value:function getFactory(type){if(!this.factories[type])throw new Error("Cannot find factory with type ["+type+"]");return this.factories[type]}},{key:"registerFactory",value:function registerFactory(factory){factory.setFactoryBank(this),this.factories[factory.getType()]=factory,this.fireEvent({factory},"factoryAdded")}},{key:"deregisterFactory",value:function deregisterFactory(type){var factory=this.factories[type];factory.setFactoryBank(null),delete this.factories[type],this.fireEvent({factory},"factoryRemoved")}}]),FactoryBank}(BaseObserver),dist=__webpack_require__("../packages/geometry/dist/index.js");__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.function.name.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.from.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.is-array.js");function Action_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function Action_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}!function(InputType){InputType.MOUSE_DOWN="mouse-down",InputType.MOUSE_UP="mouse-up",InputType.MOUSE_MOVE="mouse-move",InputType.MOUSE_WHEEL="mouse-wheel",InputType.KEY_DOWN="key-down",InputType.KEY_UP="key-up",InputType.TOUCH_START="touch-start",InputType.TOUCH_END="touch-end",InputType.TOUCH_MOVE="touch-move"}(Action_InputType||(Action_InputType={}));var Action_Action=function(){function Action(options){!function Action_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Action),this.options=options,this.id=Toolkit.UID()}return function Action_createClass(Constructor,protoProps,staticProps){return protoProps&&Action_defineProperties(Constructor.prototype,protoProps),staticProps&&Action_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(Action,[{key:"setEngine",value:function setEngine(engine){this.engine=engine}}]),Action}();function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function ActionEventBus_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function ActionEventBus_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}var ActionEventBus=function(){function ActionEventBus(engine){!function ActionEventBus_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ActionEventBus),this.actions={},this.engine=engine,this.keys={}}return function ActionEventBus_createClass(Constructor,protoProps,staticProps){return protoProps&&ActionEventBus_defineProperties(Constructor.prototype,protoProps),staticProps&&ActionEventBus_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(ActionEventBus,[{key:"getKeys",value:function getKeys(){return lodash.keys(this.keys)}},{key:"registerAction",value:function registerAction(action){var _this=this;return action.setEngine(this.engine),this.actions[action.id]=action,function(){_this.deregisterAction(action)}}},{key:"deregisterAction",value:function deregisterAction(action){action.setEngine(null),delete this.actions[action.id]}},{key:"getActionsForType",value:function getActionsForType(type){return lodash.filter(this.actions,(function(action){return action.options.type===type}))}},{key:"getModelForEvent",value:function getModelForEvent(actionEvent){return actionEvent.model?actionEvent.model:this.engine.getMouseElement(actionEvent.event)}},{key:"getActionsForEvent",value:function getActionsForEvent(actionEvent){var event=actionEvent.event;return"mousedown"===event.type?this.getActionsForType(Action_InputType.MOUSE_DOWN):"mouseup"===event.type?this.getActionsForType(Action_InputType.MOUSE_UP):"keydown"===event.type?(this.keys[event.key.toLowerCase()]=!0,this.getActionsForType(Action_InputType.KEY_DOWN)):"keyup"===event.type?(delete this.keys[event.key.toLowerCase()],this.getActionsForType(Action_InputType.KEY_UP)):"mousemove"===event.type?this.getActionsForType(Action_InputType.MOUSE_MOVE):"wheel"===event.type?this.getActionsForType(Action_InputType.MOUSE_WHEEL):"touchstart"===event.type?this.getActionsForType(Action_InputType.TOUCH_START):"touchend"===event.type?this.getActionsForType(Action_InputType.TOUCH_END):"touchmove"===event.type?this.getActionsForType(Action_InputType.TOUCH_MOVE):[]}},{key:"fireAction",value:function fireAction(actionEvent){var _step,_iterator=_createForOfIteratorHelper(this.getActionsForEvent(actionEvent));try{for(_iterator.s();!(_step=_iterator.n()).done;){_step.value.options.fire(actionEvent)}}catch(err){_iterator.e(err)}finally{_iterator.f()}}}]),ActionEventBus}();function PanAndZoomCanvasAction_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function PanAndZoomCanvasAction_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return PanAndZoomCanvasAction_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PanAndZoomCanvasAction_arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function PanAndZoomCanvasAction_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function PanAndZoomCanvasAction_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function PanAndZoomCanvasAction_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function PanAndZoomCanvasAction_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function PanAndZoomCanvasAction_setPrototypeOf(o,p){return PanAndZoomCanvasAction_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},PanAndZoomCanvasAction_setPrototypeOf(o,p)}function PanAndZoomCanvasAction_createSuper(Derived){var hasNativeReflectConstruct=function PanAndZoomCanvasAction_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=PanAndZoomCanvasAction_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=PanAndZoomCanvasAction_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return PanAndZoomCanvasAction_possibleConstructorReturn(this,result)}}function PanAndZoomCanvasAction_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function PanAndZoomCanvasAction_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function PanAndZoomCanvasAction_getPrototypeOf(o){return PanAndZoomCanvasAction_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},PanAndZoomCanvasAction_getPrototypeOf(o)}var PanAndZoomCanvasAction=function(_Action){!function PanAndZoomCanvasAction_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&PanAndZoomCanvasAction_setPrototypeOf(subClass,superClass)}(PanAndZoomCanvasAction,_Action);var _super=PanAndZoomCanvasAction_createSuper(PanAndZoomCanvasAction);function PanAndZoomCanvasAction(){var _this,options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return PanAndZoomCanvasAction_classCallCheck(this,PanAndZoomCanvasAction),_this=_super.call(this,{type:Action_InputType.MOUSE_WHEEL,fire:function fire(actionEvent){var _step,event=actionEvent.event,_iterator=PanAndZoomCanvasAction_createForOfIteratorHelper(_this.engine.getModel().getLayers());try{for(_iterator.s();!(_step=_iterator.n()).done;){_step.value.allowRepaint(!1)}}catch(err){_iterator.e(err)}finally{_iterator.f()}var model=_this.engine.getModel();if(event.stopPropagation(),event.ctrlKey){var oldZoomFactor=_this.engine.getModel().getZoomLevel()/100,scrollDelta=options.inverseZoom?event.deltaY:-event.deltaY;scrollDelta/=3,model.getZoomLevel()+scrollDelta>10&&model.setZoomLevel(model.getZoomLevel()+scrollDelta);var zoomFactor=model.getZoomLevel()/100,boundingRect=event.currentTarget.getBoundingClientRect(),clientWidth=boundingRect.width,clientHeight=boundingRect.height,widthDiff=clientWidth*zoomFactor-clientWidth*oldZoomFactor,heightDiff=clientHeight*zoomFactor-clientHeight*oldZoomFactor,clientX=event.clientX-boundingRect.left,clientY=event.clientY-boundingRect.top,xFactor=(clientX-model.getOffsetX())/oldZoomFactor/clientWidth,yFactor=(clientY-model.getOffsetY())/oldZoomFactor/clientHeight;model.setOffset(model.getOffsetX()-widthDiff*xFactor,model.getOffsetY()-heightDiff*yFactor)}else{var yDelta=options.inverseZoom?-event.deltaY:event.deltaY,xDelta=options.inverseZoom?-event.deltaX:event.deltaX;model.setOffset(model.getOffsetX()-xDelta,model.getOffsetY()-yDelta)}_this.engine.repaintCanvas();var _step2,_iterator2=PanAndZoomCanvasAction_createForOfIteratorHelper(_this.engine.getModel().getLayers());try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){_step2.value.allowRepaint(!0)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}})}return function PanAndZoomCanvasAction_createClass(Constructor,protoProps,staticProps){return protoProps&&PanAndZoomCanvasAction_defineProperties(Constructor.prototype,protoProps),staticProps&&PanAndZoomCanvasAction_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(PanAndZoomCanvasAction)}(Action_Action);function ZoomCanvasAction_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function ZoomCanvasAction_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return ZoomCanvasAction_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZoomCanvasAction_arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function ZoomCanvasAction_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function ZoomCanvasAction_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function ZoomCanvasAction_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function ZoomCanvasAction_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function ZoomCanvasAction_setPrototypeOf(o,p){return ZoomCanvasAction_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},ZoomCanvasAction_setPrototypeOf(o,p)}function ZoomCanvasAction_createSuper(Derived){var hasNativeReflectConstruct=function ZoomCanvasAction_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=ZoomCanvasAction_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=ZoomCanvasAction_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return ZoomCanvasAction_possibleConstructorReturn(this,result)}}function ZoomCanvasAction_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function ZoomCanvasAction_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function ZoomCanvasAction_getPrototypeOf(o){return ZoomCanvasAction_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},ZoomCanvasAction_getPrototypeOf(o)}var ZoomCanvasAction=function(_Action){!function ZoomCanvasAction_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&ZoomCanvasAction_setPrototypeOf(subClass,superClass)}(ZoomCanvasAction,_Action);var _super=ZoomCanvasAction_createSuper(ZoomCanvasAction);function ZoomCanvasAction(){var _this,options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ZoomCanvasAction_classCallCheck(this,ZoomCanvasAction),_this=_super.call(this,{type:Action_InputType.MOUSE_WHEEL,fire:function fire(actionEvent){var _step,event=actionEvent.event,_iterator=ZoomCanvasAction_createForOfIteratorHelper(_this.engine.getModel().getLayers());try{for(_iterator.s();!(_step=_iterator.n()).done;){_step.value.allowRepaint(!1)}}catch(err){_iterator.e(err)}finally{_iterator.f()}var model=_this.engine.getModel();event.stopPropagation();var oldZoomFactor=_this.engine.getModel().getZoomLevel()/100,scrollDelta=options.inverseZoom?-event.deltaY:event.deltaY;event.ctrlKey&&scrollDelta%1!=0?scrollDelta/=3:scrollDelta/=60,model.getZoomLevel()+scrollDelta>10&&model.setZoomLevel(model.getZoomLevel()+scrollDelta);var zoomFactor=model.getZoomLevel()/100,boundingRect=event.currentTarget.getBoundingClientRect(),clientWidth=boundingRect.width,clientHeight=boundingRect.height,widthDiff=clientWidth*zoomFactor-clientWidth*oldZoomFactor,heightDiff=clientHeight*zoomFactor-clientHeight*oldZoomFactor,clientX=event.clientX-boundingRect.left,clientY=event.clientY-boundingRect.top,xFactor=(clientX-model.getOffsetX())/oldZoomFactor/clientWidth,yFactor=(clientY-model.getOffsetY())/oldZoomFactor/clientHeight;model.setOffset(model.getOffsetX()-widthDiff*xFactor,model.getOffsetY()-heightDiff*yFactor),_this.engine.repaintCanvas();var _step2,_iterator2=ZoomCanvasAction_createForOfIteratorHelper(_this.engine.getModel().getLayers());try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){_step2.value.allowRepaint(!0)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}})}return function ZoomCanvasAction_createClass(Constructor,protoProps,staticProps){return protoProps&&ZoomCanvasAction_defineProperties(Constructor.prototype,protoProps),staticProps&&ZoomCanvasAction_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(ZoomCanvasAction)}(Action_Action);__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.index-of.js");function DeleteItemsAction_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function DeleteItemsAction_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function DeleteItemsAction_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function DeleteItemsAction_setPrototypeOf(o,p){return DeleteItemsAction_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},DeleteItemsAction_setPrototypeOf(o,p)}function DeleteItemsAction_createSuper(Derived){var hasNativeReflectConstruct=function DeleteItemsAction_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=DeleteItemsAction_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DeleteItemsAction_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DeleteItemsAction_possibleConstructorReturn(this,result)}}function DeleteItemsAction_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function DeleteItemsAction_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function DeleteItemsAction_getPrototypeOf(o){return DeleteItemsAction_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},DeleteItemsAction_getPrototypeOf(o)}var DeleteItemsAction=function(_Action){!function DeleteItemsAction_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DeleteItemsAction_setPrototypeOf(subClass,superClass)}(DeleteItemsAction,_Action);var _super=DeleteItemsAction_createSuper(DeleteItemsAction);function DeleteItemsAction(){var _this,options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};DeleteItemsAction_classCallCheck(this,DeleteItemsAction);var keyCodes=options.keyCodes||[46,8],modifiers=Object.assign({ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1},options.modifiers);return _this=_super.call(this,{type:Action_InputType.KEY_DOWN,fire:function fire(event){var _event$event=event.event,keyCode=_event$event.keyCode,ctrlKey=_event$event.ctrlKey,shiftKey=_event$event.shiftKey,altKey=_event$event.altKey,metaKey=_event$event.metaKey;-1!==keyCodes.indexOf(keyCode)&&lodash.isEqual({ctrlKey,shiftKey,altKey,metaKey},modifiers)&&(lodash.forEach(_this.engine.getModel().getSelectedEntities(),(function(model){model.isLocked()||model.remove()})),_this.engine.repaintCanvas())}})}return function DeleteItemsAction_createClass(Constructor,protoProps,staticProps){return protoProps&&DeleteItemsAction_defineProperties(Constructor.prototype,protoProps),staticProps&&DeleteItemsAction_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DeleteItemsAction)}(Action_Action);function StateMachine_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function StateMachine_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function StateMachine_setPrototypeOf(o,p){return StateMachine_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},StateMachine_setPrototypeOf(o,p)}function StateMachine_createSuper(Derived){var hasNativeReflectConstruct=function StateMachine_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=StateMachine_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=StateMachine_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return StateMachine_possibleConstructorReturn(this,result)}}function StateMachine_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function StateMachine_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function StateMachine_getPrototypeOf(o){return StateMachine_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},StateMachine_getPrototypeOf(o)}var StateMachine=function(_BaseObserver){!function StateMachine_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&StateMachine_setPrototypeOf(subClass,superClass)}(StateMachine,_BaseObserver);var _super=StateMachine_createSuper(StateMachine);function StateMachine(engine){var _this;return function StateMachine_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,StateMachine),(_this=_super.call(this)).engine=engine,_this.stateStack=[],_this}return function StateMachine_createClass(Constructor,protoProps,staticProps){return protoProps&&StateMachine_defineProperties(Constructor.prototype,protoProps),staticProps&&StateMachine_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(StateMachine,[{key:"getCurrentState",value:function getCurrentState(){return this.currentState}},{key:"pushState",value:function pushState(state){this.stateStack.push(state),this.setState(state)}},{key:"popState",value:function popState(){this.stateStack.pop(),this.setState(lodash.last(this.stateStack))}},{key:"setState",value:function setState(state){state.setEngine(this.engine),this.currentState&&this.currentState.deactivated(state);var old=this.currentState;this.currentState=state,this.currentState&&(this.currentState.activated(old),this.fireEvent({newState:state},"stateChanged"))}}]),StateMachine}(BaseObserver);function CanvasEngine_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function CanvasEngine_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function CanvasEngine_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function CanvasEngine_setPrototypeOf(o,p){return CanvasEngine_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},CanvasEngine_setPrototypeOf(o,p)}function CanvasEngine_createSuper(Derived){var hasNativeReflectConstruct=function CanvasEngine_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=CanvasEngine_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=CanvasEngine_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return CanvasEngine_possibleConstructorReturn(this,result)}}function CanvasEngine_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return CanvasEngine_assertThisInitialized(self)}function CanvasEngine_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function CanvasEngine_getPrototypeOf(o){return CanvasEngine_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},CanvasEngine_getPrototypeOf(o)}var CanvasEngine=function(_BaseObserver){!function CanvasEngine_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&CanvasEngine_setPrototypeOf(subClass,superClass)}(CanvasEngine,_BaseObserver);var _super=CanvasEngine_createSuper(CanvasEngine);function CanvasEngine(){var _this,options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return CanvasEngine_classCallCheck(this,CanvasEngine),(_this=_super.call(this)).model=null,_this.eventBus=new ActionEventBus(CanvasEngine_assertThisInitialized(_this)),_this.stateMachine=new StateMachine(CanvasEngine_assertThisInitialized(_this)),_this.layerFactories=new FactoryBank,_this.registerFactoryBank(_this.layerFactories),_this.options=Object.assign({registerDefaultDeleteItemsAction:!0,registerDefaultZoomCanvasAction:!0,repaintDebounceMs:0},options),!0===_this.options.registerDefaultZoomCanvasAction?_this.eventBus.registerAction(new ZoomCanvasAction):!0===_this.options.registerDefaultPanAndZoomCanvasAction&&_this.eventBus.registerAction(new PanAndZoomCanvasAction),!0===_this.options.registerDefaultDeleteItemsAction&&_this.eventBus.registerAction(new DeleteItemsAction),_this}return function CanvasEngine_createClass(Constructor,protoProps,staticProps){return protoProps&&CanvasEngine_defineProperties(Constructor.prototype,protoProps),staticProps&&CanvasEngine_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(CanvasEngine,[{key:"getStateMachine",value:function getStateMachine(){return this.stateMachine}},{key:"getRelativeMousePoint",value:function getRelativeMousePoint(event){var point=this.getRelativePoint(event.clientX,event.clientY);return new dist.E9((point.x-this.model.getOffsetX())/(this.model.getZoomLevel()/100),(point.y-this.model.getOffsetY())/(this.model.getZoomLevel()/100))}},{key:"getRelativePoint",value:function getRelativePoint(x,y){var canvasRect=this.canvas.getBoundingClientRect();return new dist.E9(x-canvasRect.left,y-canvasRect.top)}},{key:"registerFactoryBank",value:function registerFactoryBank(factory){var _this2=this;factory.registerListener({factoryAdded:function factoryAdded(event){event.factory.setDiagramEngine(_this2)},factoryRemoved:function factoryRemoved(event){event.factory.setDiagramEngine(null)}})}},{key:"getActionEventBus",value:function getActionEventBus(){return this.eventBus}},{key:"getLayerFactories",value:function getLayerFactories(){return this.layerFactories}},{key:"getFactoryForLayer",value:function getFactoryForLayer(layer){return"string"==typeof layer?this.layerFactories.getFactory(layer):this.layerFactories.getFactory(layer.getType())}},{key:"setModel",value:function setModel(model){var _this3=this;this.model=model,this.canvas&&requestAnimationFrame((function(){_this3.repaintCanvas()}))}},{key:"getModel",value:function getModel(){return this.model}},{key:"repaintCanvas",value:function repaintCanvas(promise){var _this4=this,repaintDebounceMs=this.options.repaintDebounceMs,repaint=function repaint(){_this4.iterateListeners((function(listener){listener.repaintCanvas&&listener.repaintCanvas()}))},repaintFn=repaint;if(repaintDebounceMs>0&&(repaintFn=(0,lodash.debounce)(repaint,repaintDebounceMs)),promise)return new Promise((function(resolve){var l=_this4.registerListener({rendered:function rendered(){resolve(),l.deregister()}});repaintFn()}));repaintFn()}},{key:"setCanvas",value:function setCanvas(canvas){this.canvas!==canvas&&(this.canvas=canvas,canvas&&this.fireEvent({},"canvasReady"))}},{key:"getCanvas",value:function getCanvas(){return this.canvas}},{key:"getMouseElement",value:function getMouseElement(event){return null}},{key:"zoomToFit",value:function zoomToFit(){var xFactor=this.canvas.clientWidth/this.canvas.scrollWidth,yFactor=this.canvas.clientHeight/this.canvas.scrollHeight,zoomFactor=xFactor<yFactor?xFactor:yFactor;this.model.setZoomLevel(this.model.getZoomLevel()*zoomFactor),this.model.setOffset(0,0),this.repaintCanvas()}}]),CanvasEngine}(BaseObserver);__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.splice.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.reflect.get.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.get-own-property-descriptor.js");function BaseEntity_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function BaseEntity_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function BaseEntity_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(target,property,receiver){var base=_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},_get.apply(this,arguments)}function _superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=BaseEntity_getPrototypeOf(object)););return object}function BaseEntity_setPrototypeOf(o,p){return BaseEntity_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},BaseEntity_setPrototypeOf(o,p)}function BaseEntity_createSuper(Derived){var hasNativeReflectConstruct=function BaseEntity_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=BaseEntity_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=BaseEntity_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return BaseEntity_possibleConstructorReturn(this,result)}}function BaseEntity_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function BaseEntity_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function BaseEntity_getPrototypeOf(o){return BaseEntity_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},BaseEntity_getPrototypeOf(o)}var BaseEntity=function(_BaseObserver){!function BaseEntity_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&BaseEntity_setPrototypeOf(subClass,superClass)}(BaseEntity,_BaseObserver);var _super=BaseEntity_createSuper(BaseEntity);function BaseEntity(){var _this,options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return BaseEntity_classCallCheck(this,BaseEntity),(_this=_super.call(this)).options=Object.assign({id:Toolkit.UID()},options),_this}return function BaseEntity_createClass(Constructor,protoProps,staticProps){return protoProps&&BaseEntity_defineProperties(Constructor.prototype,protoProps),staticProps&&BaseEntity_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(BaseEntity,[{key:"getOptions",value:function getOptions(){return this.options}},{key:"getID",value:function getID(){return this.options.id}},{key:"doClone",value:function doClone(){}},{key:"clone",value:function clone(){var lookupTable=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(lookupTable[this.options.id])return lookupTable[this.options.id];var clone=lodash.cloneDeep(this);return clone.options=Object.assign(Object.assign({},this.options),{id:Toolkit.UID()}),clone.clearListeners(),lookupTable[this.options.id]=clone,this.doClone(lookupTable,clone),clone}},{key:"clearListeners",value:function clearListeners(){this.listeners={}}},{key:"deserialize",value:function deserialize(event){this.options.id=event.data.id,this.options.locked=event.data.locked}},{key:"serialize",value:function serialize(){return{id:this.options.id,locked:this.options.locked}}},{key:"fireEvent",value:function fireEvent(event,k){_get(BaseEntity_getPrototypeOf(BaseEntity.prototype),"fireEvent",this).call(this,Object.assign({entity:this},event),k)}},{key:"isLocked",value:function isLocked(){return this.options.locked}},{key:"setLocked",value:function setLocked(){var locked=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.options.locked=locked,this.fireEvent({locked},"lockChanged")}}]),BaseEntity}(BaseObserver);function CanvasModel_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function CanvasModel_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function CanvasModel_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function CanvasModel_get(){return CanvasModel_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(target,property,receiver){var base=CanvasModel_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},CanvasModel_get.apply(this,arguments)}function CanvasModel_superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=CanvasModel_getPrototypeOf(object)););return object}function CanvasModel_setPrototypeOf(o,p){return CanvasModel_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},CanvasModel_setPrototypeOf(o,p)}function CanvasModel_createSuper(Derived){var hasNativeReflectConstruct=function CanvasModel_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=CanvasModel_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=CanvasModel_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return CanvasModel_possibleConstructorReturn(this,result)}}function CanvasModel_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function CanvasModel_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function CanvasModel_getPrototypeOf(o){return CanvasModel_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},CanvasModel_getPrototypeOf(o)}var CanvasModel=function(_BaseEntity){!function CanvasModel_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&CanvasModel_setPrototypeOf(subClass,superClass)}(CanvasModel,_BaseEntity);var _super=CanvasModel_createSuper(CanvasModel);function CanvasModel(){var _this,options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return CanvasModel_classCallCheck(this,CanvasModel),(_this=_super.call(this,Object.assign({zoom:100,gridSize:0,offsetX:0,offsetY:0},options))).layers=[],_this}return function CanvasModel_createClass(Constructor,protoProps,staticProps){return protoProps&&CanvasModel_defineProperties(Constructor.prototype,protoProps),staticProps&&CanvasModel_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(CanvasModel,[{key:"getSelectionEntities",value:function getSelectionEntities(){return lodash.flatMap(this.layers,(function(layer){return layer.getSelectionEntities()}))}},{key:"getSelectedEntities",value:function getSelectedEntities(){return lodash.filter(this.getSelectionEntities(),(function(ob){return ob.isSelected()}))}},{key:"clearSelection",value:function clearSelection(){lodash.forEach(this.getSelectedEntities(),(function(element){element.setSelected(!1)}))}},{key:"getModels",value:function getModels(){return lodash.flatMap(this.layers,(function(layer){return lodash.values(layer.getModels())}))}},{key:"addLayer",value:function addLayer(layer){layer.setParent(this),layer.registerListener({entityRemoved:function entityRemoved(event){}}),this.layers.push(layer)}},{key:"removeLayer",value:function removeLayer(layer){var index=this.layers.indexOf(layer);return-1!==index&&(this.layers.splice(index,1),!0)}},{key:"getLayers",value:function getLayers(){return this.layers}},{key:"setGridSize",value:function setGridSize(){var size=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.options.gridSize=size,this.fireEvent({size},"gridUpdated")}},{key:"getGridPosition",value:function getGridPosition(pos){return 0===this.options.gridSize?pos:this.options.gridSize*Math.floor((pos+this.options.gridSize/2)/this.options.gridSize)}},{key:"deserializeModel",value:function deserializeModel(data,engine){var models={},promises={},resolvers={},event={data,engine,registerModel:function registerModel(model){models[model.getID()]=model,resolvers[model.getID()]&&resolvers[model.getID()](model)},getModel:function getModel(id){return models[id]?Promise.resolve(models[id]):(promises[id]||(promises[id]=new Promise((function(resolve){resolvers[id]=resolve}))),promises[id])}};this.deserialize(event)}},{key:"deserialize",value:function deserialize(event){var _this2=this;CanvasModel_get(CanvasModel_getPrototypeOf(CanvasModel.prototype),"deserialize",this).call(this,event),this.options.offsetX=event.data.offsetX,this.options.offsetY=event.data.offsetY,this.options.zoom=event.data.zoom,this.options.gridSize=event.data.gridSize,lodash.forEach(event.data.layers,(function(layer){var layerOb=event.engine.getFactoryForLayer(layer.type).generateModel({initialConfig:layer});layerOb.deserialize(Object.assign(Object.assign({},event),{data:layer})),_this2.addLayer(layerOb)}))}},{key:"serialize",value:function serialize(){return Object.assign(Object.assign({},CanvasModel_get(CanvasModel_getPrototypeOf(CanvasModel.prototype),"serialize",this).call(this)),{offsetX:this.options.offsetX,offsetY:this.options.offsetY,zoom:this.options.zoom,gridSize:this.options.gridSize,layers:lodash.map(this.layers,(function(layer){return layer.serialize()}))})}},{key:"setZoomLevel",value:function setZoomLevel(zoom){this.options.zoom=zoom,this.fireEvent({zoom},"zoomUpdated")}},{key:"setOffset",value:function setOffset(offsetX,offsetY){this.options.offsetX=offsetX,this.options.offsetY=offsetY,this.fireEvent({offsetX,offsetY},"offsetUpdated")}},{key:"setOffsetX",value:function setOffsetX(offsetX){this.setOffset(offsetX,this.options.offsetY)}},{key:"setOffsetY",value:function setOffsetY(offsetY){this.setOffset(this.options.offsetX,offsetY)}},{key:"getOffsetY",value:function getOffsetY(){return this.options.offsetY}},{key:"getOffsetX",value:function getOffsetX(){return this.options.offsetX}},{key:"getZoomLevel",value:function getZoomLevel(){return this.options.zoom}}]),CanvasModel}(BaseEntity);function AbstractFactory_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function AbstractFactory_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function AbstractModelFactory_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function AbstractModelFactory_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function AbstractModelFactory_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function AbstractModelFactory_setPrototypeOf(o,p){return AbstractModelFactory_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},AbstractModelFactory_setPrototypeOf(o,p)}function AbstractModelFactory_createSuper(Derived){var hasNativeReflectConstruct=function AbstractModelFactory_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=AbstractModelFactory_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=AbstractModelFactory_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return AbstractModelFactory_possibleConstructorReturn(this,result)}}function AbstractModelFactory_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function AbstractModelFactory_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function AbstractModelFactory_getPrototypeOf(o){return AbstractModelFactory_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},AbstractModelFactory_getPrototypeOf(o)}var AbstractModelFactory=function(_AbstractFactory){!function AbstractModelFactory_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&AbstractModelFactory_setPrototypeOf(subClass,superClass)}(AbstractModelFactory,_AbstractFactory);var _super=AbstractModelFactory_createSuper(AbstractModelFactory);function AbstractModelFactory(){return AbstractModelFactory_classCallCheck(this,AbstractModelFactory),_super.apply(this,arguments)}return function AbstractModelFactory_createClass(Constructor,protoProps,staticProps){return protoProps&&AbstractModelFactory_defineProperties(Constructor.prototype,protoProps),staticProps&&AbstractModelFactory_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(AbstractModelFactory)}(function(){function AbstractFactory(type){!function AbstractFactory_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,AbstractFactory),this.type=type}return function AbstractFactory_createClass(Constructor,protoProps,staticProps){return protoProps&&AbstractFactory_defineProperties(Constructor.prototype,protoProps),staticProps&&AbstractFactory_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(AbstractFactory,[{key:"setDiagramEngine",value:function setDiagramEngine(engine){this.engine=engine}},{key:"setFactoryBank",value:function setFactoryBank(bank){this.bank=bank}},{key:"getType",value:function getType(){return this.type}}]),AbstractFactory}());function AbstractReactFactory_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function AbstractReactFactory_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function AbstractReactFactory_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function AbstractReactFactory_setPrototypeOf(o,p){return AbstractReactFactory_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},AbstractReactFactory_setPrototypeOf(o,p)}function AbstractReactFactory_createSuper(Derived){var hasNativeReflectConstruct=function AbstractReactFactory_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=AbstractReactFactory_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=AbstractReactFactory_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return AbstractReactFactory_possibleConstructorReturn(this,result)}}function AbstractReactFactory_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function AbstractReactFactory_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function AbstractReactFactory_getPrototypeOf(o){return AbstractReactFactory_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},AbstractReactFactory_getPrototypeOf(o)}var AbstractReactFactory=function(_AbstractModelFactory){!function AbstractReactFactory_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&AbstractReactFactory_setPrototypeOf(subClass,superClass)}(AbstractReactFactory,_AbstractModelFactory);var _super=AbstractReactFactory_createSuper(AbstractReactFactory);function AbstractReactFactory(){return AbstractReactFactory_classCallCheck(this,AbstractReactFactory),_super.apply(this,arguments)}return function AbstractReactFactory_createClass(Constructor,protoProps,staticProps){return protoProps&&AbstractReactFactory_defineProperties(Constructor.prototype,protoProps),staticProps&&AbstractReactFactory_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(AbstractReactFactory)}(AbstractModelFactory);function BaseModel_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function BaseModel_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function BaseModel_get(){return BaseModel_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(target,property,receiver){var base=BaseModel_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},BaseModel_get.apply(this,arguments)}function BaseModel_superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=BaseModel_getPrototypeOf(object)););return object}function BaseModel_setPrototypeOf(o,p){return BaseModel_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},BaseModel_setPrototypeOf(o,p)}function BaseModel_createSuper(Derived){var hasNativeReflectConstruct=function BaseModel_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=BaseModel_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=BaseModel_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return BaseModel_possibleConstructorReturn(this,result)}}function BaseModel_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function BaseModel_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function BaseModel_getPrototypeOf(o){return BaseModel_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},BaseModel_getPrototypeOf(o)}var BaseModel=function(_BaseEntity){!function BaseModel_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&BaseModel_setPrototypeOf(subClass,superClass)}(BaseModel,_BaseEntity);var _super=BaseModel_createSuper(BaseModel);function BaseModel(options){return function BaseModel_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BaseModel),_super.call(this,options)}return function BaseModel_createClass(Constructor,protoProps,staticProps){return protoProps&&BaseModel_defineProperties(Constructor.prototype,protoProps),staticProps&&BaseModel_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(BaseModel,[{key:"performanceTune",value:function performanceTune(){return!0}},{key:"getParentCanvasModel",value:function getParentCanvasModel(){return this.parent?this.parent instanceof CanvasModel?this.parent:this.parent instanceof BaseModel?this.parent.getParentCanvasModel():null:null}},{key:"getParent",value:function getParent(){return this.parent}},{key:"setParent",value:function setParent(parent){this.parent=parent}},{key:"getSelectionEntities",value:function getSelectionEntities(){return[this]}},{key:"serialize",value:function serialize(){return Object.assign(Object.assign({},BaseModel_get(BaseModel_getPrototypeOf(BaseModel.prototype),"serialize",this).call(this)),{type:this.options.type,selected:this.options.selected,extras:this.options.extras})}},{key:"deserialize",value:function deserialize(event){BaseModel_get(BaseModel_getPrototypeOf(BaseModel.prototype),"deserialize",this).call(this,event),this.options.extras=event.data.extras,this.options.selected=event.data.selected}},{key:"getType",value:function getType(){return this.options.type}},{key:"isSelected",value:function isSelected(){return this.options.selected}},{key:"isLocked",value:function isLocked(){return!!BaseModel_get(BaseModel_getPrototypeOf(BaseModel.prototype),"isLocked",this).call(this)||!!this.parent&&this.parent.isLocked()}},{key:"setSelected",value:function setSelected(){var selected=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.options.selected!==selected&&(this.options.selected=selected,this.fireEvent({isSelected:selected},"selectionChanged"))}},{key:"remove",value:function remove(){this.fireEvent({},"entityRemoved")}}]),BaseModel}(BaseEntity);function BasePositionModel_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function BasePositionModel_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function BasePositionModel_get(){return BasePositionModel_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(target,property,receiver){var base=BasePositionModel_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},BasePositionModel_get.apply(this,arguments)}function BasePositionModel_superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=BasePositionModel_getPrototypeOf(object)););return object}function BasePositionModel_setPrototypeOf(o,p){return BasePositionModel_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},BasePositionModel_setPrototypeOf(o,p)}function BasePositionModel_createSuper(Derived){var hasNativeReflectConstruct=function BasePositionModel_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=BasePositionModel_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=BasePositionModel_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return BasePositionModel_possibleConstructorReturn(this,result)}}function BasePositionModel_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function BasePositionModel_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function BasePositionModel_getPrototypeOf(o){return BasePositionModel_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},BasePositionModel_getPrototypeOf(o)}var _templateObject,_templateObject2,_templateObject3,S,BasePositionModel=function(_BaseModel){!function BasePositionModel_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&BasePositionModel_setPrototypeOf(subClass,superClass)}(BasePositionModel,_BaseModel);var _super=BasePositionModel_createSuper(BasePositionModel);function BasePositionModel(options){var _this;return function BasePositionModel_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BasePositionModel),(_this=_super.call(this,options)).position=options.position||new dist.E9(0,0),_this}return function BasePositionModel_createClass(Constructor,protoProps,staticProps){return protoProps&&BasePositionModel_defineProperties(Constructor.prototype,protoProps),staticProps&&BasePositionModel_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(BasePositionModel,[{key:"setPosition",value:function setPosition(x,y){x instanceof dist.E9?this.position=x:this.position=new dist.E9(x,y),this.fireEvent({},"positionChanged")}},{key:"getBoundingBox",value:function getBoundingBox(){return dist.Ae.fromPointAndSize(this.position,0,0)}},{key:"deserialize",value:function deserialize(event){BasePositionModel_get(BasePositionModel_getPrototypeOf(BasePositionModel.prototype),"deserialize",this).call(this,event),this.position=new dist.E9(event.data.x,event.data.y)}},{key:"serialize",value:function serialize(){return Object.assign(Object.assign({},BasePositionModel_get(BasePositionModel_getPrototypeOf(BasePositionModel.prototype),"serialize",this).call(this)),{x:this.position.x,y:this.position.y})}},{key:"getPosition",value:function getPosition(){return this.position}},{key:"getX",value:function getX(){return this.position.x}},{key:"getY",value:function getY(){return this.position.y}}]),BasePositionModel}(BaseModel),react=(__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.map.js"),__webpack_require__("../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js")),emotion_styled_browser_esm=__webpack_require__("../node_modules/.pnpm/@emotion+styled@11.10.5_jrh5enlbqfbnumycmktdqgd6se/node_modules/@emotion/styled/dist/emotion-styled.browser.esm.js"),emotion_react_browser_esm=__webpack_require__("../node_modules/.pnpm/@emotion+react@11.10.5_3stiutgnnbnfnf3uowm5cip22i/node_modules/@emotion/react/dist/emotion-react.browser.esm.js");function TransformLayerWidget_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function TransformLayerWidget_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function TransformLayerWidget_setPrototypeOf(o,p){return TransformLayerWidget_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},TransformLayerWidget_setPrototypeOf(o,p)}function TransformLayerWidget_createSuper(Derived){var hasNativeReflectConstruct=function TransformLayerWidget_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=TransformLayerWidget_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=TransformLayerWidget_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return TransformLayerWidget_possibleConstructorReturn(this,result)}}function TransformLayerWidget_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function TransformLayerWidget_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function TransformLayerWidget_getPrototypeOf(o){return TransformLayerWidget_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},TransformLayerWidget_getPrototypeOf(o)}function _taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}!function(S){var shared=(0,emotion_react_browser_esm.iv)(_templateObject||(_templateObject=_taggedTemplateLiteralLoose(["\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tbottom: 0;\n\t\tposition: absolute;\n\t\tpointer-events: none;\n\t\ttransform-origin: 0 0;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\toverflow: visible;\n\t"])));S.DivLayer=emotion_styled_browser_esm.Z.div(_templateObject2||(_templateObject2=_taggedTemplateLiteralLoose(["\n\t\t","\n\t"])),shared),S.SvgLayer=emotion_styled_browser_esm.Z.svg(_templateObject3||(_templateObject3=_taggedTemplateLiteralLoose(["\n\t\t","\n\t"])),shared)}(S||(S={}));var TransformLayerWidget=function(_React$Component){!function TransformLayerWidget_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&TransformLayerWidget_setPrototypeOf(subClass,superClass)}(TransformLayerWidget,_React$Component);var _super=TransformLayerWidget_createSuper(TransformLayerWidget);function TransformLayerWidget(props){var _this;return function TransformLayerWidget_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TransformLayerWidget),(_this=_super.call(this,props)).state={},_this}return function TransformLayerWidget_createClass(Constructor,protoProps,staticProps){return protoProps&&TransformLayerWidget_defineProperties(Constructor.prototype,protoProps),staticProps&&TransformLayerWidget_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(TransformLayerWidget,[{key:"getTransform",value:function getTransform(){var model=this.props.layer.getParent();return"\n\t\t\ttranslate(\n\t\t\t\t"+model.getOffsetX()+"px,\n\t\t\t\t"+model.getOffsetY()+"px)\n\t\t\tscale(\n\t\t\t\t"+model.getZoomLevel()/100+"\n\t\t\t)\n  \t"}},{key:"getTransformStyle",value:function getTransformStyle(){return this.props.layer.getOptions().transformed?{transform:this.getTransform()}:{}}},{key:"render",value:function render(){return this.props.layer.getOptions().isSvg?react.createElement(S.SvgLayer,{style:this.getTransformStyle()},this.props.children):react.createElement(S.DivLayer,{style:this.getTransformStyle()},this.props.children)}}]),TransformLayerWidget}(react.Component);function SmartLayerWidget_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function SmartLayerWidget_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function SmartLayerWidget_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function SmartLayerWidget_setPrototypeOf(o,p){return SmartLayerWidget_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},SmartLayerWidget_setPrototypeOf(o,p)}function SmartLayerWidget_createSuper(Derived){var hasNativeReflectConstruct=function SmartLayerWidget_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=SmartLayerWidget_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=SmartLayerWidget_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return SmartLayerWidget_possibleConstructorReturn(this,result)}}function SmartLayerWidget_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function SmartLayerWidget_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function SmartLayerWidget_getPrototypeOf(o){return SmartLayerWidget_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},SmartLayerWidget_getPrototypeOf(o)}var CanvasWidget_templateObject,CanvasWidget_S,SmartLayerWidget=function(_React$Component){!function SmartLayerWidget_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&SmartLayerWidget_setPrototypeOf(subClass,superClass)}(SmartLayerWidget,_React$Component);var _super=SmartLayerWidget_createSuper(SmartLayerWidget);function SmartLayerWidget(){return SmartLayerWidget_classCallCheck(this,SmartLayerWidget),_super.apply(this,arguments)}return function SmartLayerWidget_createClass(Constructor,protoProps,staticProps){return protoProps&&SmartLayerWidget_defineProperties(Constructor.prototype,protoProps),staticProps&&SmartLayerWidget_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(SmartLayerWidget,[{key:"shouldComponentUpdate",value:function shouldComponentUpdate(){return this.props.layer.isRepaintEnabled()}},{key:"render",value:function render(){return this.props.engine.getFactoryForLayer(this.props.layer).generateReactWidget({model:this.props.layer})}}]),SmartLayerWidget}(react.Component);function CanvasWidget_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function CanvasWidget_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function CanvasWidget_setPrototypeOf(o,p){return CanvasWidget_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},CanvasWidget_setPrototypeOf(o,p)}function CanvasWidget_createSuper(Derived){var hasNativeReflectConstruct=function CanvasWidget_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=CanvasWidget_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=CanvasWidget_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return CanvasWidget_possibleConstructorReturn(this,result)}}function CanvasWidget_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function CanvasWidget_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function CanvasWidget_getPrototypeOf(o){return CanvasWidget_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},CanvasWidget_getPrototypeOf(o)}!function(S){S.Canvas=emotion_styled_browser_esm.Z.div(CanvasWidget_templateObject||(CanvasWidget_templateObject=function CanvasWidget_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n\t\tposition: relative;\n\t\tcursor: move;\n\t\toverflow: hidden;\n\t"])))}(CanvasWidget_S||(CanvasWidget_S={}));var CanvasWidget=function(_React$Component){!function CanvasWidget_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&CanvasWidget_setPrototypeOf(subClass,superClass)}(CanvasWidget,_React$Component);var _super=CanvasWidget_createSuper(CanvasWidget);function CanvasWidget(props){var _this;return function CanvasWidget_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CanvasWidget),(_this=_super.call(this,props)).ref=react.createRef(),_this.state={action:null,diagramEngineListener:null},_this}return function CanvasWidget_createClass(Constructor,protoProps,staticProps){return protoProps&&CanvasWidget_defineProperties(Constructor.prototype,protoProps),staticProps&&CanvasWidget_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(CanvasWidget,[{key:"componentWillUnmount",value:function componentWillUnmount(){this.props.engine.deregisterListener(this.canvasListener),this.props.engine.setCanvas(null),document.removeEventListener("keyup",this.keyUp),document.removeEventListener("keydown",this.keyDown)}},{key:"registerCanvas",value:function registerCanvas(){this.props.engine.setCanvas(this.ref.current),this.props.engine.iterateListeners((function(list){list.rendered&&list.rendered()}))}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.registerCanvas()}},{key:"componentDidMount",value:function componentDidMount(){var _this2=this;this.canvasListener=this.props.engine.registerListener({repaintCanvas:function repaintCanvas(){_this2.forceUpdate()}}),this.keyDown=function(event){_this2.props.engine.getActionEventBus().fireAction({event})},this.keyUp=function(event){_this2.props.engine.getActionEventBus().fireAction({event})},document.addEventListener("keyup",this.keyUp),document.addEventListener("keydown",this.keyDown),this.registerCanvas()}},{key:"render",value:function render(){var _this3=this,model=this.props.engine.getModel();return react.createElement(CanvasWidget_S.Canvas,{className:this.props.className,ref:this.ref,onWheel:function onWheel(event){_this3.props.engine.getActionEventBus().fireAction({event})},onMouseDown:function onMouseDown(event){_this3.props.engine.getActionEventBus().fireAction({event})},onMouseUp:function onMouseUp(event){_this3.props.engine.getActionEventBus().fireAction({event})},onMouseMove:function onMouseMove(event){_this3.props.engine.getActionEventBus().fireAction({event})},onTouchStart:function onTouchStart(event){_this3.props.engine.getActionEventBus().fireAction({event})},onTouchEnd:function onTouchEnd(event){_this3.props.engine.getActionEventBus().fireAction({event})},onTouchMove:function onTouchMove(event){_this3.props.engine.getActionEventBus().fireAction({event})}},model.getLayers().map((function(layer){return react.createElement(TransformLayerWidget,{layer,key:layer.getID()},react.createElement(SmartLayerWidget,{layer,engine:_this3.props.engine,key:layer.getID()}))})))}}]),CanvasWidget}(react.Component);function LayerModel_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function LayerModel_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function LayerModel_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function LayerModel_get(){return LayerModel_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(target,property,receiver){var base=LayerModel_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},LayerModel_get.apply(this,arguments)}function LayerModel_superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=LayerModel_getPrototypeOf(object)););return object}function LayerModel_setPrototypeOf(o,p){return LayerModel_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},LayerModel_setPrototypeOf(o,p)}function LayerModel_createSuper(Derived){var hasNativeReflectConstruct=function LayerModel_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=LayerModel_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=LayerModel_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return LayerModel_possibleConstructorReturn(this,result)}}function LayerModel_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function LayerModel_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function LayerModel_getPrototypeOf(o){return LayerModel_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},LayerModel_getPrototypeOf(o)}var LayerModel=function(_BaseModel){!function LayerModel_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&LayerModel_setPrototypeOf(subClass,superClass)}(LayerModel,_BaseModel);var _super=LayerModel_createSuper(LayerModel);function LayerModel(){var _this,options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return LayerModel_classCallCheck(this,LayerModel),(_this=_super.call(this,options)).models={},_this.repaintEnabled=!0,_this}return function LayerModel_createClass(Constructor,protoProps,staticProps){return protoProps&&LayerModel_defineProperties(Constructor.prototype,protoProps),staticProps&&LayerModel_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(LayerModel,[{key:"deserialize",value:function deserialize(event){var _this2=this;LayerModel_get(LayerModel_getPrototypeOf(LayerModel.prototype),"deserialize",this).call(this,event),this.options.isSvg=!!event.data.isSvg,this.options.transformed=!!event.data.transformed,lodash.forEach(event.data.models,(function(model){var modelOb=_this2.getChildModelFactoryBank(event.engine).getFactory(model.type).generateModel({initialConfig:model});modelOb.deserialize(Object.assign(Object.assign({},event),{data:model})),_this2.addModel(modelOb)}))}},{key:"serialize",value:function serialize(){return Object.assign(Object.assign({},LayerModel_get(LayerModel_getPrototypeOf(LayerModel.prototype),"serialize",this).call(this)),{isSvg:this.options.isSvg,transformed:this.options.transformed,models:lodash.mapValues(this.models,(function(model){return model.serialize()}))})}},{key:"isRepaintEnabled",value:function isRepaintEnabled(){return this.repaintEnabled}},{key:"allowRepaint",value:function allowRepaint(){var allow=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.repaintEnabled=allow}},{key:"remove",value:function remove(){this.parent&&this.parent.removeLayer(this),LayerModel_get(LayerModel_getPrototypeOf(LayerModel.prototype),"remove",this).call(this)}},{key:"addModel",value:function addModel(model){model.setParent(this),this.models[model.getID()]=model}},{key:"getSelectionEntities",value:function getSelectionEntities(){return lodash.flatMap(this.models,(function(model){return model.getSelectionEntities()}))}},{key:"getModels",value:function getModels(){return this.models}},{key:"getModel",value:function getModel(id){return this.models[id]}},{key:"removeModel",value:function removeModel(id){var _id="string"==typeof id?id:id.getID();return!!this.models[_id]&&(delete this.models[_id],!0)}}]),LayerModel}(BaseModel);function SelectionLayerModel_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function SelectionLayerModel_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function SelectionLayerModel_setPrototypeOf(o,p){return SelectionLayerModel_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},SelectionLayerModel_setPrototypeOf(o,p)}function SelectionLayerModel_createSuper(Derived){var hasNativeReflectConstruct=function SelectionLayerModel_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=SelectionLayerModel_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=SelectionLayerModel_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return SelectionLayerModel_possibleConstructorReturn(this,result)}}function SelectionLayerModel_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function SelectionLayerModel_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function SelectionLayerModel_getPrototypeOf(o){return SelectionLayerModel_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},SelectionLayerModel_getPrototypeOf(o)}var SelectionBoxWidget_templateObject,SelectionBoxWidget_S,SelectionLayerModel=function(_LayerModel){!function SelectionLayerModel_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&SelectionLayerModel_setPrototypeOf(subClass,superClass)}(SelectionLayerModel,_LayerModel);var _super=SelectionLayerModel_createSuper(SelectionLayerModel);function SelectionLayerModel(){return function SelectionLayerModel_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SelectionLayerModel),_super.call(this,{transformed:!1,isSvg:!1,type:"selection"})}return function SelectionLayerModel_createClass(Constructor,protoProps,staticProps){return protoProps&&SelectionLayerModel_defineProperties(Constructor.prototype,protoProps),staticProps&&SelectionLayerModel_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(SelectionLayerModel,[{key:"setBox",value:function setBox(rect){this.box=rect}},{key:"getChildModelFactoryBank",value:function getChildModelFactoryBank(){return null}}]),SelectionLayerModel}(LayerModel);function SelectionBoxWidget_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function SelectionBoxWidget_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function SelectionBoxWidget_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function SelectionBoxWidget_setPrototypeOf(o,p){return SelectionBoxWidget_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},SelectionBoxWidget_setPrototypeOf(o,p)}function SelectionBoxWidget_createSuper(Derived){var hasNativeReflectConstruct=function SelectionBoxWidget_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=SelectionBoxWidget_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=SelectionBoxWidget_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return SelectionBoxWidget_possibleConstructorReturn(this,result)}}function SelectionBoxWidget_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function SelectionBoxWidget_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function SelectionBoxWidget_getPrototypeOf(o){return SelectionBoxWidget_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},SelectionBoxWidget_getPrototypeOf(o)}!function(S){S.Container=emotion_styled_browser_esm.Z.div(SelectionBoxWidget_templateObject||(SelectionBoxWidget_templateObject=function SelectionBoxWidget_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n\t\tposition: absolute;\n\t\tbackground-color: rgba(0, 192, 255, 0.2);\n\t\tborder: solid 2px rgb(0, 192, 255);\n\t"])))}(SelectionBoxWidget_S||(SelectionBoxWidget_S={}));var SelectionBoxWidget=function(_React$Component){!function SelectionBoxWidget_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&SelectionBoxWidget_setPrototypeOf(subClass,superClass)}(SelectionBoxWidget,_React$Component);var _super=SelectionBoxWidget_createSuper(SelectionBoxWidget);function SelectionBoxWidget(){return SelectionBoxWidget_classCallCheck(this,SelectionBoxWidget),_super.apply(this,arguments)}return function SelectionBoxWidget_createClass(Constructor,protoProps,staticProps){return protoProps&&SelectionBoxWidget_defineProperties(Constructor.prototype,protoProps),staticProps&&SelectionBoxWidget_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(SelectionBoxWidget,[{key:"render",value:function render(){var rect=this.props.rect;return rect?react.createElement(SelectionBoxWidget_S.Container,{style:{top:rect.top,left:rect.left,width:rect.width,height:rect.height}}):null}}]),SelectionBoxWidget}(react.Component);function SelectionBoxLayerFactory_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function SelectionBoxLayerFactory_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function SelectionBoxLayerFactory_setPrototypeOf(o,p){return SelectionBoxLayerFactory_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},SelectionBoxLayerFactory_setPrototypeOf(o,p)}function SelectionBoxLayerFactory_createSuper(Derived){var hasNativeReflectConstruct=function SelectionBoxLayerFactory_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=SelectionBoxLayerFactory_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=SelectionBoxLayerFactory_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return SelectionBoxLayerFactory_possibleConstructorReturn(this,result)}}function SelectionBoxLayerFactory_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function SelectionBoxLayerFactory_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function SelectionBoxLayerFactory_getPrototypeOf(o){return SelectionBoxLayerFactory_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},SelectionBoxLayerFactory_getPrototypeOf(o)}var SelectionBoxLayerFactory=function(_AbstractReactFactory){!function SelectionBoxLayerFactory_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&SelectionBoxLayerFactory_setPrototypeOf(subClass,superClass)}(SelectionBoxLayerFactory,_AbstractReactFactory);var _super=SelectionBoxLayerFactory_createSuper(SelectionBoxLayerFactory);function SelectionBoxLayerFactory(){return function SelectionBoxLayerFactory_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SelectionBoxLayerFactory),_super.call(this,"selection")}return function SelectionBoxLayerFactory_createClass(Constructor,protoProps,staticProps){return protoProps&&SelectionBoxLayerFactory_defineProperties(Constructor.prototype,protoProps),staticProps&&SelectionBoxLayerFactory_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(SelectionBoxLayerFactory,[{key:"generateModel",value:function generateModel(event){return new SelectionLayerModel}},{key:"generateReactWidget",value:function generateReactWidget(event){return react.createElement(SelectionBoxWidget,{rect:event.model.box})}}]),SelectionBoxLayerFactory}(AbstractReactFactory);function PeformanceWidget_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function PeformanceWidget_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function PeformanceWidget_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function PeformanceWidget_setPrototypeOf(o,p){return PeformanceWidget_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},PeformanceWidget_setPrototypeOf(o,p)}function PeformanceWidget_createSuper(Derived){var hasNativeReflectConstruct=function PeformanceWidget_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=PeformanceWidget_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=PeformanceWidget_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return PeformanceWidget_possibleConstructorReturn(this,result)}}function PeformanceWidget_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function PeformanceWidget_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function PeformanceWidget_getPrototypeOf(o){return PeformanceWidget_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},PeformanceWidget_getPrototypeOf(o)}var PeformanceWidget=function(_React$Component){!function PeformanceWidget_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&PeformanceWidget_setPrototypeOf(subClass,superClass)}(PeformanceWidget,_React$Component);var _super=PeformanceWidget_createSuper(PeformanceWidget);function PeformanceWidget(){return PeformanceWidget_classCallCheck(this,PeformanceWidget),_super.apply(this,arguments)}return function PeformanceWidget_createClass(Constructor,protoProps,staticProps){return protoProps&&PeformanceWidget_defineProperties(Constructor.prototype,protoProps),staticProps&&PeformanceWidget_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(PeformanceWidget,[{key:"shouldComponentUpdate",value:function shouldComponentUpdate(nextProps,nextState,nextContext){return!this.props.model.performanceTune()||(this.props.model!==nextProps.model||!lodash.isEqual(this.props.serialized,nextProps.serialized))}},{key:"render",value:function render(){return this.props.children()}}]),PeformanceWidget}(react.Component);function State_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function State_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return State_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return State_arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function State_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function State_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function State_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}var State_State=function(){function State(options){!function State_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,State),this.actions=[],this.keys=[],this.childStates=[],this.options=options}return function State_createClass(Constructor,protoProps,staticProps){return protoProps&&State_defineProperties(Constructor.prototype,protoProps),staticProps&&State_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(State,[{key:"setEngine",value:function setEngine(engine){this.engine=engine}},{key:"getOptions",value:function getOptions(){return this.options}},{key:"eject",value:function eject(){this.engine.getStateMachine().popState()}},{key:"transitionWithEvent",value:function transitionWithEvent(state,event){this.engine.getStateMachine().pushState(state),this.engine.getActionEventBus().fireAction(event)}},{key:"registerAction",value:function registerAction(action){this.actions.push(action)}},{key:"tryActivateParentState",value:function tryActivateParentState(keys){return this.keys.length>0&&!this.isKeysFullfilled(keys)&&(this.eject(),!0)}},{key:"tryActivateChildState",value:function tryActivateChildState(keys){var state=this.findStateToActivate(keys);return!!state&&(this.engine.getStateMachine().pushState(state),!0)}},{key:"findStateToActivate",value:function findStateToActivate(keys){var _step,_iterator=State_createForOfIteratorHelper(this.childStates);try{for(_iterator.s();!(_step=_iterator.n()).done;){var child=_step.value;if(child.isKeysFullfilled(keys))return child}}catch(err){_iterator.e(err)}finally{_iterator.f()}return null}},{key:"isKeysFullfilled",value:function isKeysFullfilled(keys){return lodash.intersection(this.keys,keys).length===this.keys.length}},{key:"activated",value:function activated(previous){var _this=this,keys=this.engine.getActionEventBus().getKeys();if(!this.tryActivateParentState(keys)&&!this.tryActivateChildState(keys)){this.handler1=this.engine.getActionEventBus().registerAction(new Action_Action({type:Action_InputType.KEY_DOWN,fire:function fire(){_this.tryActivateChildState(_this.engine.getActionEventBus().getKeys())}})),this.handler2=this.engine.getActionEventBus().registerAction(new Action_Action({type:Action_InputType.KEY_UP,fire:function fire(){_this.tryActivateParentState(_this.engine.getActionEventBus().getKeys())}}));var _step2,_iterator2=State_createForOfIteratorHelper(this.actions);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var action=_step2.value;this.engine.getActionEventBus().registerAction(action)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}}},{key:"deactivated",value:function deactivated(next){this.handler1&&this.handler1(),this.handler2&&this.handler2();var _step3,_iterator3=State_createForOfIteratorHelper(this.actions);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var action=_step3.value;this.engine.getActionEventBus().deregisterAction(action)}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}}}]),State}();function AbstractDisplacementState_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function AbstractDisplacementState_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function AbstractDisplacementState_setPrototypeOf(o,p){return AbstractDisplacementState_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},AbstractDisplacementState_setPrototypeOf(o,p)}function AbstractDisplacementState_createSuper(Derived){var hasNativeReflectConstruct=function AbstractDisplacementState_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=AbstractDisplacementState_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=AbstractDisplacementState_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return AbstractDisplacementState_possibleConstructorReturn(this,result)}}function AbstractDisplacementState_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function AbstractDisplacementState_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function AbstractDisplacementState_getPrototypeOf(o){return AbstractDisplacementState_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},AbstractDisplacementState_getPrototypeOf(o)}var AbstractDisplacementState=function(_State){!function AbstractDisplacementState_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&AbstractDisplacementState_setPrototypeOf(subClass,superClass)}(AbstractDisplacementState,_State);var _super=AbstractDisplacementState_createSuper(AbstractDisplacementState);function AbstractDisplacementState(options){var _this;return function AbstractDisplacementState_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,AbstractDisplacementState),(_this=_super.call(this,options)).registerAction(new Action_Action({type:Action_InputType.MOUSE_DOWN,fire:function fire(actionEvent){var _actionEvent$event=actionEvent.event,clientX=_actionEvent$event.clientX,clientY=_actionEvent$event.clientY;_this.handleMoveStart(clientX,clientY)}})),_this.registerAction(new Action_Action({type:Action_InputType.MOUSE_MOVE,fire:function fire(actionEvent){var event=actionEvent.event;if(0!==event.buttons){var clientX=event.clientX,clientY=event.clientY;_this.handleMove(clientX,clientY,event)}else _this.eject()}})),_this.registerAction(new Action_Action({type:Action_InputType.MOUSE_UP,fire:function fire(){return _this.handleMoveEnd()}})),_this.registerAction(new Action_Action({type:Action_InputType.TOUCH_START,fire:function fire(actionEvent){var _actionEvent$event$to=actionEvent.event.touches[0],clientX=_actionEvent$event$to.clientX,clientY=_actionEvent$event$to.clientY;_this.handleMoveStart(clientX,clientY)}})),_this.registerAction(new Action_Action({type:Action_InputType.TOUCH_MOVE,fire:function fire(actionEvent){var event=actionEvent.event,_event$touches$=event.touches[0],clientX=_event$touches$.clientX,clientY=_event$touches$.clientY;_this.handleMove(clientX,clientY,event)}})),_this.registerAction(new Action_Action({type:Action_InputType.TOUCH_END,fire:function fire(){return _this.handleMoveEnd()}})),_this}return function AbstractDisplacementState_createClass(Constructor,protoProps,staticProps){return protoProps&&AbstractDisplacementState_defineProperties(Constructor.prototype,protoProps),staticProps&&AbstractDisplacementState_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(AbstractDisplacementState,[{key:"handleMoveStart",value:function handleMoveStart(x,y){this.initialX=x,this.initialY=y;var rel=this.engine.getRelativePoint(x,y);this.initialXRelative=rel.x,this.initialYRelative=rel.y}},{key:"handleMove",value:function handleMove(x,y,event){this.fireMouseMoved({displacementX:x-this.initialX,displacementY:y-this.initialY,virtualDisplacementX:(x-this.initialX)/(this.engine.getModel().getZoomLevel()/100),virtualDisplacementY:(y-this.initialY)/(this.engine.getModel().getZoomLevel()/100),event})}},{key:"handleMoveEnd",value:function handleMoveEnd(){this.eject()}}]),AbstractDisplacementState}(State_State);__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.symbol.async-iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.symbol.to-string-tag.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.math.to-string-tag.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.json.to-string-tag.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.reverse.js");function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName,nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function DragCanvasState_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function DragCanvasState_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return DragCanvasState_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DragCanvasState_arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function DragCanvasState_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function DragCanvasState_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function DragCanvasState_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function DragCanvasState_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function DragCanvasState_get(){return DragCanvasState_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(target,property,receiver){var base=DragCanvasState_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},DragCanvasState_get.apply(this,arguments)}function DragCanvasState_superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=DragCanvasState_getPrototypeOf(object)););return object}function DragCanvasState_setPrototypeOf(o,p){return DragCanvasState_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},DragCanvasState_setPrototypeOf(o,p)}function DragCanvasState_createSuper(Derived){var hasNativeReflectConstruct=function DragCanvasState_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=DragCanvasState_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DragCanvasState_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DragCanvasState_possibleConstructorReturn(this,result)}}function DragCanvasState_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function DragCanvasState_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function DragCanvasState_getPrototypeOf(o){return DragCanvasState_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},DragCanvasState_getPrototypeOf(o)}var __awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},DragCanvasState_DragCanvasState=function(_AbstractDisplacement){!function DragCanvasState_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DragCanvasState_setPrototypeOf(subClass,superClass)}(DragCanvasState,_AbstractDisplacement);var _super2=DragCanvasState_createSuper(DragCanvasState);function DragCanvasState(){var _this,options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return DragCanvasState_classCallCheck(this,DragCanvasState),(_this=_super2.call(this,{name:"drag-canvas"})).config=Object.assign({allowDrag:!0},options),_this}return function DragCanvasState_createClass(Constructor,protoProps,staticProps){return protoProps&&DragCanvasState_defineProperties(Constructor.prototype,protoProps),staticProps&&DragCanvasState_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DragCanvasState,[{key:"activated",value:function activated(prev){var _this2=this,_super=Object.create(null,{activated:{get:function get(){return DragCanvasState_get(DragCanvasState_getPrototypeOf(DragCanvasState.prototype),"activated",_this2)}}});return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark((function _callee(){var _iterator,_step;return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _super.activated.call(this,prev),this.engine.getModel().clearSelection(),_context.next=4,this.engine.repaintCanvas(!0);case 4:_iterator=DragCanvasState_createForOfIteratorHelper(this.engine.getModel().getLayers());try{for(_iterator.s();!(_step=_iterator.n()).done;)_step.value.allowRepaint(!1)}catch(err){_iterator.e(err)}finally{_iterator.f()}this.initialCanvasX=this.engine.getModel().getOffsetX(),this.initialCanvasY=this.engine.getModel().getOffsetY();case 8:case"end":return _context.stop()}}),_callee,this)})))}},{key:"deactivated",value:function deactivated(next){DragCanvasState_get(DragCanvasState_getPrototypeOf(DragCanvasState.prototype),"deactivated",this).call(this,next);var _step2,_iterator2=DragCanvasState_createForOfIteratorHelper(this.engine.getModel().getLayers());try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){_step2.value.allowRepaint(!0)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}},{key:"fireMouseMoved",value:function fireMouseMoved(event){this.config.allowDrag&&(this.engine.getModel().setOffset(this.initialCanvasX+event.displacementX,this.initialCanvasY+event.displacementY),this.engine.repaintCanvas())}}]),DragCanvasState}(AbstractDisplacementState);function SelectionBoxState_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function SelectionBoxState_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return SelectionBoxState_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SelectionBoxState_arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function SelectionBoxState_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function SelectionBoxState_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function SelectionBoxState_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function SelectionBoxState_get(){return SelectionBoxState_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(target,property,receiver){var base=SelectionBoxState_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},SelectionBoxState_get.apply(this,arguments)}function SelectionBoxState_superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=SelectionBoxState_getPrototypeOf(object)););return object}function SelectionBoxState_setPrototypeOf(o,p){return SelectionBoxState_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},SelectionBoxState_setPrototypeOf(o,p)}function SelectionBoxState_createSuper(Derived){var hasNativeReflectConstruct=function SelectionBoxState_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=SelectionBoxState_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=SelectionBoxState_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return SelectionBoxState_possibleConstructorReturn(this,result)}}function SelectionBoxState_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function SelectionBoxState_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function SelectionBoxState_getPrototypeOf(o){return SelectionBoxState_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},SelectionBoxState_getPrototypeOf(o)}var SelectionBoxState=function(_AbstractDisplacement){!function SelectionBoxState_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&SelectionBoxState_setPrototypeOf(subClass,superClass)}(SelectionBoxState,_AbstractDisplacement);var _super=SelectionBoxState_createSuper(SelectionBoxState);function SelectionBoxState(){return function SelectionBoxState_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SelectionBoxState),_super.call(this,{name:"selection-box"})}return function SelectionBoxState_createClass(Constructor,protoProps,staticProps){return protoProps&&SelectionBoxState_defineProperties(Constructor.prototype,protoProps),staticProps&&SelectionBoxState_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(SelectionBoxState,[{key:"activated",value:function activated(previous){SelectionBoxState_get(SelectionBoxState_getPrototypeOf(SelectionBoxState.prototype),"activated",this).call(this,previous),this.layer=new SelectionLayerModel,this.engine.getModel().addLayer(this.layer)}},{key:"deactivated",value:function deactivated(next){SelectionBoxState_get(SelectionBoxState_getPrototypeOf(SelectionBoxState.prototype),"deactivated",this).call(this,next),this.layer.remove(),this.engine.repaintCanvas()}},{key:"getBoxDimensions",value:function getBoxDimensions(event){var rel;if("touches"in event.event){var touch=event.event.touches[0];rel=this.engine.getRelativePoint(touch.clientX,touch.clientY)}else rel=this.engine.getRelativePoint(event.event.clientX,event.event.clientY);return{left:rel.x>this.initialXRelative?this.initialXRelative:rel.x,top:rel.y>this.initialYRelative?this.initialYRelative:rel.y,width:Math.abs(rel.x-this.initialXRelative),height:Math.abs(rel.y-this.initialYRelative),right:rel.x<this.initialXRelative?this.initialXRelative:rel.x,bottom:rel.y<this.initialYRelative?this.initialYRelative:rel.y}}},{key:"fireMouseMoved",value:function fireMouseMoved(event){this.layer.setBox(this.getBoxDimensions(event));var relative=this.engine.getRelativeMousePoint({clientX:this.initialX,clientY:this.initialY});event.virtualDisplacementX<0&&(relative.x-=Math.abs(event.virtualDisplacementX)),event.virtualDisplacementY<0&&(relative.y-=Math.abs(event.virtualDisplacementY));var _step,rect=dist.Ae.fromPointAndSize(relative,Math.abs(event.virtualDisplacementX),Math.abs(event.virtualDisplacementY)),_iterator=SelectionBoxState_createForOfIteratorHelper(this.engine.getModel().getSelectionEntities());try{for(_iterator.s();!(_step=_iterator.n()).done;){var model=_step.value;if(model.getBoundingBox){var bounds=model.getBoundingBox();rect.containsPoint(bounds.getTopLeft())&&rect.containsPoint(bounds.getBottomRight())?model.setSelected(!0):model.setSelected(!1)}}}catch(err){_iterator.e(err)}finally{_iterator.f()}this.engine.repaintCanvas()}}]),SelectionBoxState}(AbstractDisplacementState);function SelectingState_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function SelectingState_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function SelectingState_setPrototypeOf(o,p){return SelectingState_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},SelectingState_setPrototypeOf(o,p)}function SelectingState_createSuper(Derived){var hasNativeReflectConstruct=function SelectingState_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=SelectingState_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=SelectingState_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return SelectingState_possibleConstructorReturn(this,result)}}function SelectingState_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function SelectingState_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function SelectingState_getPrototypeOf(o){return SelectingState_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},SelectingState_getPrototypeOf(o)}var SelectingState_SelectingState=function(_State){!function SelectingState_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&SelectingState_setPrototypeOf(subClass,superClass)}(SelectingState,_State);var _super=SelectingState_createSuper(SelectingState);function SelectingState(){var _this;return function SelectingState_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SelectingState),(_this=_super.call(this,{name:"selecting"})).keys=["shift"],_this.registerAction(new Action_Action({type:Action_InputType.MOUSE_DOWN,fire:function fire(event){var element=_this.engine.getActionEventBus().getModelForEvent(event);element?(element.setSelected(!0),_this.engine.repaintCanvas()):_this.transitionWithEvent(new SelectionBoxState,event)}})),_this}return function SelectingState_createClass(Constructor,protoProps,staticProps){return protoProps&&SelectingState_defineProperties(Constructor.prototype,protoProps),staticProps&&SelectingState_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(SelectingState)}(State_State);function MoveItemsState_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function MoveItemsState_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return MoveItemsState_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return MoveItemsState_arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function MoveItemsState_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function MoveItemsState_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function MoveItemsState_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function MoveItemsState_get(){return MoveItemsState_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(target,property,receiver){var base=MoveItemsState_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},MoveItemsState_get.apply(this,arguments)}function MoveItemsState_superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=MoveItemsState_getPrototypeOf(object)););return object}function MoveItemsState_setPrototypeOf(o,p){return MoveItemsState_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},MoveItemsState_setPrototypeOf(o,p)}function MoveItemsState_createSuper(Derived){var hasNativeReflectConstruct=function MoveItemsState_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=MoveItemsState_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=MoveItemsState_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return MoveItemsState_possibleConstructorReturn(this,result)}}function MoveItemsState_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function MoveItemsState_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function MoveItemsState_getPrototypeOf(o){return MoveItemsState_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},MoveItemsState_getPrototypeOf(o)}var MoveItemsState_MoveItemsState=function(_AbstractDisplacement){!function MoveItemsState_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&MoveItemsState_setPrototypeOf(subClass,superClass)}(MoveItemsState,_AbstractDisplacement);var _super=MoveItemsState_createSuper(MoveItemsState);function MoveItemsState(){var _this;return function MoveItemsState_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MoveItemsState),(_this=_super.call(this,{name:"move-items"})).registerAction(new Action_Action({type:Action_InputType.MOUSE_DOWN,fire:function fire(event){var element=_this.engine.getActionEventBus().getModelForEvent(event);element&&(element.isSelected()||_this.engine.getModel().clearSelection(),element.setSelected(!0),_this.engine.repaintCanvas())}})),_this}return function MoveItemsState_createClass(Constructor,protoProps,staticProps){return protoProps&&MoveItemsState_defineProperties(Constructor.prototype,protoProps),staticProps&&MoveItemsState_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(MoveItemsState,[{key:"activated",value:function activated(previous){MoveItemsState_get(MoveItemsState_getPrototypeOf(MoveItemsState.prototype),"activated",this).call(this,previous),this.initialPositions={}}},{key:"fireMouseMoved",value:function fireMouseMoved(event){var _step,items=this.engine.getModel().getSelectedEntities(),model=this.engine.getModel(),_iterator=MoveItemsState_createForOfIteratorHelper(items);try{for(_iterator.s();!(_step=_iterator.n()).done;){var item=_step.value;if(item instanceof BasePositionModel){if(item.isLocked())continue;this.initialPositions[item.getID()]||(this.initialPositions[item.getID()]={point:item.getPosition(),item});var pos=this.initialPositions[item.getID()].point;item.setPosition(model.getGridPosition(pos.x+event.virtualDisplacementX),model.getGridPosition(pos.y+event.virtualDisplacementY))}}}catch(err){_iterator.e(err)}finally{_iterator.f()}this.engine.repaintCanvas()}}]),MoveItemsState}(AbstractDisplacementState)},"../packages/react-diagrams-core/dist/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Qo:()=>DefaultDiagramState,Zc:()=>DiagramEngine,Vm:()=>DiagramModel,mk:()=>DragDiagramItemsState,aS:()=>LabelModel,JW:()=>LinkLayerFactory,KW:()=>LinkModel,hL:()=>LinkWidget,JM:()=>NodeLayerFactory,XF:()=>NodeModel,Xs:()=>PointModel,AJ:()=>PortModel,tK:()=>PortModelAlignment,ER:()=>PortWidget});__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.reflect.construct.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.create.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.reflect.get.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.symbol.to-primitive.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.date.to-primitive.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.symbol.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.number.constructor.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.function.name.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.from.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.is-array.js");var lodash=__webpack_require__("../node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/lodash.js"),dist=(__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.concat.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.splice.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.string.link.js"),__webpack_require__("../packages/react-canvas-core/dist/index.js"));function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(target,property,receiver){var base=_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},_get.apply(this,arguments)}function _superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=_getPrototypeOf(object)););return object}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var PointModel=function(_BasePositionModel){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(PointModel,_BasePositionModel);var _super=_createSuper(PointModel);function PointModel(options){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PointModel),(_this=_super.call(this,Object.assign(Object.assign({},options),{type:"point"}))).parent=options.link,_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(PointModel,[{key:"isConnectedToPort",value:function isConnectedToPort(){return null!==this.parent.getPortForPoint(this)}},{key:"getLink",value:function getLink(){return this.getParent()}},{key:"remove",value:function remove(){this.parent&&this.parent.removePoint(this),_get(_getPrototypeOf(PointModel.prototype),"remove",this).call(this)}},{key:"isLocked",value:function isLocked(){return _get(_getPrototypeOf(PointModel.prototype),"isLocked",this).call(this)||this.getParent().isLocked()}}]),PointModel}(dist.NW),geometry_dist=__webpack_require__("../packages/geometry/dist/index.js");function LinkModel_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function LinkModel_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function LinkModel_get(){return LinkModel_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(target,property,receiver){var base=LinkModel_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},LinkModel_get.apply(this,arguments)}function LinkModel_superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=LinkModel_getPrototypeOf(object)););return object}function LinkModel_setPrototypeOf(o,p){return LinkModel_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},LinkModel_setPrototypeOf(o,p)}function LinkModel_createSuper(Derived){var hasNativeReflectConstruct=function LinkModel_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=LinkModel_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=LinkModel_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return LinkModel_possibleConstructorReturn(this,result)}}function LinkModel_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return LinkModel_assertThisInitialized(self)}function LinkModel_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function LinkModel_getPrototypeOf(o){return LinkModel_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},LinkModel_getPrototypeOf(o)}var LinkModel=function(_BaseModel){!function LinkModel_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&LinkModel_setPrototypeOf(subClass,superClass)}(LinkModel,_BaseModel);var _super=LinkModel_createSuper(LinkModel);function LinkModel(options){var _this;return function LinkModel_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,LinkModel),(_this=_super.call(this,options)).points=[new PointModel({link:LinkModel_assertThisInitialized(_this)}),new PointModel({link:LinkModel_assertThisInitialized(_this)})],_this.sourcePort=null,_this.targetPort=null,_this.renderedPaths=[],_this.labels=[],_this}return function LinkModel_createClass(Constructor,protoProps,staticProps){return protoProps&&LinkModel_defineProperties(Constructor.prototype,protoProps),staticProps&&LinkModel_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(LinkModel,[{key:"getBoundingBox",value:function getBoundingBox(){return new geometry_dist.Ae((0,geometry_dist.dq)(lodash.map(this.points,(function(point){return point.getPosition()}))))}},{key:"getSelectionEntities",value:function getSelectionEntities(){return this.getTargetPort()&&this.getSourcePort()?LinkModel_get(LinkModel_getPrototypeOf(LinkModel.prototype),"getSelectionEntities",this).call(this).concat(lodash.slice(this.points,1,this.points.length-1)):this.getSourcePort()?this.getTargetPort()?LinkModel_get(LinkModel_getPrototypeOf(LinkModel.prototype),"getSelectionEntities",this).call(this).concat(this.points):LinkModel_get(LinkModel_getPrototypeOf(LinkModel.prototype),"getSelectionEntities",this).call(this).concat(lodash.slice(this.points,1,this.points.length)):LinkModel_get(LinkModel_getPrototypeOf(LinkModel.prototype),"getSelectionEntities",this).call(this).concat(lodash.slice(this.points,0,this.points.length-1))}},{key:"deserialize",value:function deserialize(event){var _this2=this;LinkModel_get(LinkModel_getPrototypeOf(LinkModel.prototype),"deserialize",this).call(this,event),this.points=lodash.map(event.data.points||[],(function(point){var p=new PointModel({link:_this2,position:new geometry_dist.E9(point.x,point.y)});return p.deserialize(Object.assign(Object.assign({},event),{data:point})),p})),lodash.forEach(event.data.labels||[],(function(label){var labelOb=event.engine.getFactoryForLabel(label.type).generateModel({});labelOb.deserialize(Object.assign(Object.assign({},event),{data:label})),_this2.addLabel(labelOb)})),event.data.target&&event.getModel(event.data.targetPort).then((function(model){_this2.setTargetPort(model)})),event.data.source&&event.getModel(event.data.sourcePort).then((function(model){_this2.setSourcePort(model)}))}},{key:"getRenderedPath",value:function getRenderedPath(){return this.renderedPaths}},{key:"setRenderedPaths",value:function setRenderedPaths(paths){this.renderedPaths=paths}},{key:"serialize",value:function serialize(){return Object.assign(Object.assign({},LinkModel_get(LinkModel_getPrototypeOf(LinkModel.prototype),"serialize",this).call(this)),{source:this.sourcePort?this.sourcePort.getParent().getID():null,sourcePort:this.sourcePort?this.sourcePort.getID():null,target:this.targetPort?this.targetPort.getParent().getID():null,targetPort:this.targetPort?this.targetPort.getID():null,points:lodash.map(this.points,(function(point){return point.serialize()})),labels:lodash.map(this.labels,(function(label){return label.serialize()}))})}},{key:"doClone",value:function doClone(){var lookupTable=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},clone=arguments.length>1?arguments[1]:void 0;clone.setPoints(lodash.map(this.getPoints(),(function(point){return point.clone(lookupTable)}))),this.sourcePort&&clone.setSourcePort(this.sourcePort.clone(lookupTable)),this.targetPort&&clone.setTargetPort(this.targetPort.clone(lookupTable))}},{key:"clearPort",value:function clearPort(port){this.sourcePort===port?this.setSourcePort(null):this.targetPort===port&&this.setTargetPort(null)}},{key:"remove",value:function remove(){this.sourcePort&&(this.sourcePort.removeLink(this),delete this.sourcePort),this.targetPort&&(this.targetPort.removeLink(this),delete this.targetPort),LinkModel_get(LinkModel_getPrototypeOf(LinkModel.prototype),"remove",this).call(this)}},{key:"isLastPoint",value:function isLastPoint(point){return this.getPointIndex(point)===this.points.length-1}},{key:"getPointIndex",value:function getPointIndex(point){return this.points.indexOf(point)}},{key:"getPointModel",value:function getPointModel(id){for(var i=0;i<this.points.length;i++)if(this.points[i].getID()===id)return this.points[i];return null}},{key:"getPortForPoint",value:function getPortForPoint(point){return null!==this.sourcePort&&this.getFirstPoint().getID()===point.getID()?this.sourcePort:null!==this.targetPort&&this.getLastPoint().getID()===point.getID()?this.targetPort:null}},{key:"getPointForPort",value:function getPointForPort(port){return null!==this.sourcePort&&this.sourcePort.getID()===port.getID()?this.getFirstPoint():null!==this.targetPort&&this.targetPort.getID()===port.getID()?this.getLastPoint():null}},{key:"getFirstPoint",value:function getFirstPoint(){return this.points[0]}},{key:"getLastPoint",value:function getLastPoint(){return this.points[this.points.length-1]}},{key:"setSourcePort",value:function setSourcePort(port){null!==port&&port.addLink(this),null!==this.sourcePort&&this.sourcePort.removeLink(this),this.sourcePort=port,this.fireEvent({port},"sourcePortChanged"),(null==port?void 0:port.reportedPosition)&&this.getPointForPort(port).setPosition(port.getCenter())}},{key:"getSourcePort",value:function getSourcePort(){return this.sourcePort}},{key:"getTargetPort",value:function getTargetPort(){return this.targetPort}},{key:"setTargetPort",value:function setTargetPort(port){null!==port&&port.addLink(this),null!==this.targetPort&&this.targetPort.removeLink(this),this.targetPort=port,this.fireEvent({port},"targetPortChanged"),(null==port?void 0:port.reportedPosition)&&this.getPointForPort(port).setPosition(port.getCenter())}},{key:"point",value:function point(x,y){var index=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return this.addPoint(this.generatePoint(x,y),index)}},{key:"addLabel",value:function addLabel(label){label.setParent(this),this.labels.push(label)}},{key:"getPoints",value:function getPoints(){return this.points}},{key:"getLabels",value:function getLabels(){return this.labels}},{key:"setPoints",value:function setPoints(points){var _this3=this;lodash.forEach(points,(function(point){point.setParent(_this3)})),this.points=points}},{key:"removePoint",value:function removePoint(pointModel){this.isLastPoint(pointModel)&&this.remove(),this.points.splice(this.getPointIndex(pointModel),1)}},{key:"removePointsBefore",value:function removePointsBefore(pointModel){this.points.splice(0,this.getPointIndex(pointModel))}},{key:"removePointsAfter",value:function removePointsAfter(pointModel){this.points.splice(this.getPointIndex(pointModel)+1)}},{key:"removeMiddlePoints",value:function removeMiddlePoints(){this.points.length>2&&this.points.splice(1,this.points.length-2)}},{key:"addPoint",value:function addPoint(pointModel){var index=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return pointModel.setParent(this),this.points.splice(index,0,pointModel),pointModel}},{key:"generatePoint",value:function generatePoint(){var x=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new PointModel({link:this,position:new geometry_dist.E9(x,y)})}}]),LinkModel}(dist.gq);function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function NodeModel_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function NodeModel_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function NodeModel_get(){return NodeModel_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(target,property,receiver){var base=NodeModel_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},NodeModel_get.apply(this,arguments)}function NodeModel_superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=NodeModel_getPrototypeOf(object)););return object}function NodeModel_setPrototypeOf(o,p){return NodeModel_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},NodeModel_setPrototypeOf(o,p)}function NodeModel_createSuper(Derived){var hasNativeReflectConstruct=function NodeModel_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=NodeModel_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=NodeModel_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return NodeModel_possibleConstructorReturn(this,result)}}function NodeModel_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function NodeModel_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function NodeModel_getPrototypeOf(o){return NodeModel_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},NodeModel_getPrototypeOf(o)}var NodeModel=function(_BasePositionModel){!function NodeModel_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&NodeModel_setPrototypeOf(subClass,superClass)}(NodeModel,_BasePositionModel);var _super=NodeModel_createSuper(NodeModel);function NodeModel(options){var _this;return function NodeModel_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,NodeModel),(_this=_super.call(this,options)).ports={},_this.width=0,_this.height=0,_this}return function NodeModel_createClass(Constructor,protoProps,staticProps){return protoProps&&NodeModel_defineProperties(Constructor.prototype,protoProps),staticProps&&NodeModel_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(NodeModel,[{key:"getBoundingBox",value:function getBoundingBox(){return geometry_dist.Ae.fromPointAndSize(this.getPosition(),this.width,this.height)}},{key:"setPosition",value:function setPosition(x,y){var _this2=this,old=this.position;x instanceof geometry_dist.E9?NodeModel_get(NodeModel_getPrototypeOf(NodeModel.prototype),"setPosition",this).call(this,x):NodeModel_get(NodeModel_getPrototypeOf(NodeModel.prototype),"setPosition",this).call(this,x,y),lodash.forEach(this.ports,(function(port){port.setPosition(port.getX()+_this2.position.x-old.x,port.getY()+_this2.position.y-old.y)}))}},{key:"deserialize",value:function deserialize(event){var _this3=this;NodeModel_get(NodeModel_getPrototypeOf(NodeModel.prototype),"deserialize",this).call(this,event),lodash.forEach(event.data.ports,(function(port){var portOb=event.engine.getFactoryForPort(port.type).generateModel({});portOb.deserialize(Object.assign(Object.assign({},event),{data:port})),event.registerModel(portOb),_this3.addPort(portOb)}))}},{key:"serialize",value:function serialize(){return Object.assign(Object.assign({},NodeModel_get(NodeModel_getPrototypeOf(NodeModel.prototype),"serialize",this).call(this)),{ports:lodash.map(this.ports,(function(port){return port.serialize()}))})}},{key:"doClone",value:function doClone(){var lookupTable=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},clone=arguments.length>1?arguments[1]:void 0;clone.ports={},lodash.forEach(this.ports,(function(port){clone.addPort(port.clone(lookupTable))}))}},{key:"remove",value:function remove(){NodeModel_get(NodeModel_getPrototypeOf(NodeModel.prototype),"remove",this).call(this),lodash.forEach(this.ports,(function(port){lodash.forEach(port.getLinks(),(function(link){link.remove()}))}))}},{key:"getPortFromID",value:function getPortFromID(id){for(var i in this.ports)if(this.ports[i].getID()===id)return this.ports[i];return null}},{key:"getLink",value:function getLink(id){for(var portID in this.ports){var links=this.ports[portID].getLinks();if(links[id])return links[id]}}},{key:"getPort",value:function getPort(name){return this.ports[name]}},{key:"getPorts",value:function getPorts(){return this.ports}},{key:"removePort",value:function removePort(port){var _step,_iterator=_createForOfIteratorHelper(lodash.values(port.getLinks()));try{for(_iterator.s();!(_step=_iterator.n()).done;){_step.value.clearPort(port)}}catch(err){_iterator.e(err)}finally{_iterator.f()}this.ports[port.getName()]&&(this.ports[port.getName()].setParent(null),delete this.ports[port.getName()])}},{key:"addPort",value:function addPort(port){return port.setParent(this),this.ports[port.getName()]=port,port}},{key:"updateDimensions",value:function updateDimensions(_ref){var width=_ref.width,height=_ref.height;this.width=width,this.height=height}}]),NodeModel}(dist.NW);function NodeLayerModel_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function NodeLayerModel_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function NodeLayerModel_get(){return NodeLayerModel_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(target,property,receiver){var base=NodeLayerModel_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},NodeLayerModel_get.apply(this,arguments)}function NodeLayerModel_superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=NodeLayerModel_getPrototypeOf(object)););return object}function NodeLayerModel_setPrototypeOf(o,p){return NodeLayerModel_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},NodeLayerModel_setPrototypeOf(o,p)}function NodeLayerModel_createSuper(Derived){var hasNativeReflectConstruct=function NodeLayerModel_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=NodeLayerModel_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=NodeLayerModel_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return NodeLayerModel_possibleConstructorReturn(this,result)}}function NodeLayerModel_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function NodeLayerModel_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function NodeLayerModel_getPrototypeOf(o){return NodeLayerModel_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},NodeLayerModel_getPrototypeOf(o)}var NodeLayerModel=function(_LayerModel){!function NodeLayerModel_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&NodeLayerModel_setPrototypeOf(subClass,superClass)}(NodeLayerModel,_LayerModel);var _super=NodeLayerModel_createSuper(NodeLayerModel);function NodeLayerModel(){return function NodeLayerModel_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,NodeLayerModel),_super.call(this,{type:"diagram-nodes",isSvg:!1,transformed:!0})}return function NodeLayerModel_createClass(Constructor,protoProps,staticProps){return protoProps&&NodeLayerModel_defineProperties(Constructor.prototype,protoProps),staticProps&&NodeLayerModel_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(NodeLayerModel,[{key:"addModel",value:function addModel(model){var _this=this;if(!(model instanceof NodeModel))throw new Error("Can only add nodes to this layer");model.registerListener({entityRemoved:function entityRemoved(){_this.getParent().removeNode(model)}}),NodeLayerModel_get(NodeLayerModel_getPrototypeOf(NodeLayerModel.prototype),"addModel",this).call(this,model)}},{key:"getChildModelFactoryBank",value:function getChildModelFactoryBank(engine){return engine.getNodeFactories()}},{key:"getNodes",value:function getNodes(){return this.getModels()}}]),NodeLayerModel}(dist.iz);function LinkLayerModel_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function LinkLayerModel_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function LinkLayerModel_get(){return LinkLayerModel_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(target,property,receiver){var base=LinkLayerModel_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},LinkLayerModel_get.apply(this,arguments)}function LinkLayerModel_superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=LinkLayerModel_getPrototypeOf(object)););return object}function LinkLayerModel_setPrototypeOf(o,p){return LinkLayerModel_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},LinkLayerModel_setPrototypeOf(o,p)}function LinkLayerModel_createSuper(Derived){var hasNativeReflectConstruct=function LinkLayerModel_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=LinkLayerModel_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=LinkLayerModel_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return LinkLayerModel_possibleConstructorReturn(this,result)}}function LinkLayerModel_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function LinkLayerModel_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function LinkLayerModel_getPrototypeOf(o){return LinkLayerModel_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},LinkLayerModel_getPrototypeOf(o)}var LinkLayerModel=function(_LayerModel){!function LinkLayerModel_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&LinkLayerModel_setPrototypeOf(subClass,superClass)}(LinkLayerModel,_LayerModel);var _super=LinkLayerModel_createSuper(LinkLayerModel);function LinkLayerModel(){return function LinkLayerModel_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,LinkLayerModel),_super.call(this,{type:"diagram-links",isSvg:!0,transformed:!0})}return function LinkLayerModel_createClass(Constructor,protoProps,staticProps){return protoProps&&LinkLayerModel_defineProperties(Constructor.prototype,protoProps),staticProps&&LinkLayerModel_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(LinkLayerModel,[{key:"addModel",value:function addModel(model){var _this=this;if(!(model instanceof LinkModel))throw new Error("Can only add links to this layer");model.registerListener({entityRemoved:function entityRemoved(){_this.getParent().removeLink(model)}}),LinkLayerModel_get(LinkLayerModel_getPrototypeOf(LinkLayerModel.prototype),"addModel",this).call(this,model)}},{key:"getLinks",value:function getLinks(){return this.getModels()}},{key:"getChildModelFactoryBank",value:function getChildModelFactoryBank(engine){return engine.getLinkFactories()}}]),LinkLayerModel}(dist.iz);function DiagramModel_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function DiagramModel_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return DiagramModel_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DiagramModel_arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function DiagramModel_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function DiagramModel_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function DiagramModel_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function DiagramModel_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function DiagramModel_get(){return DiagramModel_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(target,property,receiver){var base=DiagramModel_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},DiagramModel_get.apply(this,arguments)}function DiagramModel_superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=DiagramModel_getPrototypeOf(object)););return object}function DiagramModel_setPrototypeOf(o,p){return DiagramModel_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},DiagramModel_setPrototypeOf(o,p)}function DiagramModel_createSuper(Derived){var hasNativeReflectConstruct=function DiagramModel_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=DiagramModel_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DiagramModel_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DiagramModel_possibleConstructorReturn(this,result)}}function DiagramModel_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function DiagramModel_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function DiagramModel_getPrototypeOf(o){return DiagramModel_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},DiagramModel_getPrototypeOf(o)}var DiagramModel=function(_CanvasModel){!function DiagramModel_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DiagramModel_setPrototypeOf(subClass,superClass)}(DiagramModel,_CanvasModel);var _super=DiagramModel_createSuper(DiagramModel);function DiagramModel(){var _this,options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return DiagramModel_classCallCheck(this,DiagramModel),(_this=_super.call(this,options)).addLayer(new LinkLayerModel),_this.addLayer(new NodeLayerModel),_this}return function DiagramModel_createClass(Constructor,protoProps,staticProps){return protoProps&&DiagramModel_defineProperties(Constructor.prototype,protoProps),staticProps&&DiagramModel_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DiagramModel,[{key:"deserialize",value:function deserialize(event){this.layers=[],DiagramModel_get(DiagramModel_getPrototypeOf(DiagramModel.prototype),"deserialize",this).call(this,event)}},{key:"addLayer",value:function addLayer(layer){DiagramModel_get(DiagramModel_getPrototypeOf(DiagramModel.prototype),"addLayer",this).call(this,layer),layer instanceof NodeLayerModel&&(this.activeNodeLayer=layer),layer instanceof LinkLayerModel&&(this.activeLinkLayer=layer)}},{key:"getLinkLayers",value:function getLinkLayers(){return lodash.filter(this.layers,(function(layer){return layer instanceof LinkLayerModel}))}},{key:"getNodeLayers",value:function getNodeLayers(){return lodash.filter(this.layers,(function(layer){return layer instanceof NodeLayerModel}))}},{key:"getActiveNodeLayer",value:function getActiveNodeLayer(){if(!this.activeNodeLayer){var layers=this.getNodeLayers();0===layers.length?this.addLayer(new NodeLayerModel):this.activeNodeLayer=layers[0]}return this.activeNodeLayer}},{key:"getActiveLinkLayer",value:function getActiveLinkLayer(){if(!this.activeLinkLayer){var layers=this.getLinkLayers();0===layers.length?this.addLayer(new LinkLayerModel):this.activeLinkLayer=layers[0]}return this.activeLinkLayer}},{key:"getNode",value:function getNode(node){var _step,_iterator=DiagramModel_createForOfIteratorHelper(this.getNodeLayers());try{for(_iterator.s();!(_step=_iterator.n()).done;){var model=_step.value.getModel(node);if(model)return model}}catch(err){_iterator.e(err)}finally{_iterator.f()}}},{key:"getLink",value:function getLink(link){var _step2,_iterator2=DiagramModel_createForOfIteratorHelper(this.getLinkLayers());try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var model=_step2.value.getModel(link);if(model)return model}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}},{key:"addAll",value:function addAll(){for(var _this2=this,_len=arguments.length,models=new Array(_len),_key=0;_key<_len;_key++)models[_key]=arguments[_key];return lodash.forEach(models,(function(model){model instanceof LinkModel?_this2.addLink(model):model instanceof NodeModel&&_this2.addNode(model)})),models}},{key:"addLink",value:function addLink(link){return this.getActiveLinkLayer().addModel(link),this.fireEvent({link,isCreated:!0},"linksUpdated"),link}},{key:"addNode",value:function addNode(node){return this.getActiveNodeLayer().addModel(node),this.fireEvent({node,isCreated:!0},"nodesUpdated"),node}},{key:"removeLink",value:function removeLink(link){lodash.some(this.getLinkLayers(),(function(layer){return layer.removeModel(link)}))&&this.fireEvent({link,isCreated:!1},"linksUpdated")}},{key:"removeNode",value:function removeNode(node){lodash.some(this.getNodeLayers(),(function(layer){return layer.removeModel(node)}))&&this.fireEvent({node,isCreated:!1},"nodesUpdated")}},{key:"getLinks",value:function getLinks(){return lodash.flatMap(this.getLinkLayers(),(function(layer){return lodash.values(layer.getModels())}))}},{key:"getNodes",value:function getNodes(){return lodash.flatMap(this.getNodeLayers(),(function(layer){return lodash.values(layer.getModels())}))}}]),DiagramModel}(dist.N5);function LabelModel_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function LabelModel_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function LabelModel_get(){return LabelModel_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(target,property,receiver){var base=LabelModel_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},LabelModel_get.apply(this,arguments)}function LabelModel_superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=LabelModel_getPrototypeOf(object)););return object}function LabelModel_setPrototypeOf(o,p){return LabelModel_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},LabelModel_setPrototypeOf(o,p)}function LabelModel_createSuper(Derived){var hasNativeReflectConstruct=function LabelModel_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=LabelModel_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=LabelModel_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return LabelModel_possibleConstructorReturn(this,result)}}function LabelModel_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function LabelModel_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function LabelModel_getPrototypeOf(o){return LabelModel_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},LabelModel_getPrototypeOf(o)}var _templateObject,_templateObject2,S,LabelModel=function(_BaseModel){!function LabelModel_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&LabelModel_setPrototypeOf(subClass,superClass)}(LabelModel,_BaseModel);var _super=LabelModel_createSuper(LabelModel);function LabelModel(options){return function LabelModel_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,LabelModel),_super.call(this,Object.assign(Object.assign({},options),{offsetX:options.offsetX||0,offsetY:options.offsetY||0}))}return function LabelModel_createClass(Constructor,protoProps,staticProps){return protoProps&&LabelModel_defineProperties(Constructor.prototype,protoProps),staticProps&&LabelModel_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(LabelModel,[{key:"deserialize",value:function deserialize(event){LabelModel_get(LabelModel_getPrototypeOf(LabelModel.prototype),"deserialize",this).call(this,event),this.options.offsetX=event.data.offsetX,this.options.offsetY=event.data.offsetY}},{key:"serialize",value:function serialize(){return Object.assign(Object.assign({},LabelModel_get(LabelModel_getPrototypeOf(LabelModel.prototype),"serialize",this).call(this)),{offsetX:this.options.offsetX,offsetY:this.options.offsetY})}}]),LabelModel}(dist.gq),react=__webpack_require__("../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),emotion_styled_browser_esm=(__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.map.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.reduce.js"),__webpack_require__("../node_modules/.pnpm/@emotion+styled@11.10.5_3stiutgnnbnfnf3uowm5cip22i/node_modules/@emotion/styled/dist/emotion-styled.browser.esm.js"));function LabelWidget_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function LabelWidget_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function LabelWidget_setPrototypeOf(o,p){return LabelWidget_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},LabelWidget_setPrototypeOf(o,p)}function LabelWidget_createSuper(Derived){var hasNativeReflectConstruct=function LabelWidget_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=LabelWidget_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=LabelWidget_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return LabelWidget_possibleConstructorReturn(this,result)}}function LabelWidget_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function LabelWidget_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function LabelWidget_getPrototypeOf(o){return LabelWidget_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},LabelWidget_getPrototypeOf(o)}function _taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}!function(S){S.Label=emotion_styled_browser_esm.Z.div(_templateObject||(_templateObject=_taggedTemplateLiteralLoose(["\n\t\tdisplay: inline-block;\n\t\tposition: absolute;\n\t"]))),S.Foreign=emotion_styled_browser_esm.Z.foreignObject(_templateObject2||(_templateObject2=_taggedTemplateLiteralLoose(["\n\t\tpointer-events: none;\n\t\toverflow: visible;\n\t"])))}(S||(S={}));var LabelWidget=function(_React$Component){!function LabelWidget_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&LabelWidget_setPrototypeOf(subClass,superClass)}(LabelWidget,_React$Component);var _super=LabelWidget_createSuper(LabelWidget);function LabelWidget(props){var _this;return function LabelWidget_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,LabelWidget),(_this=_super.call(this,props)).findPathAndRelativePositionToRenderLabel=function(index){for(var link=_this.props.label.getParent(),lengths=link.getRenderedPath().map((function(path){return path.getTotalLength()})),labelPosition=lengths.reduce((function(previousValue,currentValue){return previousValue+currentValue}),0)*(index/(link.getLabels().length+1)),pathIndex=0;pathIndex<link.getRenderedPath().length;){if(labelPosition-lengths[pathIndex]<0)return{path:link.getRenderedPath()[pathIndex],position:labelPosition};labelPosition-=lengths[pathIndex],pathIndex++}},_this.calculateLabelPosition=function(){var found=_this.findPathAndRelativePositionToRenderLabel(_this.props.index+1);if(found){var path=found.path,position=found.position,labelDimensions_width=_this.ref.current.offsetWidth,labelDimensions_height=_this.ref.current.offsetHeight,pathCentre=path.getPointAtLength(position),labelCoordinates_x=pathCentre.x-labelDimensions_width/2+_this.props.label.getOptions().offsetX,labelCoordinates_y=pathCentre.y-labelDimensions_height/2+_this.props.label.getOptions().offsetY;_this.ref.current.style.transform="translate("+labelCoordinates_x+"px, "+labelCoordinates_y+"px)"}},_this.ref=react.createRef(),_this}return function LabelWidget_createClass(Constructor,protoProps,staticProps){return protoProps&&LabelWidget_defineProperties(Constructor.prototype,protoProps),staticProps&&LabelWidget_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(LabelWidget,[{key:"componentDidUpdate",value:function componentDidUpdate(){window.requestAnimationFrame(this.calculateLabelPosition)}},{key:"componentDidMount",value:function componentDidMount(){window.requestAnimationFrame(this.calculateLabelPosition)}},{key:"render",value:function render(){var canvas=this.props.engine.getCanvas();return react.createElement(S.Foreign,{key:this.props.label.getID(),width:null==canvas?void 0:canvas.offsetWidth,height:null==canvas?void 0:canvas.offsetHeight},react.createElement(S.Label,{ref:this.ref},this.props.engine.getFactoryForLabel(this.props.label).generateReactWidget({model:this.props.label})))}}]),LabelWidget}(react.Component);function LinkWidget_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function LinkWidget_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function LinkWidget_setPrototypeOf(o,p){return LinkWidget_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},LinkWidget_setPrototypeOf(o,p)}function LinkWidget_createSuper(Derived){var hasNativeReflectConstruct=function LinkWidget_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=LinkWidget_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=LinkWidget_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return LinkWidget_possibleConstructorReturn(this,result)}}function LinkWidget_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function LinkWidget_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function LinkWidget_getPrototypeOf(o){return LinkWidget_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},LinkWidget_getPrototypeOf(o)}var LinkLayerWidget_templateObject,LinkLayerWidget_S,LinkWidget=function(_React$Component){!function LinkWidget_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&LinkWidget_setPrototypeOf(subClass,superClass)}(LinkWidget,_React$Component);var _super=LinkWidget_createSuper(LinkWidget);function LinkWidget(props){var _this;return function LinkWidget_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,LinkWidget),(_this=_super.call(this,props)).state={sourcePort:null,targetPort:null},_this}return function LinkWidget_createClass(Constructor,protoProps,staticProps){return protoProps&&LinkWidget_defineProperties(Constructor.prototype,protoProps),staticProps&&LinkWidget_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(LinkWidget,[{key:"componentWillUnmount",value:function componentWillUnmount(){this.sourceListener&&this.sourceListener.deregister(),this.targetListener&&this.targetListener.deregister()}},{key:"installTarget",value:function installTarget(){var _this2=this;this.targetListener&&this.targetListener.deregister(),this.props.link.getTargetPort()&&(this.targetListener=this.props.link.getTargetPort().registerListener({reportInitialPosition:function reportInitialPosition(event){_this2.forceUpdate()}}))}},{key:"installSource",value:function installSource(){var _this3=this;this.sourceListener&&this.sourceListener.deregister(),this.props.link.getSourcePort()&&(this.sourceListener=this.props.link.getSourcePort().registerListener({reportInitialPosition:function reportInitialPosition(event){_this3.forceUpdate()}}))}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps,prevState,snapshot){prevState.sourcePort!==this.state.sourcePort&&this.installSource(),prevState.targetPort!==this.state.targetPort&&this.installTarget()}},{key:"componentDidMount",value:function componentDidMount(){this.props.link.getSourcePort()&&this.installSource(),this.props.link.getTargetPort()&&this.installTarget()}},{key:"render",value:function render(){var _this4=this,link=this.props.link;return link.getSourcePort()&&!link.getSourcePort().reportedPosition||link.getTargetPort()&&!link.getTargetPort().reportedPosition?null:react.createElement(dist.G,{model:this.props.link,serialized:this.props.link.serialize()},(function(){return react.createElement("g",{"data-linkid":_this4.props.link.getID()},_this4.props.diagramEngine.generateWidgetForLink(link),lodash.map(_this4.props.link.getLabels(),(function(labelModel,index){return react.createElement(LabelWidget,{key:labelModel.getID(),engine:_this4.props.diagramEngine,label:labelModel,index})})))}))}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,prevState){return{sourcePort:nextProps.link.getSourcePort(),targetPort:nextProps.link.getTargetPort()}}},{key:"generateLinePath",value:function generateLinePath(firstPoint,lastPoint){return"M"+firstPoint.getX()+","+firstPoint.getY()+" L "+lastPoint.getX()+","+lastPoint.getY()}}]),LinkWidget}(react.Component);function LinkLayerWidget_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function LinkLayerWidget_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function LinkLayerWidget_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function LinkLayerWidget_setPrototypeOf(o,p){return LinkLayerWidget_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},LinkLayerWidget_setPrototypeOf(o,p)}function LinkLayerWidget_createSuper(Derived){var hasNativeReflectConstruct=function LinkLayerWidget_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=LinkLayerWidget_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=LinkLayerWidget_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return LinkLayerWidget_possibleConstructorReturn(this,result)}}function LinkLayerWidget_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function LinkLayerWidget_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function LinkLayerWidget_getPrototypeOf(o){return LinkLayerWidget_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},LinkLayerWidget_getPrototypeOf(o)}!function(S){S.Container=emotion_styled_browser_esm.Z.div(LinkLayerWidget_templateObject||(LinkLayerWidget_templateObject=function LinkLayerWidget_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}([""])))}(LinkLayerWidget_S||(LinkLayerWidget_S={}));var LinkLayerWidget=function(_React$Component){!function LinkLayerWidget_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&LinkLayerWidget_setPrototypeOf(subClass,superClass)}(LinkLayerWidget,_React$Component);var _super=LinkLayerWidget_createSuper(LinkLayerWidget);function LinkLayerWidget(){return LinkLayerWidget_classCallCheck(this,LinkLayerWidget),_super.apply(this,arguments)}return function LinkLayerWidget_createClass(Constructor,protoProps,staticProps){return protoProps&&LinkLayerWidget_defineProperties(Constructor.prototype,protoProps),staticProps&&LinkLayerWidget_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(LinkLayerWidget,[{key:"render",value:function render(){var _this=this;return react.createElement(react.Fragment,null,lodash.map(this.props.layer.getLinks(),(function(link){return react.createElement(LinkWidget,{key:link.getID(),link,diagramEngine:_this.props.engine})})))}}]),LinkLayerWidget}(react.Component);function LinkLayerFactory_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function LinkLayerFactory_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function LinkLayerFactory_setPrototypeOf(o,p){return LinkLayerFactory_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},LinkLayerFactory_setPrototypeOf(o,p)}function LinkLayerFactory_createSuper(Derived){var hasNativeReflectConstruct=function LinkLayerFactory_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=LinkLayerFactory_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=LinkLayerFactory_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return LinkLayerFactory_possibleConstructorReturn(this,result)}}function LinkLayerFactory_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function LinkLayerFactory_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function LinkLayerFactory_getPrototypeOf(o){return LinkLayerFactory_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},LinkLayerFactory_getPrototypeOf(o)}var NodeWidget_templateObject,NodeWidget_S,LinkLayerFactory=function(_AbstractReactFactory){!function LinkLayerFactory_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&LinkLayerFactory_setPrototypeOf(subClass,superClass)}(LinkLayerFactory,_AbstractReactFactory);var _super=LinkLayerFactory_createSuper(LinkLayerFactory);function LinkLayerFactory(){return function LinkLayerFactory_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,LinkLayerFactory),_super.call(this,"diagram-links")}return function LinkLayerFactory_createClass(Constructor,protoProps,staticProps){return protoProps&&LinkLayerFactory_defineProperties(Constructor.prototype,protoProps),staticProps&&LinkLayerFactory_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(LinkLayerFactory,[{key:"generateModel",value:function generateModel(event){return new LinkLayerModel}},{key:"generateReactWidget",value:function generateReactWidget(event){return react.createElement(LinkLayerWidget,{layer:event.model,engine:this.engine})}}]),LinkLayerFactory}(dist.a3),ResizeObserver_es=__webpack_require__("../node_modules/.pnpm/resize-observer-polyfill@1.5.1/node_modules/resize-observer-polyfill/dist/ResizeObserver.es.js");function NodeWidget_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function NodeWidget_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function NodeWidget_setPrototypeOf(o,p){return NodeWidget_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},NodeWidget_setPrototypeOf(o,p)}function NodeWidget_createSuper(Derived){var hasNativeReflectConstruct=function NodeWidget_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=NodeWidget_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=NodeWidget_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return NodeWidget_possibleConstructorReturn(this,result)}}function NodeWidget_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function NodeWidget_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function NodeWidget_getPrototypeOf(o){return NodeWidget_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},NodeWidget_getPrototypeOf(o)}!function(S){S.Node=emotion_styled_browser_esm.Z.div(NodeWidget_templateObject||(NodeWidget_templateObject=function NodeWidget_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n\t\tposition: absolute;\n\t\t-webkit-touch-callout: none; /* iOS Safari */\n\t\t-webkit-user-select: none; /* Chrome/Safari/Opera */\n\t\tuser-select: none;\n\t\tcursor: move;\n\t\tpointer-events: all;\n\t"])))}(NodeWidget_S||(NodeWidget_S={}));var NodeWidget=function(_React$Component){!function NodeWidget_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&NodeWidget_setPrototypeOf(subClass,superClass)}(NodeWidget,_React$Component);var _super=NodeWidget_createSuper(NodeWidget);function NodeWidget(props){var _this;return function NodeWidget_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,NodeWidget),(_this=_super.call(this,props)).ref=react.createRef(),_this}return function NodeWidget_createClass(Constructor,protoProps,staticProps){return protoProps&&NodeWidget_defineProperties(Constructor.prototype,protoProps),staticProps&&NodeWidget_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(NodeWidget,[{key:"componentWillUnmount",value:function componentWillUnmount(){var _a;this.ob.disconnect(),this.ob=null,null===(_a=this.listener)||void 0===_a||_a.deregister(),this.listener=null}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps,prevState,snapshot){this.listener&&this.props.node!==prevProps.node&&(this.listener.deregister(),this.installSelectionListener())}},{key:"installSelectionListener",value:function installSelectionListener(){var _this2=this;this.listener=this.props.node.registerListener({selectionChanged:function selectionChanged(event){_this2.forceUpdate()}})}},{key:"updateSize",value:function updateSize(width,height){var _this3=this;this.props.node.updateDimensions({width,height});try{lodash.forEach(this.props.node.getPorts(),(function(port){port.updateCoords(_this3.props.diagramEngine.getPortCoords(port))}))}catch(ex){}}},{key:"componentDidMount",value:function componentDidMount(){var _this4=this;this.ob=new ResizeObserver_es.Z((function(entities){var bounds=entities[0].contentRect;_this4.updateSize(bounds.width,bounds.height)}));var b=this.ref.current.getBoundingClientRect();this.updateSize(b.width,b.height),this.ob.observe(this.ref.current),this.installSelectionListener()}},{key:"render",value:function render(){var _this5=this;return react.createElement(dist.G,{model:this.props.node,serialized:this.props.node.serialize()},(function(){return react.createElement(NodeWidget_S.Node,{className:"node",ref:_this5.ref,"data-nodeid":_this5.props.node.getID(),style:{top:_this5.props.node.getY(),left:_this5.props.node.getX()}},_this5.props.diagramEngine.generateWidgetForNode(_this5.props.node))}))}}]),NodeWidget}(react.Component);function NodeLayerWidget_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function NodeLayerWidget_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function NodeLayerWidget_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function NodeLayerWidget_setPrototypeOf(o,p){return NodeLayerWidget_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},NodeLayerWidget_setPrototypeOf(o,p)}function NodeLayerWidget_createSuper(Derived){var hasNativeReflectConstruct=function NodeLayerWidget_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=NodeLayerWidget_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=NodeLayerWidget_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return NodeLayerWidget_possibleConstructorReturn(this,result)}}function NodeLayerWidget_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function NodeLayerWidget_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function NodeLayerWidget_getPrototypeOf(o){return NodeLayerWidget_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},NodeLayerWidget_getPrototypeOf(o)}var NodeLayerWidget=function(_React$Component){!function NodeLayerWidget_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&NodeLayerWidget_setPrototypeOf(subClass,superClass)}(NodeLayerWidget,_React$Component);var _super=NodeLayerWidget_createSuper(NodeLayerWidget);function NodeLayerWidget(){return NodeLayerWidget_classCallCheck(this,NodeLayerWidget),_super.apply(this,arguments)}return function NodeLayerWidget_createClass(Constructor,protoProps,staticProps){return protoProps&&NodeLayerWidget_defineProperties(Constructor.prototype,protoProps),staticProps&&NodeLayerWidget_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(NodeLayerWidget,[{key:"render",value:function render(){var _this=this;return react.createElement(react.Fragment,null,lodash.map(this.props.layer.getNodes(),(function(node){return react.createElement(NodeWidget,{key:node.getID(),diagramEngine:_this.props.engine,node})})))}}]),NodeLayerWidget}(react.Component);function NodeLayerFactory_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function NodeLayerFactory_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function NodeLayerFactory_setPrototypeOf(o,p){return NodeLayerFactory_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},NodeLayerFactory_setPrototypeOf(o,p)}function NodeLayerFactory_createSuper(Derived){var hasNativeReflectConstruct=function NodeLayerFactory_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=NodeLayerFactory_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=NodeLayerFactory_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return NodeLayerFactory_possibleConstructorReturn(this,result)}}function NodeLayerFactory_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function NodeLayerFactory_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function NodeLayerFactory_getPrototypeOf(o){return NodeLayerFactory_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},NodeLayerFactory_getPrototypeOf(o)}var PortModelAlignment,NodeLayerFactory=function(_AbstractReactFactory){!function NodeLayerFactory_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&NodeLayerFactory_setPrototypeOf(subClass,superClass)}(NodeLayerFactory,_AbstractReactFactory);var _super=NodeLayerFactory_createSuper(NodeLayerFactory);function NodeLayerFactory(){return function NodeLayerFactory_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,NodeLayerFactory),_super.call(this,"diagram-nodes")}return function NodeLayerFactory_createClass(Constructor,protoProps,staticProps){return protoProps&&NodeLayerFactory_defineProperties(Constructor.prototype,protoProps),staticProps&&NodeLayerFactory_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(NodeLayerFactory,[{key:"generateModel",value:function generateModel(event){return new NodeLayerModel}},{key:"generateReactWidget",value:function generateReactWidget(event){return react.createElement(NodeLayerWidget,{layer:event.model,engine:this.engine})}}]),NodeLayerFactory}(dist.a3);function PortModel_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function PortModel_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function PortModel_get(){return PortModel_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(target,property,receiver){var base=PortModel_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},PortModel_get.apply(this,arguments)}function PortModel_superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=PortModel_getPrototypeOf(object)););return object}function PortModel_setPrototypeOf(o,p){return PortModel_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},PortModel_setPrototypeOf(o,p)}function PortModel_createSuper(Derived){var hasNativeReflectConstruct=function PortModel_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=PortModel_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=PortModel_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return PortModel_possibleConstructorReturn(this,result)}}function PortModel_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function PortModel_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function PortModel_getPrototypeOf(o){return PortModel_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},PortModel_getPrototypeOf(o)}!function(PortModelAlignment){PortModelAlignment.TOP="top",PortModelAlignment.LEFT="left",PortModelAlignment.BOTTOM="bottom",PortModelAlignment.RIGHT="right"}(PortModelAlignment||(PortModelAlignment={}));var PortModel=function(_BasePositionModel){!function PortModel_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&PortModel_setPrototypeOf(subClass,superClass)}(PortModel,_BasePositionModel);var _super=PortModel_createSuper(PortModel);function PortModel(options){var _this;return function PortModel_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PortModel),(_this=_super.call(this,options)).links={},_this.reportedPosition=!1,_this}return function PortModel_createClass(Constructor,protoProps,staticProps){return protoProps&&PortModel_defineProperties(Constructor.prototype,protoProps),staticProps&&PortModel_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(PortModel,[{key:"deserialize",value:function deserialize(event){PortModel_get(PortModel_getPrototypeOf(PortModel.prototype),"deserialize",this).call(this,event),this.reportedPosition=!1,this.options.name=event.data.name,this.options.alignment=event.data.alignment}},{key:"serialize",value:function serialize(){return Object.assign(Object.assign({},PortModel_get(PortModel_getPrototypeOf(PortModel.prototype),"serialize",this).call(this)),{name:this.options.name,alignment:this.options.alignment,parentNode:this.parent.getID(),links:lodash.map(this.links,(function(link){return link.getID()}))})}},{key:"setPosition",value:function setPosition(x,y){var _this2=this,old=this.position;PortModel_get(PortModel_getPrototypeOf(PortModel.prototype),"setPosition",this).call(this,x,y),lodash.forEach(this.getLinks(),(function(link){var point=link.getPointForPort(_this2);point.setPosition(point.getX()+x-old.x,point.getY()+y-old.y)}))}},{key:"doClone",value:function doClone(){var lookupTable=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},clone=arguments.length>1?arguments[1]:void 0;clone.links={},clone.parent=this.getParent().clone(lookupTable)}},{key:"getNode",value:function getNode(){return this.getParent()}},{key:"getName",value:function getName(){return this.options.name}},{key:"getMaximumLinks",value:function getMaximumLinks(){return this.options.maximumLinks}},{key:"setMaximumLinks",value:function setMaximumLinks(maximumLinks){this.options.maximumLinks=maximumLinks}},{key:"removeLink",value:function removeLink(link){delete this.links[link.getID()]}},{key:"addLink",value:function addLink(link){this.links[link.getID()]=link}},{key:"getLinks",value:function getLinks(){return this.links}},{key:"createLinkModel",value:function createLinkModel(){if(lodash.isFinite(this.options.maximumLinks)){var numberOfLinks=lodash.size(this.links);if(1===this.options.maximumLinks&&numberOfLinks>=1)return lodash.values(this.links)[0];if(numberOfLinks>=this.options.maximumLinks)return null}return null}},{key:"reportPosition",value:function reportPosition(){var _this3=this;lodash.forEach(this.getLinks(),(function(link){link.getPointForPort(_this3).setPosition(_this3.getCenter())})),this.fireEvent({entity:this},"reportInitialPosition")}},{key:"getCenter",value:function getCenter(){return new geometry_dist.E9(this.getX()+this.width/2,this.getY()+this.height/2)}},{key:"getBoundingBox",value:function getBoundingBox(){return geometry_dist.Ae.fromPointAndSize(this.position,this.width,this.height)}},{key:"updateCoords",value:function updateCoords(coords){this.width=coords.getWidth(),this.height=coords.getHeight(),this.setPosition(coords.getTopLeft()),this.reportedPosition=!0,this.reportPosition()}},{key:"canLinkToPort",value:function canLinkToPort(port){return!0}},{key:"isLocked",value:function isLocked(){return PortModel_get(PortModel_getPrototypeOf(PortModel.prototype),"isLocked",this).call(this)||this.getParent().isLocked()}}]),PortModel}(dist.NW);__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.join.js");function PortWidget_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function PortWidget_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function PortWidget_setPrototypeOf(o,p){return PortWidget_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},PortWidget_setPrototypeOf(o,p)}function PortWidget_createSuper(Derived){var hasNativeReflectConstruct=function PortWidget_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=PortWidget_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=PortWidget_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return PortWidget_possibleConstructorReturn(this,result)}}function PortWidget_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function PortWidget_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function PortWidget_getPrototypeOf(o){return PortWidget_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},PortWidget_getPrototypeOf(o)}var PortWidget=function(_React$Component){!function PortWidget_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&PortWidget_setPrototypeOf(subClass,superClass)}(PortWidget,_React$Component);var _super=PortWidget_createSuper(PortWidget);function PortWidget(props){var _this;return function PortWidget_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PortWidget),(_this=_super.call(this,props)).ref=react.createRef(),_this}return function PortWidget_createClass(Constructor,protoProps,staticProps){return protoProps&&PortWidget_defineProperties(Constructor.prototype,protoProps),staticProps&&PortWidget_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(PortWidget,[{key:"report",value:function report(){this.props.port.updateCoords(this.props.engine.getPortCoords(this.props.port,this.ref.current))}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.engineListenerHandle&&this.engineListenerHandle.deregister()}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps,prevState,snapshot){this.props.port.reportedPosition||this.report()}},{key:"componentDidMount",value:function componentDidMount(){var _this2=this;this.engineListenerHandle=this.props.engine.registerListener({canvasReady:function canvasReady(){_this2.report()}}),this.props.engine.getCanvas()&&this.report()}},{key:"getExtraProps",value:function getExtraProps(){return dist.C7.TESTING?{"data-links":lodash.keys(this.props.port.getNode().getPort(this.props.port.getName()).links).join(",")}:{}}},{key:"render",value:function render(){return react.createElement("div",Object.assign({style:this.props.style,ref:this.ref,className:"port "+(this.props.className||""),"data-name":this.props.port.getName(),"data-nodeid":this.props.port.getNode().getID()},this.getExtraProps()),this.props.children)}}]),PortWidget}(react.Component);function DragNewLinkState_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function DragNewLinkState_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function DragNewLinkState_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function DragNewLinkState_setPrototypeOf(o,p){return DragNewLinkState_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},DragNewLinkState_setPrototypeOf(o,p)}function DragNewLinkState_createSuper(Derived){var hasNativeReflectConstruct=function DragNewLinkState_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=DragNewLinkState_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DragNewLinkState_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DragNewLinkState_possibleConstructorReturn(this,result)}}function DragNewLinkState_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function DragNewLinkState_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function DragNewLinkState_getPrototypeOf(o){return DragNewLinkState_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},DragNewLinkState_getPrototypeOf(o)}var DragNewLinkState=function(_AbstractDisplacement){!function DragNewLinkState_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DragNewLinkState_setPrototypeOf(subClass,superClass)}(DragNewLinkState,_AbstractDisplacement);var _super=DragNewLinkState_createSuper(DragNewLinkState);function DragNewLinkState(){var _this,options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return DragNewLinkState_classCallCheck(this,DragNewLinkState),(_this=_super.call(this,{name:"drag-new-link"})).config=Object.assign({allowLooseLinks:!0,allowLinksFromLockedPorts:!1},options),_this.registerAction(new dist.aU({type:dist.n$.MOUSE_DOWN,fire:function fire(event){_this.port=_this.engine.getMouseElement(event.event),_this.config.allowLinksFromLockedPorts||!_this.port.isLocked()?(_this.link=_this.port.createLinkModel(),_this.link?(_this.link.setSelected(!0),_this.link.setSourcePort(_this.port),_this.engine.getModel().addLink(_this.link),_this.port.reportPosition()):_this.eject()):_this.eject()}})),_this.registerAction(new dist.aU({type:dist.n$.MOUSE_UP,fire:function fire(event){var model=_this.engine.getMouseElement(event.event);if(model instanceof PortModel)return _this.port.canLinkToPort(model)?(_this.link.setTargetPort(model),model.reportPosition(),void _this.engine.repaintCanvas()):(_this.link.remove(),void _this.engine.repaintCanvas());_this.config.allowLooseLinks||(_this.link.remove(),_this.engine.repaintCanvas())}})),_this}return function DragNewLinkState_createClass(Constructor,protoProps,staticProps){return protoProps&&DragNewLinkState_defineProperties(Constructor.prototype,protoProps),staticProps&&DragNewLinkState_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DragNewLinkState,[{key:"fireMouseMoved",value:function fireMouseMoved(event){var portPos=this.port.getPosition(),zoomLevelPercentage=this.engine.getModel().getZoomLevel()/100,engineOffsetX=this.engine.getModel().getOffsetX()/zoomLevelPercentage,engineOffsetY=this.engine.getModel().getOffsetY()/zoomLevelPercentage,initialXRelative=this.initialXRelative/zoomLevelPercentage,initialYRelative=this.initialYRelative/zoomLevelPercentage,linkNextX=portPos.x-engineOffsetX+(initialXRelative-portPos.x)+event.virtualDisplacementX,linkNextY=portPos.y-engineOffsetY+(initialYRelative-portPos.y)+event.virtualDisplacementY;this.link.getLastPoint().setPosition(linkNextX,linkNextY),this.engine.repaintCanvas()}}]),DragNewLinkState}(dist.s2);function DragDiagramItemsState_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function DragDiagramItemsState_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function DragDiagramItemsState_setPrototypeOf(o,p){return DragDiagramItemsState_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},DragDiagramItemsState_setPrototypeOf(o,p)}function DragDiagramItemsState_createSuper(Derived){var hasNativeReflectConstruct=function DragDiagramItemsState_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=DragDiagramItemsState_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DragDiagramItemsState_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DragDiagramItemsState_possibleConstructorReturn(this,result)}}function DragDiagramItemsState_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function DragDiagramItemsState_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function DragDiagramItemsState_getPrototypeOf(o){return DragDiagramItemsState_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},DragDiagramItemsState_getPrototypeOf(o)}var DragDiagramItemsState=function(_MoveItemsState){!function DragDiagramItemsState_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DragDiagramItemsState_setPrototypeOf(subClass,superClass)}(DragDiagramItemsState,_MoveItemsState);var _super=DragDiagramItemsState_createSuper(DragDiagramItemsState);function DragDiagramItemsState(){var _this;return function DragDiagramItemsState_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DragDiagramItemsState),(_this=_super.call(this)).registerAction(new dist.aU({type:dist.n$.MOUSE_UP,fire:function fire(event){var item=_this.engine.getMouseElement(event.event);item instanceof PortModel&&lodash.forEach(_this.initialPositions,(function(position){if(position.item instanceof PointModel){var link=position.item.getParent();if(link.getLastPoint()!==position.item)return;link.getSourcePort().canLinkToPort(item)&&(link.setTargetPort(item),item.reportPosition(),_this.engine.repaintCanvas())}}))}})),_this}return function DragDiagramItemsState_createClass(Constructor,protoProps,staticProps){return protoProps&&DragDiagramItemsState_defineProperties(Constructor.prototype,protoProps),staticProps&&DragDiagramItemsState_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DragDiagramItemsState)}(dist.C2);function DefaultDiagramState_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function DefaultDiagramState_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function DefaultDiagramState_setPrototypeOf(o,p){return DefaultDiagramState_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},DefaultDiagramState_setPrototypeOf(o,p)}function DefaultDiagramState_createSuper(Derived){var hasNativeReflectConstruct=function DefaultDiagramState_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=DefaultDiagramState_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DefaultDiagramState_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DefaultDiagramState_possibleConstructorReturn(this,result)}}function DefaultDiagramState_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function DefaultDiagramState_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function DefaultDiagramState_getPrototypeOf(o){return DefaultDiagramState_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},DefaultDiagramState_getPrototypeOf(o)}var DefaultDiagramState=function(_State){!function DefaultDiagramState_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DefaultDiagramState_setPrototypeOf(subClass,superClass)}(DefaultDiagramState,_State);var _super=DefaultDiagramState_createSuper(DefaultDiagramState);function DefaultDiagramState(){var _this;return function DefaultDiagramState_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DefaultDiagramState),(_this=_super.call(this,{name:"default-diagrams"})).childStates=[new dist.If],_this.dragCanvas=new dist.qR,_this.dragNewLink=new DragNewLinkState,_this.dragItems=new DragDiagramItemsState,_this.registerAction(new dist.aU({type:dist.n$.MOUSE_DOWN,fire:function fire(event){var element=_this.engine.getActionEventBus().getModelForEvent(event);element?element instanceof PortModel?_this.transitionWithEvent(_this.dragNewLink,event):_this.transitionWithEvent(_this.dragItems,event):_this.transitionWithEvent(_this.dragCanvas,event)}})),_this.registerAction(new dist.aU({type:dist.n$.TOUCH_START,fire:function fire(event){_this.transitionWithEvent(_this.dragCanvas,event)}})),_this}return function DefaultDiagramState_createClass(Constructor,protoProps,staticProps){return protoProps&&DefaultDiagramState_defineProperties(Constructor.prototype,protoProps),staticProps&&DefaultDiagramState_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DefaultDiagramState)}(dist.ZM);__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.filter.js");function DiagramEngine_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function DiagramEngine_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function DiagramEngine_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function DiagramEngine_setPrototypeOf(o,p){return DiagramEngine_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},DiagramEngine_setPrototypeOf(o,p)}function DiagramEngine_createSuper(Derived){var hasNativeReflectConstruct=function DiagramEngine_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=DiagramEngine_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DiagramEngine_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DiagramEngine_possibleConstructorReturn(this,result)}}function DiagramEngine_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return DiagramEngine_assertThisInitialized(self)}function DiagramEngine_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function DiagramEngine_getPrototypeOf(o){return DiagramEngine_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},DiagramEngine_getPrototypeOf(o)}var DiagramEngine=function(_CanvasEngine){!function DiagramEngine_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DiagramEngine_setPrototypeOf(subClass,superClass)}(DiagramEngine,_CanvasEngine);var _super=DiagramEngine_createSuper(DiagramEngine);function DiagramEngine(){var _this,options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};DiagramEngine_classCallCheck(this,DiagramEngine),(_this=_super.call(this,options)).maxNumberPointsPerLink=1e3,_this.nodeFactories=new dist.r3,_this.linkFactories=new dist.r3,_this.portFactories=new dist.r3,_this.labelFactories=new dist.r3;var setup=function setup(factory){factory.registerListener({factoryAdded:function factoryAdded(event){event.factory.setDiagramEngine(DiagramEngine_assertThisInitialized(_this))},factoryRemoved:function factoryRemoved(event){event.factory.setDiagramEngine(null)}})};return setup(_this.nodeFactories),setup(_this.linkFactories),setup(_this.portFactories),setup(_this.labelFactories),_this}return function DiagramEngine_createClass(Constructor,protoProps,staticProps){return protoProps&&DiagramEngine_defineProperties(Constructor.prototype,protoProps),staticProps&&DiagramEngine_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DiagramEngine,[{key:"getMouseElement",value:function getMouseElement(event){var target=event.target,diagramModel=this.model,element=dist.C7.closest(target,".port[data-name]");if(element){var nodeElement=dist.C7.closest(target,".node[data-nodeid]");return diagramModel.getNode(nodeElement.getAttribute("data-nodeid")).getPort(element.getAttribute("data-name"))}return(element=dist.C7.closest(target,".point[data-id]"))?diagramModel.getLink(element.getAttribute("data-linkid")).getPointModel(element.getAttribute("data-id")):(element=dist.C7.closest(target,"[data-linkid]"))?diagramModel.getLink(element.getAttribute("data-linkid")):(element=dist.C7.closest(target,".node[data-nodeid]"))?diagramModel.getNode(element.getAttribute("data-nodeid")):null}},{key:"getNodeFactories",value:function getNodeFactories(){return this.nodeFactories}},{key:"getLinkFactories",value:function getLinkFactories(){return this.linkFactories}},{key:"getLabelFactories",value:function getLabelFactories(){return this.labelFactories}},{key:"getPortFactories",value:function getPortFactories(){return this.portFactories}},{key:"getFactoryForNode",value:function getFactoryForNode(node){return"string"==typeof node?this.nodeFactories.getFactory(node):this.nodeFactories.getFactory(node.getType())}},{key:"getFactoryForLink",value:function getFactoryForLink(link){return"string"==typeof link?this.linkFactories.getFactory(link):this.linkFactories.getFactory(link.getType())}},{key:"getFactoryForLabel",value:function getFactoryForLabel(label){return"string"==typeof label?this.labelFactories.getFactory(label):this.labelFactories.getFactory(label.getType())}},{key:"getFactoryForPort",value:function getFactoryForPort(port){return"string"==typeof port?this.portFactories.getFactory(port):this.portFactories.getFactory(port.getType())}},{key:"generateWidgetForLink",value:function generateWidgetForLink(link){return this.getFactoryForLink(link).generateReactWidget({model:link})}},{key:"generateWidgetForNode",value:function generateWidgetForNode(node){return this.getFactoryForNode(node).generateReactWidget({model:node})}},{key:"getNodeElement",value:function getNodeElement(node){var selector=this.canvas.querySelector('.node[data-nodeid="'+node.getID()+'"]');if(null===selector)throw new Error("Cannot find Node element with nodeID: ["+node.getID()+"]");return selector}},{key:"getNodePortElement",value:function getNodePortElement(port){var selector=this.canvas.querySelector('.port[data-name="'+port.getName()+'"][data-nodeid="'+port.getParent().getID()+'"]');if(null===selector)throw new Error("Cannot find Node Port element with nodeID: ["+port.getParent().getID()+"] and name: ["+port.getName()+"]");return selector}},{key:"getPortCenter",value:function getPortCenter(port){return this.getPortCoords(port).getOrigin()}},{key:"getPortCoords",value:function getPortCoords(port,element){if(!this.canvas)throw new Error("Canvas needs to be set first");element||(element=this.getNodePortElement(port));var sourceRect=element.getBoundingClientRect(),point=this.getRelativeMousePoint({clientX:sourceRect.left,clientY:sourceRect.top}),zoom=this.model.getZoomLevel()/100;return geometry_dist.Ae.fromPointAndSize(point,sourceRect.width/zoom,sourceRect.height/zoom)}},{key:"getNodeDimensions",value:function getNodeDimensions(node){if(!this.canvas)return{width:0,height:0};var nodeRect=this.getNodeElement(node).getBoundingClientRect();return{width:nodeRect.width,height:nodeRect.height}}},{key:"getBoundingNodesRect",value:function getBoundingNodesRect(nodes){if(nodes)return 0===nodes.length?new geometry_dist.Ae:new geometry_dist.Ae((0,geometry_dist.zh)(nodes.map((function(node){return node.getBoundingBox()}))))}},{key:"zoomToFitSelectedNodes",value:function zoomToFitSelectedNodes(options){var nodes=this.model.getSelectedEntities().filter((function(entity){return entity instanceof NodeModel}));this.zoomToFitNodes({margin:options.margin,maxZoom:options.maxZoom,nodes:nodes.length>0?nodes:null})}},{key:"zoomToFitNodes",value:function zoomToFitNodes(options){var _this2=this,margin=options||0,nodes=[],maxZoom=null;options&&"object"==typeof options&&(margin=options.margin||0,nodes=options.nodes||[],maxZoom=options.maxZoom||null),0===nodes.length&&(nodes=this.model.getNodes());var nodesRect=this.getBoundingNodesRect(nodes);if(nodesRect){var canvasRect=this.canvas.getBoundingClientRect(),calculate=function calculate(){var margin=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,xFactor=_this2.canvas.clientWidth/(nodesRect.getWidth()+2*margin),yFactor=_this2.canvas.clientHeight/(nodesRect.getHeight()+2*margin),zoomFactor=xFactor<yFactor?xFactor:yFactor;return maxZoom&&zoomFactor>maxZoom&&(zoomFactor=maxZoom),{zoom:zoomFactor,x:canvasRect.width/2-((nodesRect.getWidth()+2*margin)/2+nodesRect.getTopLeft().x)*zoomFactor+margin,y:canvasRect.height/2-((nodesRect.getHeight()+2*margin)/2+nodesRect.getTopLeft().y)*zoomFactor+margin}},params=calculate(0);margin&&(params.x<margin||params.y<margin)&&(params=calculate(margin)),this.model.setZoomLevel(100*params.zoom),this.model.setOffset(params.x,params.y),this.repaintCanvas()}}},{key:"getMaxNumberPointsPerLink",value:function getMaxNumberPointsPerLink(){return this.maxNumberPointsPerLink}},{key:"setMaxNumberPointsPerLink",value:function setMaxNumberPointsPerLink(max){this.maxNumberPointsPerLink=max}}]),DiagramEngine}(dist.u1)},"../packages/react-diagrams/dist/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{z6:()=>DagreEngine,Qo:()=>dist.Qo,Py:()=>DefaultLabelModel,oQ:()=>DefaultLinkFactory,Si:()=>DefaultLinkModel,A7:()=>DefaultLinkWidget,Fs:()=>DefaultNodeModel,Gi:()=>DefaultPortModel,Vm:()=>dist.Vm,aS:()=>dist.aS,KW:()=>dist.KW,XF:()=>dist.XF,xU:()=>PathFindingLinkFactory,AJ:()=>dist.AJ,tK:()=>dist.tK,ER:()=>dist.ER,$Q:()=>RightAngleLinkFactory,C6:()=>RightAngleLinkModel,ZP:()=>react_diagrams_dist});var dist=__webpack_require__("../packages/react-diagrams-core/dist/index.js"),react=(__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.reflect.construct.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.create.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.symbol.to-primitive.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.date.to-primitive.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.symbol.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.number.constructor.js"),__webpack_require__("../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"));__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.reflect.get.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.get-own-property-descriptor.js");function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(target,property,receiver){var base=_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},_get.apply(this,arguments)}function _superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=_getPrototypeOf(object)););return object}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var _templateObject,S,DefaultLabelModel=function(_LabelModel){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(DefaultLabelModel,_LabelModel);var _super=_createSuper(DefaultLabelModel);function DefaultLabelModel(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,DefaultLabelModel),_super.call(this,Object.assign({offsetY:null==options.offsetY?-23:options.offsetY,type:"default"},options))}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DefaultLabelModel,[{key:"setLabel",value:function setLabel(label){this.options.label=label}},{key:"deserialize",value:function deserialize(event){_get(_getPrototypeOf(DefaultLabelModel.prototype),"deserialize",this).call(this,event),this.options.label=event.data.label}},{key:"serialize",value:function serialize(){return Object.assign(Object.assign({},_get(_getPrototypeOf(DefaultLabelModel.prototype),"serialize",this).call(this)),{label:this.options.label})}}]),DefaultLabelModel}(dist.aS),emotion_styled_browser_esm=(__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("../node_modules/.pnpm/@emotion+styled@11.10.5_jrh5enlbqfbnumycmktdqgd6se/node_modules/@emotion/styled/dist/emotion-styled.browser.esm.js"));function DefaultLabelWidget_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function DefaultLabelWidget_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function DefaultLabelWidget_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function DefaultLabelWidget_setPrototypeOf(o,p){return DefaultLabelWidget_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},DefaultLabelWidget_setPrototypeOf(o,p)}function DefaultLabelWidget_createSuper(Derived){var hasNativeReflectConstruct=function DefaultLabelWidget_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=DefaultLabelWidget_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DefaultLabelWidget_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DefaultLabelWidget_possibleConstructorReturn(this,result)}}function DefaultLabelWidget_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function DefaultLabelWidget_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function DefaultLabelWidget_getPrototypeOf(o){return DefaultLabelWidget_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},DefaultLabelWidget_getPrototypeOf(o)}!function(S){S.Label=emotion_styled_browser_esm.Z.div(_templateObject||(_templateObject=function _taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n\t\tbackground: rgba(0, 0, 0, 0.8);\n\t\tborder-radius: 5px;\n\t\tcolor: white;\n\t\tfont-size: 12px;\n\t\tpadding: 4px 8px;\n\t\tfont-family: sans-serif;\n\t\tuser-select: none;\n\t"])))}(S||(S={}));var DefaultLabelWidget=function(_React$Component){!function DefaultLabelWidget_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DefaultLabelWidget_setPrototypeOf(subClass,superClass)}(DefaultLabelWidget,_React$Component);var _super=DefaultLabelWidget_createSuper(DefaultLabelWidget);function DefaultLabelWidget(){return DefaultLabelWidget_classCallCheck(this,DefaultLabelWidget),_super.apply(this,arguments)}return function DefaultLabelWidget_createClass(Constructor,protoProps,staticProps){return protoProps&&DefaultLabelWidget_defineProperties(Constructor.prototype,protoProps),staticProps&&DefaultLabelWidget_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DefaultLabelWidget,[{key:"render",value:function render(){return react.createElement(S.Label,null,this.props.model.getOptions().label)}}]),DefaultLabelWidget}(react.Component),react_canvas_core_dist=__webpack_require__("../packages/react-canvas-core/dist/index.js");function DefaultLabelFactory_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function DefaultLabelFactory_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function DefaultLabelFactory_setPrototypeOf(o,p){return DefaultLabelFactory_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},DefaultLabelFactory_setPrototypeOf(o,p)}function DefaultLabelFactory_createSuper(Derived){var hasNativeReflectConstruct=function DefaultLabelFactory_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=DefaultLabelFactory_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DefaultLabelFactory_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DefaultLabelFactory_possibleConstructorReturn(this,result)}}function DefaultLabelFactory_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function DefaultLabelFactory_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function DefaultLabelFactory_getPrototypeOf(o){return DefaultLabelFactory_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},DefaultLabelFactory_getPrototypeOf(o)}var DefaultLabelFactory=function(_AbstractReactFactory){!function DefaultLabelFactory_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DefaultLabelFactory_setPrototypeOf(subClass,superClass)}(DefaultLabelFactory,_AbstractReactFactory);var _super=DefaultLabelFactory_createSuper(DefaultLabelFactory);function DefaultLabelFactory(){return function DefaultLabelFactory_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DefaultLabelFactory),_super.call(this,"default")}return function DefaultLabelFactory_createClass(Constructor,protoProps,staticProps){return protoProps&&DefaultLabelFactory_defineProperties(Constructor.prototype,protoProps),staticProps&&DefaultLabelFactory_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DefaultLabelFactory,[{key:"generateReactWidget",value:function generateReactWidget(event){return react.createElement(DefaultLabelWidget,{model:event.model})}},{key:"generateModel",value:function generateModel(event){return new DefaultLabelModel}}]),DefaultLabelFactory}(react_canvas_core_dist.a3),geometry_dist=(__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.from.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.function.name.js"),__webpack_require__("../packages/geometry/dist/index.js"));function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function DefaultLinkModel_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function DefaultLinkModel_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function DefaultLinkModel_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function DefaultLinkModel_get(){return DefaultLinkModel_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(target,property,receiver){var base=DefaultLinkModel_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},DefaultLinkModel_get.apply(this,arguments)}function DefaultLinkModel_superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=DefaultLinkModel_getPrototypeOf(object)););return object}function DefaultLinkModel_setPrototypeOf(o,p){return DefaultLinkModel_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},DefaultLinkModel_setPrototypeOf(o,p)}function DefaultLinkModel_createSuper(Derived){var hasNativeReflectConstruct=function DefaultLinkModel_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=DefaultLinkModel_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DefaultLinkModel_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DefaultLinkModel_possibleConstructorReturn(this,result)}}function DefaultLinkModel_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function DefaultLinkModel_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function DefaultLinkModel_getPrototypeOf(o){return DefaultLinkModel_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},DefaultLinkModel_getPrototypeOf(o)}var DefaultLinkPointWidget_templateObject,DefaultLinkPointWidget_S,DefaultLinkModel=function(_LinkModel){!function DefaultLinkModel_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DefaultLinkModel_setPrototypeOf(subClass,superClass)}(DefaultLinkModel,_LinkModel);var _super=DefaultLinkModel_createSuper(DefaultLinkModel);function DefaultLinkModel(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return DefaultLinkModel_classCallCheck(this,DefaultLinkModel),_super.call(this,Object.assign({type:"default",width:options.width||3,color:options.color||"gray",selectedColor:options.selectedColor||"rgb(0,192,255)",curvyness:50},options))}return function DefaultLinkModel_createClass(Constructor,protoProps,staticProps){return protoProps&&DefaultLinkModel_defineProperties(Constructor.prototype,protoProps),staticProps&&DefaultLinkModel_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DefaultLinkModel,[{key:"calculateControlOffset",value:function calculateControlOffset(port){return port.getOptions().alignment===dist.tK.RIGHT?[this.options.curvyness,0]:port.getOptions().alignment===dist.tK.LEFT?[-this.options.curvyness,0]:port.getOptions().alignment===dist.tK.TOP?[0,-this.options.curvyness]:[0,this.options.curvyness]}},{key:"getSVGPath",value:function getSVGPath(){if(2==this.points.length){var _curve$getSourceContr,_curve$getTargetContr,curve=new geometry_dist.hr;if(curve.setSource(this.getFirstPoint().getPosition()),curve.setTarget(this.getLastPoint().getPosition()),curve.setSourceControl(this.getFirstPoint().getPosition().clone()),curve.setTargetControl(this.getLastPoint().getPosition().clone()),this.sourcePort)(_curve$getSourceContr=curve.getSourceControl()).translate.apply(_curve$getSourceContr,_toConsumableArray(this.calculateControlOffset(this.getSourcePort())));if(this.targetPort)(_curve$getTargetContr=curve.getTargetControl()).translate.apply(_curve$getTargetContr,_toConsumableArray(this.calculateControlOffset(this.getTargetPort())));return curve.getSVGCurve()}}},{key:"serialize",value:function serialize(){return Object.assign(Object.assign({},DefaultLinkModel_get(DefaultLinkModel_getPrototypeOf(DefaultLinkModel.prototype),"serialize",this).call(this)),{width:this.options.width,color:this.options.color,curvyness:this.options.curvyness,selectedColor:this.options.selectedColor})}},{key:"deserialize",value:function deserialize(event){DefaultLinkModel_get(DefaultLinkModel_getPrototypeOf(DefaultLinkModel.prototype),"deserialize",this).call(this,event),this.options.color=event.data.color,this.options.width=event.data.width,this.options.curvyness=event.data.curvyness,this.options.selectedColor=event.data.selectedColor}},{key:"addLabel",value:function addLabel(label){if(label instanceof dist.aS)return DefaultLinkModel_get(DefaultLinkModel_getPrototypeOf(DefaultLinkModel.prototype),"addLabel",this).call(this,label);var labelOb=new DefaultLabelModel;return labelOb.setLabel(label),DefaultLinkModel_get(DefaultLinkModel_getPrototypeOf(DefaultLinkModel.prototype),"addLabel",this).call(this,labelOb)}},{key:"setWidth",value:function setWidth(width){this.options.width=width,this.fireEvent({width},"widthChanged")}},{key:"setColor",value:function setColor(color){this.options.color=color,this.fireEvent({color},"colorChanged")}}]),DefaultLinkModel}(dist.KW);__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.string.link.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.map.js");function DefaultLinkPointWidget_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function DefaultLinkPointWidget_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function DefaultLinkPointWidget_setPrototypeOf(o,p){return DefaultLinkPointWidget_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},DefaultLinkPointWidget_setPrototypeOf(o,p)}function DefaultLinkPointWidget_createSuper(Derived){var hasNativeReflectConstruct=function DefaultLinkPointWidget_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=DefaultLinkPointWidget_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DefaultLinkPointWidget_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DefaultLinkPointWidget_possibleConstructorReturn(this,result)}}function DefaultLinkPointWidget_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function DefaultLinkPointWidget_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function DefaultLinkPointWidget_getPrototypeOf(o){return DefaultLinkPointWidget_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},DefaultLinkPointWidget_getPrototypeOf(o)}!function(S){S.PointTop=emotion_styled_browser_esm.Z.circle(DefaultLinkPointWidget_templateObject||(DefaultLinkPointWidget_templateObject=function DefaultLinkPointWidget_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n\t\tpointer-events: all;\n\t"])))}(DefaultLinkPointWidget_S||(DefaultLinkPointWidget_S={}));var DefaultLinkPointWidget=function(_React$Component){!function DefaultLinkPointWidget_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DefaultLinkPointWidget_setPrototypeOf(subClass,superClass)}(DefaultLinkPointWidget,_React$Component);var _super=DefaultLinkPointWidget_createSuper(DefaultLinkPointWidget);function DefaultLinkPointWidget(props){var _this;return function DefaultLinkPointWidget_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DefaultLinkPointWidget),(_this=_super.call(this,props)).state={selected:!1},_this}return function DefaultLinkPointWidget_createClass(Constructor,protoProps,staticProps){return protoProps&&DefaultLinkPointWidget_defineProperties(Constructor.prototype,protoProps),staticProps&&DefaultLinkPointWidget_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DefaultLinkPointWidget,[{key:"render",value:function render(){var _this2=this,point=this.props.point;return react.createElement("g",null,react.createElement("circle",{cx:point.getPosition().x,cy:point.getPosition().y,r:5,fill:this.state.selected||this.props.point.isSelected()?this.props.colorSelected:this.props.color}),react.createElement(DefaultLinkPointWidget_S.PointTop,{className:"point",onMouseLeave:function onMouseLeave(){_this2.setState({selected:!1})},onMouseEnter:function onMouseEnter(){_this2.setState({selected:!0})},"data-id":point.getID(),"data-linkid":point.getLink().getID(),cx:point.getPosition().x,cy:point.getPosition().y,r:15,opacity:0}))}}]),DefaultLinkPointWidget}(react.Component);function DefaultLinkSegmentWidget_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function DefaultLinkSegmentWidget_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function DefaultLinkSegmentWidget_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function DefaultLinkSegmentWidget_setPrototypeOf(o,p){return DefaultLinkSegmentWidget_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},DefaultLinkSegmentWidget_setPrototypeOf(o,p)}function DefaultLinkSegmentWidget_createSuper(Derived){var hasNativeReflectConstruct=function DefaultLinkSegmentWidget_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=DefaultLinkSegmentWidget_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DefaultLinkSegmentWidget_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DefaultLinkSegmentWidget_possibleConstructorReturn(this,result)}}function DefaultLinkSegmentWidget_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function DefaultLinkSegmentWidget_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function DefaultLinkSegmentWidget_getPrototypeOf(o){return DefaultLinkSegmentWidget_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},DefaultLinkSegmentWidget_getPrototypeOf(o)}var DefaultLinkSegmentWidget=function(_React$Component){!function DefaultLinkSegmentWidget_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DefaultLinkSegmentWidget_setPrototypeOf(subClass,superClass)}(DefaultLinkSegmentWidget,_React$Component);var _super=DefaultLinkSegmentWidget_createSuper(DefaultLinkSegmentWidget);function DefaultLinkSegmentWidget(){return DefaultLinkSegmentWidget_classCallCheck(this,DefaultLinkSegmentWidget),_super.apply(this,arguments)}return function DefaultLinkSegmentWidget_createClass(Constructor,protoProps,staticProps){return protoProps&&DefaultLinkSegmentWidget_defineProperties(Constructor.prototype,protoProps),staticProps&&DefaultLinkSegmentWidget_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DefaultLinkSegmentWidget,[{key:"render",value:function render(){var _this=this,Bottom=react.cloneElement(this.props.factory.generateLinkSegment(this.props.link,this.props.selected||this.props.link.isSelected(),this.props.path),{ref:this.props.forwardRef}),Top=react.cloneElement(Bottom,Object.assign(Object.assign({strokeLinecap:"round",onMouseLeave:function onMouseLeave(){_this.props.onSelection(!1)},onMouseEnter:function onMouseEnter(){_this.props.onSelection(!0)}},this.props.extras),{ref:null,"data-linkid":this.props.link.getID(),strokeOpacity:this.props.selected?.1:0,strokeWidth:20,fill:"none",onContextMenu:function onContextMenu(){_this.props.link.isLocked()||(event.preventDefault(),_this.props.link.remove())}}));return react.createElement("g",null,Bottom,Top)}}]),DefaultLinkSegmentWidget}(react.Component);function DefaultLinkWidget_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function DefaultLinkWidget_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function DefaultLinkWidget_setPrototypeOf(o,p){return DefaultLinkWidget_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},DefaultLinkWidget_setPrototypeOf(o,p)}function DefaultLinkWidget_createSuper(Derived){var hasNativeReflectConstruct=function DefaultLinkWidget_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=DefaultLinkWidget_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DefaultLinkWidget_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DefaultLinkWidget_possibleConstructorReturn(this,result)}}function DefaultLinkWidget_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function DefaultLinkWidget_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function DefaultLinkWidget_getPrototypeOf(o){return DefaultLinkWidget_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},DefaultLinkWidget_getPrototypeOf(o)}var DefaultLinkFactory_templateObject,_templateObject2,_templateObject3,DefaultLinkFactory_S,DefaultLinkWidget=function(_React$Component){!function DefaultLinkWidget_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DefaultLinkWidget_setPrototypeOf(subClass,superClass)}(DefaultLinkWidget,_React$Component);var _super=DefaultLinkWidget_createSuper(DefaultLinkWidget);function DefaultLinkWidget(props){var _this;return function DefaultLinkWidget_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DefaultLinkWidget),(_this=_super.call(this,props)).refPaths=[],_this.state={selected:!1},_this}return function DefaultLinkWidget_createClass(Constructor,protoProps,staticProps){return protoProps&&DefaultLinkWidget_defineProperties(Constructor.prototype,protoProps),staticProps&&DefaultLinkWidget_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DefaultLinkWidget,[{key:"renderPoints",value:function renderPoints(){var _a;return null===(_a=this.props.renderPoints)||void 0===_a||_a}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.props.link.setRenderedPaths(this.refPaths.map((function(ref){return ref.current})))}},{key:"componentDidMount",value:function componentDidMount(){this.props.link.setRenderedPaths(this.refPaths.map((function(ref){return ref.current})))}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.props.link.setRenderedPaths([])}},{key:"addPointToLink",value:function addPointToLink(event,index){var _this2=this;if(!event.shiftKey&&!this.props.link.isLocked()&&this.props.link.getPoints().length-1<=this.props.diagramEngine.getMaxNumberPointsPerLink()){var position=this.props.diagramEngine.getRelativeMousePoint(event),point=this.props.link.point(position.x,position.y,index);event.persist(),event.stopPropagation(),this.forceUpdate((function(){_this2.props.diagramEngine.getActionEventBus().fireAction({event,model:point})}))}}},{key:"generatePoint",value:function generatePoint(point){return react.createElement(DefaultLinkPointWidget,{key:point.getID(),point,colorSelected:this.props.link.getOptions().selectedColor,color:this.props.link.getOptions().color})}},{key:"generateLink",value:function generateLink(path,extraProps,id){var _this3=this,ref=react.createRef();return this.refPaths.push(ref),react.createElement(DefaultLinkSegmentWidget,{key:"link-"+id,path,selected:this.state.selected,diagramEngine:this.props.diagramEngine,factory:this.props.diagramEngine.getFactoryForLink(this.props.link),link:this.props.link,forwardRef:ref,onSelection:function onSelection(selected){_this3.setState({selected})},extras:extraProps})}},{key:"render",value:function render(){var _this4=this,points=this.props.link.getPoints(),paths=[];if(this.refPaths=[],2===points.length)paths.push(this.generateLink(this.props.link.getSVGPath(),{onMouseDown:function onMouseDown(event){var _a,_b;null===(_b=(_a=_this4.props).selected)||void 0===_b||_b.call(_a,event),_this4.addPointToLink(event,1)}},"0")),null==this.props.link.getTargetPort()&&paths.push(this.generatePoint(points[1]));else{for(var _loop=function _loop(j){paths.push(_this4.generateLink(dist.hL.generateLinePath(points[j],points[j+1]),{"data-linkid":_this4.props.link.getID(),"data-point":j,onMouseDown:function onMouseDown(event){var _a,_b;null===(_b=(_a=_this4.props).selected)||void 0===_b||_b.call(_a,event),_this4.addPointToLink(event,j+1)}},j))},j=0;j<points.length-1;j++)_loop(j);if(this.renderPoints()){for(var i=1;i<points.length-1;i++)paths.push(this.generatePoint(points[i]));null==this.props.link.getTargetPort()&&paths.push(this.generatePoint(points[points.length-1]))}}return react.createElement("g",{"data-default-link-test":this.props.link.getOptions().testName},paths)}}]),DefaultLinkWidget}(react.Component),emotion_react_browser_esm=__webpack_require__("../node_modules/.pnpm/@emotion+react@11.10.5_3stiutgnnbnfnf3uowm5cip22i/node_modules/@emotion/react/dist/emotion-react.browser.esm.js");function DefaultLinkFactory_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function DefaultLinkFactory_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function DefaultLinkFactory_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function DefaultLinkFactory_setPrototypeOf(o,p){return DefaultLinkFactory_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},DefaultLinkFactory_setPrototypeOf(o,p)}function DefaultLinkFactory_createSuper(Derived){var hasNativeReflectConstruct=function DefaultLinkFactory_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=DefaultLinkFactory_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DefaultLinkFactory_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DefaultLinkFactory_possibleConstructorReturn(this,result)}}function DefaultLinkFactory_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function DefaultLinkFactory_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function DefaultLinkFactory_getPrototypeOf(o){return DefaultLinkFactory_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},DefaultLinkFactory_getPrototypeOf(o)}function DefaultLinkFactory_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}!function(S){S.Keyframes=(0,emotion_react_browser_esm.F4)(DefaultLinkFactory_templateObject||(DefaultLinkFactory_templateObject=DefaultLinkFactory_taggedTemplateLiteralLoose(["\n\t\tfrom {\n\t\t\tstroke-dashoffset: 24;\n\t\t}\n\t\tto {\n\t\t\tstroke-dashoffset: 0;\n\t\t}\n\t"])));var selected=(0,emotion_react_browser_esm.iv)(_templateObject2||(_templateObject2=DefaultLinkFactory_taggedTemplateLiteralLoose(["\n\t\tstroke-dasharray: 10, 2;\n\t\tanimation: "," 1s linear infinite;\n\t"])),S.Keyframes);S.Path=emotion_styled_browser_esm.Z.path(_templateObject3||(_templateObject3=DefaultLinkFactory_taggedTemplateLiteralLoose(["\n\t\t",";\n\t\tfill: none;\n\t\tpointer-events: auto;\n\t"])),(function(p){return p.selected&&selected}))}(DefaultLinkFactory_S||(DefaultLinkFactory_S={}));var DefaultLinkFactory=function(_AbstractReactFactory){!function DefaultLinkFactory_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DefaultLinkFactory_setPrototypeOf(subClass,superClass)}(DefaultLinkFactory,_AbstractReactFactory);var _super=DefaultLinkFactory_createSuper(DefaultLinkFactory);function DefaultLinkFactory(){var type=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return DefaultLinkFactory_classCallCheck(this,DefaultLinkFactory),_super.call(this,type)}return function DefaultLinkFactory_createClass(Constructor,protoProps,staticProps){return protoProps&&DefaultLinkFactory_defineProperties(Constructor.prototype,protoProps),staticProps&&DefaultLinkFactory_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DefaultLinkFactory,[{key:"generateReactWidget",value:function generateReactWidget(event){return react.createElement(DefaultLinkWidget,{link:event.model,diagramEngine:this.engine})}},{key:"generateModel",value:function generateModel(event){return new DefaultLinkModel}},{key:"generateLinkSegment",value:function generateLinkSegment(model,selected,path){return react.createElement(DefaultLinkFactory_S.Path,{selected,stroke:selected?model.getOptions().selectedColor:model.getOptions().color,strokeWidth:model.getOptions().width,d:path})}}]),DefaultLinkFactory}(react_canvas_core_dist.a3),lodash=(__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.splice.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("../node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/lodash.js"));function DefaultPortModel_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function DefaultPortModel_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function DefaultPortModel_get(){return DefaultPortModel_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(target,property,receiver){var base=DefaultPortModel_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},DefaultPortModel_get.apply(this,arguments)}function DefaultPortModel_superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=DefaultPortModel_getPrototypeOf(object)););return object}function DefaultPortModel_setPrototypeOf(o,p){return DefaultPortModel_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},DefaultPortModel_setPrototypeOf(o,p)}function DefaultPortModel_createSuper(Derived){var hasNativeReflectConstruct=function DefaultPortModel_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=DefaultPortModel_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DefaultPortModel_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DefaultPortModel_possibleConstructorReturn(this,result)}}function DefaultPortModel_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function DefaultPortModel_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function DefaultPortModel_getPrototypeOf(o){return DefaultPortModel_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},DefaultPortModel_getPrototypeOf(o)}var DefaultPortModel=function(_PortModel){!function DefaultPortModel_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DefaultPortModel_setPrototypeOf(subClass,superClass)}(DefaultPortModel,_PortModel);var _super=DefaultPortModel_createSuper(DefaultPortModel);function DefaultPortModel(options,name,label){return function DefaultPortModel_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DefaultPortModel),name&&(options={in:!!options,name,label}),_super.call(this,Object.assign({label:options.label||options.name,alignment:options.in?dist.tK.LEFT:dist.tK.RIGHT,type:"default"},options))}return function DefaultPortModel_createClass(Constructor,protoProps,staticProps){return protoProps&&DefaultPortModel_defineProperties(Constructor.prototype,protoProps),staticProps&&DefaultPortModel_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DefaultPortModel,[{key:"deserialize",value:function deserialize(event){DefaultPortModel_get(DefaultPortModel_getPrototypeOf(DefaultPortModel.prototype),"deserialize",this).call(this,event),this.options.in=event.data.in,this.options.label=event.data.label}},{key:"serialize",value:function serialize(){return Object.assign(Object.assign({},DefaultPortModel_get(DefaultPortModel_getPrototypeOf(DefaultPortModel.prototype),"serialize",this).call(this)),{in:this.options.in,label:this.options.label})}},{key:"link",value:function link(port,factory){var link=this.createLinkModel(factory);return link.setSourcePort(this),link.setTargetPort(port),link}},{key:"canLinkToPort",value:function canLinkToPort(port){return!(port instanceof DefaultPortModel)||this.options.in!==port.getOptions().in}},{key:"createLinkModel",value:function createLinkModel(factory){var link=DefaultPortModel_get(DefaultPortModel_getPrototypeOf(DefaultPortModel.prototype),"createLinkModel",this).call(this);return!link&&factory?factory.generateModel({}):link||new DefaultLinkModel}}]),DefaultPortModel}(dist.AJ);function DefaultNodeModel_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function DefaultNodeModel_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function DefaultNodeModel_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function DefaultNodeModel_get(){return DefaultNodeModel_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(target,property,receiver){var base=DefaultNodeModel_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},DefaultNodeModel_get.apply(this,arguments)}function DefaultNodeModel_superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=DefaultNodeModel_getPrototypeOf(object)););return object}function DefaultNodeModel_setPrototypeOf(o,p){return DefaultNodeModel_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},DefaultNodeModel_setPrototypeOf(o,p)}function DefaultNodeModel_createSuper(Derived){var hasNativeReflectConstruct=function DefaultNodeModel_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=DefaultNodeModel_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DefaultNodeModel_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DefaultNodeModel_possibleConstructorReturn(this,result)}}function DefaultNodeModel_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function DefaultNodeModel_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function DefaultNodeModel_getPrototypeOf(o){return DefaultNodeModel_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},DefaultNodeModel_getPrototypeOf(o)}var DefaultPortLabelWidget_templateObject,DefaultPortLabelWidget_templateObject2,DefaultPortLabelWidget_templateObject3,DefaultPortLabelWidget_S,DefaultNodeModel=function(_NodeModel){!function DefaultNodeModel_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DefaultNodeModel_setPrototypeOf(subClass,superClass)}(DefaultNodeModel,_NodeModel);var _super=DefaultNodeModel_createSuper(DefaultNodeModel);function DefaultNodeModel(){var _this,options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},color=arguments.length>1?arguments[1]:void 0;return DefaultNodeModel_classCallCheck(this,DefaultNodeModel),"string"==typeof options&&(options={name:options,color}),(_this=_super.call(this,Object.assign({type:"default",name:"Untitled",color:"rgb(0,192,255)"},options))).portsOut=[],_this.portsIn=[],_this}return function DefaultNodeModel_createClass(Constructor,protoProps,staticProps){return protoProps&&DefaultNodeModel_defineProperties(Constructor.prototype,protoProps),staticProps&&DefaultNodeModel_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DefaultNodeModel,[{key:"doClone",value:function doClone(lookupTable,clone){clone.portsIn=[],clone.portsOut=[],DefaultNodeModel_get(DefaultNodeModel_getPrototypeOf(DefaultNodeModel.prototype),"doClone",this).call(this,lookupTable,clone)}},{key:"removePort",value:function removePort(port){DefaultNodeModel_get(DefaultNodeModel_getPrototypeOf(DefaultNodeModel.prototype),"removePort",this).call(this,port),port.getOptions().in?this.portsIn.splice(this.portsIn.indexOf(port),1):this.portsOut.splice(this.portsOut.indexOf(port),1)}},{key:"addPort",value:function addPort(port){return DefaultNodeModel_get(DefaultNodeModel_getPrototypeOf(DefaultNodeModel.prototype),"addPort",this).call(this,port),port.getOptions().in?-1===this.portsIn.indexOf(port)&&this.portsIn.push(port):-1===this.portsOut.indexOf(port)&&this.portsOut.push(port),port}},{key:"addInPort",value:function addInPort(label){var after=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],p=new DefaultPortModel({in:!0,name:label,label,alignment:dist.tK.LEFT});return after||this.portsIn.splice(0,0,p),this.addPort(p)}},{key:"addOutPort",value:function addOutPort(label){var after=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],p=new DefaultPortModel({in:!1,name:label,label,alignment:dist.tK.RIGHT});return after||this.portsOut.splice(0,0,p),this.addPort(p)}},{key:"deserialize",value:function deserialize(event){var _this2=this;DefaultNodeModel_get(DefaultNodeModel_getPrototypeOf(DefaultNodeModel.prototype),"deserialize",this).call(this,event),this.options.name=event.data.name,this.options.color=event.data.color,this.portsIn=lodash.map(event.data.portsInOrder,(function(id){return _this2.getPortFromID(id)})),this.portsOut=lodash.map(event.data.portsOutOrder,(function(id){return _this2.getPortFromID(id)}))}},{key:"serialize",value:function serialize(){return Object.assign(Object.assign({},DefaultNodeModel_get(DefaultNodeModel_getPrototypeOf(DefaultNodeModel.prototype),"serialize",this).call(this)),{name:this.options.name,color:this.options.color,portsInOrder:lodash.map(this.portsIn,(function(port){return port.getID()})),portsOutOrder:lodash.map(this.portsOut,(function(port){return port.getID()}))})}},{key:"getInPorts",value:function getInPorts(){return this.portsIn}},{key:"getOutPorts",value:function getOutPorts(){return this.portsOut}}]),DefaultNodeModel}(dist.XF);function DefaultPortLabelWidget_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function DefaultPortLabelWidget_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function DefaultPortLabelWidget_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function DefaultPortLabelWidget_setPrototypeOf(o,p){return DefaultPortLabelWidget_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},DefaultPortLabelWidget_setPrototypeOf(o,p)}function DefaultPortLabelWidget_createSuper(Derived){var hasNativeReflectConstruct=function DefaultPortLabelWidget_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=DefaultPortLabelWidget_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DefaultPortLabelWidget_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DefaultPortLabelWidget_possibleConstructorReturn(this,result)}}function DefaultPortLabelWidget_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function DefaultPortLabelWidget_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function DefaultPortLabelWidget_getPrototypeOf(o){return DefaultPortLabelWidget_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},DefaultPortLabelWidget_getPrototypeOf(o)}function DefaultPortLabelWidget_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}!function(S){S.PortLabel=emotion_styled_browser_esm.Z.div(DefaultPortLabelWidget_templateObject||(DefaultPortLabelWidget_templateObject=DefaultPortLabelWidget_taggedTemplateLiteralLoose(["\n\t\tdisplay: flex;\n\t\tmargin-top: 1px;\n\t\talign-items: center;\n\t"]))),S.Label=emotion_styled_browser_esm.Z.div(DefaultPortLabelWidget_templateObject2||(DefaultPortLabelWidget_templateObject2=DefaultPortLabelWidget_taggedTemplateLiteralLoose(["\n\t\tpadding: 0 5px;\n\t\tflex-grow: 1;\n\t"]))),S.Port=emotion_styled_browser_esm.Z.div(DefaultPortLabelWidget_templateObject3||(DefaultPortLabelWidget_templateObject3=DefaultPortLabelWidget_taggedTemplateLiteralLoose(["\n\t\twidth: 15px;\n\t\theight: 15px;\n\t\tbackground: rgba(255, 255, 255, 0.1);\n\n\t\t&:hover {\n\t\t\tbackground: rgb(192, 255, 0);\n\t\t}\n\t"])))}(DefaultPortLabelWidget_S||(DefaultPortLabelWidget_S={}));var DefaultNodeWidget_templateObject,DefaultNodeWidget_templateObject2,DefaultNodeWidget_templateObject3,_templateObject4,_templateObject5,DefaultNodeWidget_S,DefaultPortLabel=function(_React$Component){!function DefaultPortLabelWidget_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DefaultPortLabelWidget_setPrototypeOf(subClass,superClass)}(DefaultPortLabel,_React$Component);var _super=DefaultPortLabelWidget_createSuper(DefaultPortLabel);function DefaultPortLabel(){return DefaultPortLabelWidget_classCallCheck(this,DefaultPortLabel),_super.apply(this,arguments)}return function DefaultPortLabelWidget_createClass(Constructor,protoProps,staticProps){return protoProps&&DefaultPortLabelWidget_defineProperties(Constructor.prototype,protoProps),staticProps&&DefaultPortLabelWidget_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DefaultPortLabel,[{key:"render",value:function render(){var port=react.createElement(dist.ER,{engine:this.props.engine,port:this.props.port},react.createElement(DefaultPortLabelWidget_S.Port,null)),label=react.createElement(DefaultPortLabelWidget_S.Label,null,this.props.port.getOptions().label);return react.createElement(DefaultPortLabelWidget_S.PortLabel,null,this.props.port.getOptions().in?port:label,this.props.port.getOptions().in?label:port)}}]),DefaultPortLabel}(react.Component);function DefaultNodeWidget_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function DefaultNodeWidget_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function DefaultNodeWidget_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function DefaultNodeWidget_setPrototypeOf(o,p){return DefaultNodeWidget_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},DefaultNodeWidget_setPrototypeOf(o,p)}function DefaultNodeWidget_createSuper(Derived){var hasNativeReflectConstruct=function DefaultNodeWidget_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=DefaultNodeWidget_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DefaultNodeWidget_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DefaultNodeWidget_possibleConstructorReturn(this,result)}}function DefaultNodeWidget_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function DefaultNodeWidget_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function DefaultNodeWidget_getPrototypeOf(o){return DefaultNodeWidget_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},DefaultNodeWidget_getPrototypeOf(o)}function DefaultNodeWidget_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}!function(S){S.Node=emotion_styled_browser_esm.Z.div(DefaultNodeWidget_templateObject||(DefaultNodeWidget_templateObject=DefaultNodeWidget_taggedTemplateLiteralLoose(["\n\t\tbackground-color: ",";\n\t\tborder-radius: 5px;\n\t\tfont-family: sans-serif;\n\t\tcolor: white;\n\t\tborder: solid 2px black;\n\t\toverflow: visible;\n\t\tfont-size: 11px;\n\t\tborder: solid 2px ",";\n\t"])),(function(p){return p.background}),(function(p){return p.selected?"rgb(0,192,255)":"black"})),S.Title=emotion_styled_browser_esm.Z.div(DefaultNodeWidget_templateObject2||(DefaultNodeWidget_templateObject2=DefaultNodeWidget_taggedTemplateLiteralLoose(["\n\t\tbackground: rgba(0, 0, 0, 0.3);\n\t\tdisplay: flex;\n\t\twhite-space: nowrap;\n\t\tjustify-items: center;\n\t"]))),S.TitleName=emotion_styled_browser_esm.Z.div(DefaultNodeWidget_templateObject3||(DefaultNodeWidget_templateObject3=DefaultNodeWidget_taggedTemplateLiteralLoose(["\n\t\tflex-grow: 1;\n\t\tpadding: 5px 5px;\n\t"]))),S.Ports=emotion_styled_browser_esm.Z.div(_templateObject4||(_templateObject4=DefaultNodeWidget_taggedTemplateLiteralLoose(["\n\t\tdisplay: flex;\n\t\tbackground-image: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2));\n\t"]))),S.PortsContainer=emotion_styled_browser_esm.Z.div(_templateObject5||(_templateObject5=DefaultNodeWidget_taggedTemplateLiteralLoose(["\n\t\tflex-grow: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\n\t\t&:first-of-type {\n\t\t\tmargin-right: 10px;\n\t\t}\n\n\t\t&:only-child {\n\t\t\tmargin-right: 0px;\n\t\t}\n\t"])))}(DefaultNodeWidget_S||(DefaultNodeWidget_S={}));var DefaultNodeWidget=function(_React$Component){!function DefaultNodeWidget_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DefaultNodeWidget_setPrototypeOf(subClass,superClass)}(DefaultNodeWidget,_React$Component);var _super=DefaultNodeWidget_createSuper(DefaultNodeWidget);function DefaultNodeWidget(){var _this;return DefaultNodeWidget_classCallCheck(this,DefaultNodeWidget),(_this=_super.apply(this,arguments)).generatePort=function(port){return react.createElement(DefaultPortLabel,{engine:_this.props.engine,port,key:port.getID()})},_this}return function DefaultNodeWidget_createClass(Constructor,protoProps,staticProps){return protoProps&&DefaultNodeWidget_defineProperties(Constructor.prototype,protoProps),staticProps&&DefaultNodeWidget_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DefaultNodeWidget,[{key:"render",value:function render(){return react.createElement(DefaultNodeWidget_S.Node,{"data-default-node-name":this.props.node.getOptions().name,selected:this.props.node.isSelected(),background:this.props.node.getOptions().color},react.createElement(DefaultNodeWidget_S.Title,null,react.createElement(DefaultNodeWidget_S.TitleName,null,this.props.node.getOptions().name)),react.createElement(DefaultNodeWidget_S.Ports,null,react.createElement(DefaultNodeWidget_S.PortsContainer,null,lodash.map(this.props.node.getInPorts(),this.generatePort)),react.createElement(DefaultNodeWidget_S.PortsContainer,null,lodash.map(this.props.node.getOutPorts(),this.generatePort))))}}]),DefaultNodeWidget}(react.Component);function DefaultNodeFactory_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function DefaultNodeFactory_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function DefaultNodeFactory_setPrototypeOf(o,p){return DefaultNodeFactory_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},DefaultNodeFactory_setPrototypeOf(o,p)}function DefaultNodeFactory_createSuper(Derived){var hasNativeReflectConstruct=function DefaultNodeFactory_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=DefaultNodeFactory_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DefaultNodeFactory_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DefaultNodeFactory_possibleConstructorReturn(this,result)}}function DefaultNodeFactory_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function DefaultNodeFactory_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function DefaultNodeFactory_getPrototypeOf(o){return DefaultNodeFactory_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},DefaultNodeFactory_getPrototypeOf(o)}var DefaultNodeFactory=function(_AbstractReactFactory){!function DefaultNodeFactory_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DefaultNodeFactory_setPrototypeOf(subClass,superClass)}(DefaultNodeFactory,_AbstractReactFactory);var _super=DefaultNodeFactory_createSuper(DefaultNodeFactory);function DefaultNodeFactory(){return function DefaultNodeFactory_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DefaultNodeFactory),_super.call(this,"default")}return function DefaultNodeFactory_createClass(Constructor,protoProps,staticProps){return protoProps&&DefaultNodeFactory_defineProperties(Constructor.prototype,protoProps),staticProps&&DefaultNodeFactory_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DefaultNodeFactory,[{key:"generateReactWidget",value:function generateReactWidget(event){return react.createElement(DefaultNodeWidget,{engine:this.engine,node:event.model})}},{key:"generateModel",value:function generateModel(event){return new DefaultNodeModel}}]),DefaultNodeFactory}(react_canvas_core_dist.a3);function DefaultPortFactory_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function DefaultPortFactory_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function DefaultPortFactory_setPrototypeOf(o,p){return DefaultPortFactory_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},DefaultPortFactory_setPrototypeOf(o,p)}function DefaultPortFactory_createSuper(Derived){var hasNativeReflectConstruct=function DefaultPortFactory_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=DefaultPortFactory_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DefaultPortFactory_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DefaultPortFactory_possibleConstructorReturn(this,result)}}function DefaultPortFactory_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function DefaultPortFactory_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function DefaultPortFactory_getPrototypeOf(o){return DefaultPortFactory_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},DefaultPortFactory_getPrototypeOf(o)}var DefaultPortFactory=function(_AbstractModelFactory){!function DefaultPortFactory_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DefaultPortFactory_setPrototypeOf(subClass,superClass)}(DefaultPortFactory,_AbstractModelFactory);var _super=DefaultPortFactory_createSuper(DefaultPortFactory);function DefaultPortFactory(){return function DefaultPortFactory_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DefaultPortFactory),_super.call(this,"default")}return function DefaultPortFactory_createClass(Constructor,protoProps,staticProps){return protoProps&&DefaultPortFactory_defineProperties(Constructor.prototype,protoProps),staticProps&&DefaultPortFactory_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DefaultPortFactory,[{key:"generateModel",value:function generateModel(){return new DefaultPortModel({name:"unknown"})}}]),DefaultPortFactory}(react_canvas_core_dist.Zi);__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.concat.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.fill.js");function PathFindingLinkModel_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function PathFindingLinkModel_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function PathFindingLinkModel_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function PathFindingLinkModel_setPrototypeOf(o,p){return PathFindingLinkModel_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},PathFindingLinkModel_setPrototypeOf(o,p)}function PathFindingLinkModel_createSuper(Derived){var hasNativeReflectConstruct=function PathFindingLinkModel_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=PathFindingLinkModel_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=PathFindingLinkModel_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return PathFindingLinkModel_possibleConstructorReturn(this,result)}}function PathFindingLinkModel_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function PathFindingLinkModel_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function PathFindingLinkModel_getPrototypeOf(o){return PathFindingLinkModel_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},PathFindingLinkModel_getPrototypeOf(o)}var PathFindingLinkModel=function(_DefaultLinkModel){!function PathFindingLinkModel_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&PathFindingLinkModel_setPrototypeOf(subClass,superClass)}(PathFindingLinkModel,_DefaultLinkModel);var _super=PathFindingLinkModel_createSuper(PathFindingLinkModel);function PathFindingLinkModel(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return PathFindingLinkModel_classCallCheck(this,PathFindingLinkModel),_super.call(this,Object.assign({type:PathFindingLinkFactory.NAME},options))}return function PathFindingLinkModel_createClass(Constructor,protoProps,staticProps){return protoProps&&PathFindingLinkModel_defineProperties(Constructor.prototype,protoProps),staticProps&&PathFindingLinkModel_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(PathFindingLinkModel,[{key:"performanceTune",value:function performanceTune(){return!1}}]),PathFindingLinkModel}(DefaultLinkModel),pathfinding=(__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.find-index.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.reverse.js"),__webpack_require__("../node_modules/.pnpm/pathfinding@0.4.18/node_modules/pathfinding/index.js"));function PathFinding_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function PathFinding_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}var pathFinderInstance=new pathfinding.JumpPointFinder({heuristic:pathfinding.Heuristic.manhattan,diagonalMovement:pathfinding.DiagonalMovement.Never}),PathFinding=function(){function PathFinding(factory){!function PathFinding_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PathFinding),this.instance=pathFinderInstance,this.factory=factory}return function PathFinding_createClass(Constructor,protoProps,staticProps){return protoProps&&PathFinding_defineProperties(Constructor.prototype,protoProps),staticProps&&PathFinding_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(PathFinding,[{key:"calculateDirectPath",value:function calculateDirectPath(from,to){var matrix=this.factory.getCanvasMatrix(),grid=new pathfinding.Grid(matrix);return pathFinderInstance.findPath(this.factory.translateRoutingX(Math.floor(from.getX()/this.factory.ROUTING_SCALING_FACTOR)),this.factory.translateRoutingY(Math.floor(from.getY()/this.factory.ROUTING_SCALING_FACTOR)),this.factory.translateRoutingX(Math.floor(to.getX()/this.factory.ROUTING_SCALING_FACTOR)),this.factory.translateRoutingY(Math.floor(to.getY()/this.factory.ROUTING_SCALING_FACTOR)),grid)}},{key:"calculateLinkStartEndCoords",value:function calculateLinkStartEndCoords(matrix,path){var startIndex=path.findIndex((function(point){return!!matrix[point[1]]&&0===matrix[point[1]][point[0]]})),endIndex=path.length-1-path.slice().reverse().findIndex((function(point){return!!matrix[point[1]]&&0===matrix[point[1]][point[0]]}));if(-1!==startIndex&&-1!==endIndex){var pathToStart=path.slice(0,startIndex),pathToEnd=path.slice(endIndex);return{start:{x:path[startIndex][0],y:path[startIndex][1]},end:{x:path[endIndex][0],y:path[endIndex][1]},pathToStart,pathToEnd}}}},{key:"calculateDynamicPath",value:function calculateDynamicPath(routingMatrix,start,end,pathToStart,pathToEnd){var _this=this,grid=new pathfinding.Grid(routingMatrix),dynamicPath=pathFinderInstance.findPath(start.x,start.y,end.x,end.y,grid),pathCoords=pathToStart.concat(dynamicPath,pathToEnd).map((function(coords){return[_this.factory.translateRoutingX(coords[0],!0),_this.factory.translateRoutingY(coords[1],!0)]}));return pathfinding.Util.compressPath(pathCoords)}}]),PathFinding}();function PathFindingLinkWidget_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function PathFindingLinkWidget_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function PathFindingLinkWidget_setPrototypeOf(o,p){return PathFindingLinkWidget_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},PathFindingLinkWidget_setPrototypeOf(o,p)}function PathFindingLinkWidget_createSuper(Derived){var hasNativeReflectConstruct=function PathFindingLinkWidget_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=PathFindingLinkWidget_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=PathFindingLinkWidget_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return PathFindingLinkWidget_possibleConstructorReturn(this,result)}}function PathFindingLinkWidget_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function PathFindingLinkWidget_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function PathFindingLinkWidget_getPrototypeOf(o){return PathFindingLinkWidget_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},PathFindingLinkWidget_getPrototypeOf(o)}var PathFindingLinkWidget=function(_React$Component){!function PathFindingLinkWidget_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&PathFindingLinkWidget_setPrototypeOf(subClass,superClass)}(PathFindingLinkWidget,_React$Component);var _super=PathFindingLinkWidget_createSuper(PathFindingLinkWidget);function PathFindingLinkWidget(props){var _this;return function PathFindingLinkWidget_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PathFindingLinkWidget),(_this=_super.call(this,props)).refPaths=[],_this.state={selected:!1},_this.pathFinding=new PathFinding(_this.props.factory),_this}return function PathFindingLinkWidget_createClass(Constructor,protoProps,staticProps){return protoProps&&PathFindingLinkWidget_defineProperties(Constructor.prototype,protoProps),staticProps&&PathFindingLinkWidget_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(PathFindingLinkWidget,[{key:"componentDidUpdate",value:function componentDidUpdate(){this.props.link.setRenderedPaths(this.refPaths.map((function(ref){return ref.current})))}},{key:"componentDidMount",value:function componentDidMount(){this.props.link.setRenderedPaths(this.refPaths.map((function(ref){return ref.current})))}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.props.link.setRenderedPaths([])}},{key:"generateLink",value:function generateLink(path,id){var _this2=this,ref=react.createRef();return this.refPaths.push(ref),react.createElement(DefaultLinkSegmentWidget,{key:"link-"+id,path,selected:this.state.selected,diagramEngine:this.props.diagramEngine,factory:this.props.diagramEngine.getFactoryForLink(this.props.link),link:this.props.link,forwardRef:ref,onSelection:function onSelection(selected){_this2.setState({selected})},extras:{}})}},{key:"render",value:function render(){this.refPaths=[];var points=this.props.link.getPoints(),paths=[],directPathCoords=this.pathFinding.calculateDirectPath(lodash.first(points),lodash.last(points)),routingMatrix=this.props.factory.getRoutingMatrix(),smartLink=this.pathFinding.calculateLinkStartEndCoords(routingMatrix,directPathCoords);if(smartLink){var start=smartLink.start,end=smartLink.end,pathToStart=smartLink.pathToStart,pathToEnd=smartLink.pathToEnd,simplifiedPath=this.pathFinding.calculateDynamicPath(routingMatrix,start,end,pathToStart,pathToEnd);paths.push(this.generateLink(this.props.factory.generateDynamicPath(simplifiedPath),"0"))}return react.createElement(react.Fragment,null,paths)}}]),PathFindingLinkWidget}(react.Component),paths_js_path=__webpack_require__("../node_modules/.pnpm/paths-js@0.4.11/node_modules/paths-js/path.js");function PathFindingLinkFactory_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function PathFindingLinkFactory_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function PathFindingLinkFactory_get(){return PathFindingLinkFactory_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(target,property,receiver){var base=PathFindingLinkFactory_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},PathFindingLinkFactory_get.apply(this,arguments)}function PathFindingLinkFactory_superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=PathFindingLinkFactory_getPrototypeOf(object)););return object}function PathFindingLinkFactory_setPrototypeOf(o,p){return PathFindingLinkFactory_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},PathFindingLinkFactory_setPrototypeOf(o,p)}function PathFindingLinkFactory_createSuper(Derived){var hasNativeReflectConstruct=function PathFindingLinkFactory_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=PathFindingLinkFactory_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=PathFindingLinkFactory_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return PathFindingLinkFactory_possibleConstructorReturn(this,result)}}function PathFindingLinkFactory_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function PathFindingLinkFactory_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function PathFindingLinkFactory_getPrototypeOf(o){return PathFindingLinkFactory_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},PathFindingLinkFactory_getPrototypeOf(o)}var PathFindingLinkFactory=function(_DefaultLinkFactory){!function PathFindingLinkFactory_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&PathFindingLinkFactory_setPrototypeOf(subClass,superClass)}(PathFindingLinkFactory,_DefaultLinkFactory);var _super=PathFindingLinkFactory_createSuper(PathFindingLinkFactory);function PathFindingLinkFactory(){var _this;return function PathFindingLinkFactory_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PathFindingLinkFactory),(_this=_super.call(this,PathFindingLinkFactory.NAME)).ROUTING_SCALING_FACTOR=5,_this.canvasMatrix=[],_this.routingMatrix=[],_this.hAdjustmentFactor=0,_this.vAdjustmentFactor=0,_this.calculateMatrixDimensions=function(){var allNodesCoords=lodash.values(_this.engine.getModel().getNodes()).map((function(item){return{x:item.getX(),width:item.width,y:item.getY(),height:item.height}})),allLinks=lodash.values(_this.engine.getModel().getLinks()),allPortsCoords=lodash.flatMap(allLinks.map((function(link){return[link.getSourcePort(),link.getTargetPort()]}))).filter((function(port){return null!==port})).map((function(item){return{x:item.getX(),width:item.width,y:item.getY(),height:item.height}})),allPointsCoords=lodash.flatMap(allLinks.map((function(link){return link.getPoints()}))).map((function(item){return{x:item.getX(),width:0,y:item.getY(),height:0}})),sumProps=function sumProps(object,props){return lodash.reduce(props,(function(acc,prop){return acc+lodash.get(object,prop,0)}),0)},canvas=_this.engine.getCanvas(),concatedCoords=lodash.concat(allNodesCoords,allPortsCoords,allPointsCoords),minX=Math.floor(Math.min(lodash.get(lodash.minBy(concatedCoords,"x"),"x",0),0)/_this.ROUTING_SCALING_FACTOR)*_this.ROUTING_SCALING_FACTOR,maxXElement=lodash.maxBy(concatedCoords,(function(item){return sumProps(item,["x","width"])})),maxX=Math.max(sumProps(maxXElement,["x","width"]),canvas.offsetWidth),minYCoords=lodash.minBy(concatedCoords,"y"),minY=Math.floor(Math.min(lodash.get(minYCoords,"y",0),0)/_this.ROUTING_SCALING_FACTOR)*_this.ROUTING_SCALING_FACTOR,maxYElement=lodash.maxBy(concatedCoords,(function(item){return sumProps(item,["y","height"])})),maxY=Math.max(sumProps(maxYElement,["y","height"]),canvas.offsetHeight);return{width:Math.ceil(Math.abs(minX)+maxX),hAdjustmentFactor:Math.abs(minX)/_this.ROUTING_SCALING_FACTOR+1,height:Math.ceil(Math.abs(minY)+maxY),vAdjustmentFactor:Math.abs(minY)/_this.ROUTING_SCALING_FACTOR+1}},_this.markNodes=function(matrix){lodash.values(_this.engine.getModel().getNodes()).forEach((function(node){for(var startX=Math.floor(node.getX()/_this.ROUTING_SCALING_FACTOR),endX=Math.ceil((node.getX()+node.width)/_this.ROUTING_SCALING_FACTOR),startY=Math.floor(node.getY()/_this.ROUTING_SCALING_FACTOR),endY=Math.ceil((node.getY()+node.height)/_this.ROUTING_SCALING_FACTOR),x=startX-1;x<=endX+1;x++)for(var y=startY-1;y<endY+1;y++)_this.markMatrixPoint(matrix,_this.translateRoutingX(x),_this.translateRoutingY(y))}))},_this.markPorts=function(matrix){lodash.flatMap(lodash.values(_this.engine.getModel().getLinks()).map((function(link){return[].concat(link.getSourcePort(),link.getTargetPort())}))).filter((function(port){return null!==port})).forEach((function(port){for(var startX=Math.floor(port.x/_this.ROUTING_SCALING_FACTOR),endX=Math.ceil((port.x+port.width)/_this.ROUTING_SCALING_FACTOR),startY=Math.floor(port.y/_this.ROUTING_SCALING_FACTOR),endY=Math.ceil((port.y+port.height)/_this.ROUTING_SCALING_FACTOR),x=startX-1;x<=endX+1;x++)for(var y=startY-1;y<endY+1;y++)_this.markMatrixPoint(matrix,_this.translateRoutingX(x),_this.translateRoutingY(y))}))},_this.markMatrixPoint=function(matrix,x,y){void 0!==matrix[y]&&void 0!==matrix[y][x]&&(matrix[y][x]=1)},_this}return function PathFindingLinkFactory_createClass(Constructor,protoProps,staticProps){return protoProps&&PathFindingLinkFactory_defineProperties(Constructor.prototype,protoProps),staticProps&&PathFindingLinkFactory_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(PathFindingLinkFactory,[{key:"setDiagramEngine",value:function setDiagramEngine(engine){var _this2=this;PathFindingLinkFactory_get(PathFindingLinkFactory_getPrototypeOf(PathFindingLinkFactory.prototype),"setDiagramEngine",this).call(this,engine),engine.getStateMachine().registerListener({stateChanged:function stateChanged(event){if(event.newState instanceof react_canvas_core_dist.s2)var deRegister=engine.getActionEventBus().registerAction(new react_canvas_core_dist.aU({type:react_canvas_core_dist.n$.MOUSE_UP,fire:function fire(){_this2.calculateRoutingMatrix(),engine.repaintCanvas(),deRegister()}}))}}),this.listener=engine.registerListener({canvasReady:function canvasReady(){lodash.defer((function(){_this2.calculateRoutingMatrix(),engine.repaintCanvas()}))}})}},{key:"setFactoryBank",value:function setFactoryBank(bank){PathFindingLinkFactory_get(PathFindingLinkFactory_getPrototypeOf(PathFindingLinkFactory.prototype),"setFactoryBank",this).call(this,bank),!bank&&this.listener&&this.listener.deregister()}},{key:"generateReactWidget",value:function generateReactWidget(event){return react.createElement(PathFindingLinkWidget,{diagramEngine:this.engine,link:event.model,factory:this})}},{key:"generateModel",value:function generateModel(event){return new PathFindingLinkModel}},{key:"getCanvasMatrix",value:function getCanvasMatrix(){return 0===this.canvasMatrix.length&&this.calculateCanvasMatrix(),this.canvasMatrix}},{key:"calculateCanvasMatrix",value:function calculateCanvasMatrix(){var _this$calculateMatrix=this.calculateMatrixDimensions(),canvasWidth=_this$calculateMatrix.width,hAdjustmentFactor=_this$calculateMatrix.hAdjustmentFactor,canvasHeight=_this$calculateMatrix.height,vAdjustmentFactor=_this$calculateMatrix.vAdjustmentFactor;this.hAdjustmentFactor=hAdjustmentFactor,this.vAdjustmentFactor=vAdjustmentFactor;var matrixWidth=Math.ceil(canvasWidth/this.ROUTING_SCALING_FACTOR),matrixHeight=Math.ceil(canvasHeight/this.ROUTING_SCALING_FACTOR);this.canvasMatrix=lodash.range(0,matrixHeight).map((function(){return new Array(matrixWidth).fill(0)}))}},{key:"getRoutingMatrix",value:function getRoutingMatrix(){return 0===this.routingMatrix.length&&this.calculateRoutingMatrix(),this.routingMatrix}},{key:"calculateRoutingMatrix",value:function calculateRoutingMatrix(){var matrix=lodash.cloneDeep(this.getCanvasMatrix());this.markNodes(matrix),this.markPorts(matrix),this.routingMatrix=matrix}},{key:"translateRoutingX",value:function translateRoutingX(x){var reverse=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return x+this.hAdjustmentFactor*(reverse?-1:1)}},{key:"translateRoutingY",value:function translateRoutingY(y){var reverse=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return y+this.vAdjustmentFactor*(reverse?-1:1)}},{key:"generateDynamicPath",value:function generateDynamicPath(pathCoords){var _this3=this,path=paths_js_path();return path=path.moveto(pathCoords[0][0]*this.ROUTING_SCALING_FACTOR,pathCoords[0][1]*this.ROUTING_SCALING_FACTOR),pathCoords.slice(1).forEach((function(coords){path=path.lineto(coords[0]*_this3.ROUTING_SCALING_FACTOR,coords[1]*_this3.ROUTING_SCALING_FACTOR)})),path.print()}}]),PathFindingLinkFactory}(DefaultLinkFactory);function RightAngleLinkWidget_toConsumableArray(arr){return function RightAngleLinkWidget_arrayWithoutHoles(arr){if(Array.isArray(arr))return RightAngleLinkWidget_arrayLikeToArray(arr)}(arr)||function RightAngleLinkWidget_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function RightAngleLinkWidget_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return RightAngleLinkWidget_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RightAngleLinkWidget_arrayLikeToArray(o,minLen)}(arr)||function RightAngleLinkWidget_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function RightAngleLinkWidget_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function RightAngleLinkWidget_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function RightAngleLinkWidget_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function RightAngleLinkWidget_setPrototypeOf(o,p){return RightAngleLinkWidget_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},RightAngleLinkWidget_setPrototypeOf(o,p)}function RightAngleLinkWidget_createSuper(Derived){var hasNativeReflectConstruct=function RightAngleLinkWidget_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=RightAngleLinkWidget_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=RightAngleLinkWidget_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return RightAngleLinkWidget_possibleConstructorReturn(this,result)}}function RightAngleLinkWidget_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return RightAngleLinkWidget_assertThisInitialized(self)}function RightAngleLinkWidget_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function RightAngleLinkWidget_getPrototypeOf(o){return RightAngleLinkWidget_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},RightAngleLinkWidget_getPrototypeOf(o)}PathFindingLinkFactory.NAME="pathfinding";var RightAngleLinkWidget=function(_React$Component){!function RightAngleLinkWidget_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&RightAngleLinkWidget_setPrototypeOf(subClass,superClass)}(RightAngleLinkWidget,_React$Component);var _super=RightAngleLinkWidget_createSuper(RightAngleLinkWidget);function RightAngleLinkWidget(props){var _this;return function RightAngleLinkWidget_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,RightAngleLinkWidget),(_this=_super.call(this,props)).handleMove=function(event){this.draggingEvent(event,this.dragging_index)}.bind(RightAngleLinkWidget_assertThisInitialized(_this)),_this.handleUp=function(event){this.setState({canDrag:!1,selected:!1}),window.removeEventListener("mousemove",this.handleMove),window.removeEventListener("mouseup",this.handleUp)}.bind(RightAngleLinkWidget_assertThisInitialized(_this)),_this.refPaths=[],_this.state={selected:!1,canDrag:!1},_this.dragging_index=0,_this}return function RightAngleLinkWidget_createClass(Constructor,protoProps,staticProps){return protoProps&&RightAngleLinkWidget_defineProperties(Constructor.prototype,protoProps),staticProps&&RightAngleLinkWidget_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(RightAngleLinkWidget,[{key:"componentDidUpdate",value:function componentDidUpdate(){this.props.link.setRenderedPaths(this.refPaths.map((function(ref){return ref.current})))}},{key:"componentDidMount",value:function componentDidMount(){this.props.link.setRenderedPaths(this.refPaths.map((function(ref){return ref.current})))}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.props.link.setRenderedPaths([])}},{key:"generateLink",value:function generateLink(path,extraProps,id){var _this2=this,ref=react.createRef();return this.refPaths.push(ref),react.createElement(DefaultLinkSegmentWidget,{key:"link-"+id,path,selected:this.state.selected,diagramEngine:this.props.diagramEngine,factory:this.props.diagramEngine.getFactoryForLink(this.props.link),link:this.props.link,forwardRef:ref,onSelection:function onSelection(selected){_this2.setState({selected})},extras:extraProps})}},{key:"calculatePositions",value:function calculatePositions(points,event,index,coordinate){var _points6;if(0===index){var point=new dist.Xs({link:this.props.link,position:new geometry_dist.E9(points[index].getX(),points[index].getY())});return this.props.link.addPoint(point,index),void this.dragging_index++}if(index!==points.length-2){if(index-2>0){var _points3,_points2=((_points3={})[index-2]=points[index-2].getPosition(),_points3[index+1]=points[index+1].getPosition(),_points3[index-1]=points[index-1].getPosition(),_points3);if(Math.abs(_points2[index-1][coordinate]-_points2[index+1][coordinate])<5)return _points2[index-2][coordinate]=this.props.diagramEngine.getRelativeMousePoint(event)[coordinate],_points2[index+1][coordinate]=this.props.diagramEngine.getRelativeMousePoint(event)[coordinate],points[index-2].setPosition(_points2[index-2]),points[index+1].setPosition(_points2[index+1]),points[index-1].remove(),points[index-1].remove(),this.dragging_index--,void this.dragging_index--}if(index+2<points.length-2){var _points5,_points4=((_points5={})[index+3]=points[index+3].getPosition(),_points5[index+2]=points[index+2].getPosition(),_points5[index+1]=points[index+1].getPosition(),_points5[index]=points[index].getPosition(),_points5);if(Math.abs(_points4[index+1][coordinate]-_points4[index+2][coordinate])<5)return _points4[index][coordinate]=this.props.diagramEngine.getRelativeMousePoint(event)[coordinate],_points4[index+3][coordinate]=this.props.diagramEngine.getRelativeMousePoint(event)[coordinate],points[index].setPosition(_points4[index]),points[index+3].setPosition(_points4[index+3]),points[index+1].remove(),void points[index+1].remove()}var _points=((_points6={})[index]=points[index].getPosition(),_points6[index+1]=points[index+1].getPosition(),_points6);_points[index][coordinate]=this.props.diagramEngine.getRelativeMousePoint(event)[coordinate],_points[index+1][coordinate]=this.props.diagramEngine.getRelativeMousePoint(event)[coordinate],points[index].setPosition(_points[index]),points[index+1].setPosition(_points[index+1])}else{var _point=new dist.Xs({link:this.props.link,position:new geometry_dist.E9(points[index+1].getX(),points[index+1].getY())});this.props.link.addPoint(_point,index+1)}}},{key:"draggingEvent",value:function draggingEvent(event,index){var points=this.props.link.getPoints(),dx=Math.abs(points[index].getX()-points[index+1].getX()),dy=Math.abs(points[index].getY()-points[index+1].getY());0===dx?this.calculatePositions(points,event,index,"x"):0===dy&&this.calculatePositions(points,event,index,"y"),this.props.link.setFirstAndLastPathsDirection()}},{key:"render",value:function render(){var _this3=this,points=this.props.link.getPoints(),paths=[],pointLeft=points[0],pointRight=points[points.length-1],hadToSwitch=!1;pointLeft.getX()>pointRight.getX()&&(pointLeft=points[points.length-1],pointRight=points[0],hadToSwitch=!0);var dy=Math.abs(points[0].getY()-points[points.length-1].getY());if(null===this.props.link.getTargetPort()&&2===points.length)RightAngleLinkWidget_toConsumableArray(Array(2)).forEach((function(item){_this3.props.link.addPoint(new dist.Xs({link:_this3.props.link,position:new geometry_dist.E9(pointLeft.getX(),pointRight.getY())}),1)})),this.props.link.setManuallyFirstAndLastPathsDirection(!0,!0);else if(null===this.props.link.getTargetPort()&&null!==this.props.link.getSourcePort())points[1].setPosition(pointRight.getX()+(pointLeft.getX()-pointRight.getX())/2,hadToSwitch?pointRight.getY():pointLeft.getY()),points[2].setPosition(pointRight.getX()+(pointLeft.getX()-pointRight.getX())/2,hadToSwitch?pointLeft.getY():pointRight.getY());else if(!this.state.canDrag&&points.length>2)for(var i=1;i<points.length;i+=points.length-2)i-1==0?this.props.link.getFirstPathXdirection()?points[i].setPosition(points[i].getX(),points[i-1].getY()):points[i].setPosition(points[i-1].getX(),points[i].getY()):this.props.link.getLastPathXdirection()?points[i-1].setPosition(points[i-1].getX(),points[i].getY()):points[i-1].setPosition(points[i].getX(),points[i-1].getY());2!==points.length||0===dy||this.state.canDrag||this.props.link.addPoint(new dist.Xs({link:this.props.link,position:new geometry_dist.E9(pointLeft.getX(),pointRight.getY())}));for(var _loop=function _loop(j){paths.push(_this3.generateLink(dist.hL.generateLinePath(points[j],points[j+1]),{"data-linkid":_this3.props.link.getID(),"data-point":j,onMouseDown:function onMouseDown(event){0===event.button&&(_this3.setState({canDrag:!0}),_this3.dragging_index=j,window.addEventListener("mousemove",_this3.handleMove),window.addEventListener("mouseup",_this3.handleUp))},onMouseEnter:function onMouseEnter(event){_this3.setState({selected:!0}),_this3.props.link.lastHoverIndexOfPath=j}},j))},j=0;j<points.length-1;j++)_loop(j);return this.refPaths=[],react.createElement("g",{"data-default-link-test":this.props.link.getOptions().testName},paths)}}]),RightAngleLinkWidget}(react.Component);function RightAngleLinkModel_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function RightAngleLinkModel_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function RightAngleLinkModel_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function RightAngleLinkModel_get(){return RightAngleLinkModel_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(target,property,receiver){var base=RightAngleLinkModel_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},RightAngleLinkModel_get.apply(this,arguments)}function RightAngleLinkModel_superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=RightAngleLinkModel_getPrototypeOf(object)););return object}function RightAngleLinkModel_setPrototypeOf(o,p){return RightAngleLinkModel_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},RightAngleLinkModel_setPrototypeOf(o,p)}function RightAngleLinkModel_createSuper(Derived){var hasNativeReflectConstruct=function RightAngleLinkModel_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=RightAngleLinkModel_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=RightAngleLinkModel_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return RightAngleLinkModel_possibleConstructorReturn(this,result)}}function RightAngleLinkModel_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function RightAngleLinkModel_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function RightAngleLinkModel_getPrototypeOf(o){return RightAngleLinkModel_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},RightAngleLinkModel_getPrototypeOf(o)}RightAngleLinkWidget.defaultProps={color:"red",width:3,link:null,smooth:!1,diagramEngine:null,factory:null};var RightAngleLinkModel=function(_DefaultLinkModel){!function RightAngleLinkModel_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&RightAngleLinkModel_setPrototypeOf(subClass,superClass)}(RightAngleLinkModel,_DefaultLinkModel);var _super=RightAngleLinkModel_createSuper(RightAngleLinkModel);function RightAngleLinkModel(){var _this,options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return RightAngleLinkModel_classCallCheck(this,RightAngleLinkModel),(_this=_super.call(this,Object.assign({type:RightAngleLinkFactory.NAME},options))).lastHoverIndexOfPath=0,_this._lastPathXdirection=!1,_this._firstPathXdirection=!1,_this}return function RightAngleLinkModel_createClass(Constructor,protoProps,staticProps){return protoProps&&RightAngleLinkModel_defineProperties(Constructor.prototype,protoProps),staticProps&&RightAngleLinkModel_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(RightAngleLinkModel,[{key:"setFirstAndLastPathsDirection",value:function setFirstAndLastPathsDirection(){for(var points=this.getPoints(),i=1;i<points.length;i+=points.length-2){var dx=Math.abs(points[i].getX()-points[i-1].getX()),dy=Math.abs(points[i].getY()-points[i-1].getY());i-1==0?this._firstPathXdirection=dx>dy:this._lastPathXdirection=dx>dy}}},{key:"addPoint",value:function addPoint(pointModel){var index=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return RightAngleLinkModel_get(RightAngleLinkModel_getPrototypeOf(RightAngleLinkModel.prototype),"addPoint",this).call(this,pointModel,index),this.setFirstAndLastPathsDirection(),pointModel}},{key:"deserialize",value:function deserialize(event){RightAngleLinkModel_get(RightAngleLinkModel_getPrototypeOf(RightAngleLinkModel.prototype),"deserialize",this).call(this,event),this.setFirstAndLastPathsDirection()}},{key:"setManuallyFirstAndLastPathsDirection",value:function setManuallyFirstAndLastPathsDirection(first,last){this._firstPathXdirection=first,this._lastPathXdirection=last}},{key:"getLastPathXdirection",value:function getLastPathXdirection(){return this._lastPathXdirection}},{key:"getFirstPathXdirection",value:function getFirstPathXdirection(){return this._firstPathXdirection}},{key:"setWidth",value:function setWidth(width){this.options.width=width,this.fireEvent({width},"widthChanged")}},{key:"setColor",value:function setColor(color){this.options.color=color,this.fireEvent({color},"colorChanged")}}]),RightAngleLinkModel}(DefaultLinkModel);function RightAngleLinkFactory_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function RightAngleLinkFactory_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function RightAngleLinkFactory_setPrototypeOf(o,p){return RightAngleLinkFactory_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},RightAngleLinkFactory_setPrototypeOf(o,p)}function RightAngleLinkFactory_createSuper(Derived){var hasNativeReflectConstruct=function RightAngleLinkFactory_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=RightAngleLinkFactory_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=RightAngleLinkFactory_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return RightAngleLinkFactory_possibleConstructorReturn(this,result)}}function RightAngleLinkFactory_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function RightAngleLinkFactory_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function RightAngleLinkFactory_getPrototypeOf(o){return RightAngleLinkFactory_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},RightAngleLinkFactory_getPrototypeOf(o)}var RightAngleLinkFactory=function(_DefaultLinkFactory){!function RightAngleLinkFactory_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&RightAngleLinkFactory_setPrototypeOf(subClass,superClass)}(RightAngleLinkFactory,_DefaultLinkFactory);var _super=RightAngleLinkFactory_createSuper(RightAngleLinkFactory);function RightAngleLinkFactory(){return function RightAngleLinkFactory_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,RightAngleLinkFactory),_super.call(this,RightAngleLinkFactory.NAME)}return function RightAngleLinkFactory_createClass(Constructor,protoProps,staticProps){return protoProps&&RightAngleLinkFactory_defineProperties(Constructor.prototype,protoProps),staticProps&&RightAngleLinkFactory_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(RightAngleLinkFactory,[{key:"generateModel",value:function generateModel(event){return new RightAngleLinkModel}},{key:"generateReactWidget",value:function generateReactWidget(event){return react.createElement(RightAngleLinkWidget,{diagramEngine:this.engine,link:event.model,factory:this})}}]),RightAngleLinkFactory}(DefaultLinkFactory);RightAngleLinkFactory.NAME="rightAngle";__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.sort.js");var dagre=__webpack_require__("../node_modules/.pnpm/dagre@0.8.5/node_modules/dagre/index.js");function DagreEngine_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function DagreEngine_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function DagreEngine_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}var DagreEngine=function(){function DagreEngine(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};DagreEngine_classCallCheck(this,DagreEngine),this.options=options}return function DagreEngine_createClass(Constructor,protoProps,staticProps){return protoProps&&DagreEngine_defineProperties(Constructor.prototype,protoProps),staticProps&&DagreEngine_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DagreEngine,[{key:"redistribute",value:function redistribute(model){var g=new dagre.graphlib.Graph({multigraph:!0,compound:!0});g.setGraph(this.options.graph||{}),g.setDefaultEdgeLabel((function(){return{}})),lodash.forEach(model.getNodes(),(function(node){g.setNode(node.getID(),{width:node.width,height:node.height})})),lodash.forEach(model.getLinks(),(function(link){link.getSourcePort()&&link.getTargetPort()&&g.setEdge({v:link.getSourcePort().getNode().getID(),w:link.getTargetPort().getNode().getID(),name:link.getID()})})),dagre.layout(g),g.nodes().forEach((function(v){var node=g.node(v);model.getNode(v).setPosition(node.x-node.width/2,node.y-node.height/2)})),this.options.includeLinks&&g.edges().forEach((function(e){for(var edge=g.edge(e),link=model.getLink(e.name),points=[link.getFirstPoint()],i=1;i<edge.points.length-1;i++)points.push(new dist.Xs({link,position:new geometry_dist.E9(edge.points[i].x,edge.points[i].y)}));link.setPoints(points.concat(link.getLastPoint()))}))}},{key:"refreshLinks",value:function refreshLinks(diagram){var nodeMargin=this.options.nodeMargin,nodes=diagram.getNodes(),links=diagram.getLinks(),maxChunkRowIndex=-1,chunks={},NodeXColumnIndexDictionary={},verticalLines=[];lodash.forEach(nodes,(function(node){var nodeColumnCenter=node.getX()+node.width/2;lodash.every(verticalLines,(function(vLine){return Math.abs(nodeColumnCenter-vLine)>nodeMargin}))&&verticalLines.push(nodeColumnCenter)})),verticalLines=verticalLines.sort((function(a,b){return a-b})),lodash.forEach(verticalLines,(function(line,index){chunks[index]={},chunks[index+.5]={}})),lodash.forEach(nodes,(function(node){var nodeColumnCenter=node.getX()+node.width/2,startChunkIndex=Math.floor(node.getY()/nodeMargin),endChunkIndex=Math.floor((node.getY()+node.height)/nodeMargin);endChunkIndex>maxChunkRowIndex&&(maxChunkRowIndex=endChunkIndex);var nodeColumnIndex=lodash.findIndex(verticalLines,(function(vLine){return Math.abs(nodeColumnCenter-vLine)<=nodeMargin}));lodash.forEach(lodash.range(startChunkIndex,endChunkIndex+1),(function(chunkIndex){chunks[nodeColumnIndex][chunkIndex]=!0})),NodeXColumnIndexDictionary[node.getX()]=nodeColumnIndex}));var edges=lodash.map(links,(function(link){if(link.getSourcePort()&&link.getTargetPort()){var source=link.getSourcePort().getNode(),target=link.getTargetPort().getNode(),sourceIndex=NodeXColumnIndexDictionary[source.getX()],targetIndex=NodeXColumnIndexDictionary[target.getX()];return sourceIndex>targetIndex?{link,sourceIndex,sourceY:source.getY()+source.height/2,source,targetIndex,targetY:target.getY()+source.height/2,target}:{link,sourceIndex:targetIndex,sourceY:target.getY()+target.height/2,source:target,targetIndex:sourceIndex,targetY:source.getY()+source.height/2,target:source}}})),sortedEdges=lodash.sortBy(edges,(function(link){return Math.abs(link.targetIndex-link.sourceIndex)}));this.options.includeLinks&&lodash.forEach(sortedEdges,(function(edge){var link=diagram.getLink(edge.link.getID());if(Math.abs(edge.sourceIndex-edge.targetIndex)>1){for(var columns=lodash.range(edge.sourceIndex-1,edge.targetIndex),chunkIndex=Math.floor(edge.sourceY/nodeMargin),targetChunkIndex=Math.floor(edge.targetY/nodeMargin),northCost=1,aboveRowIndex=chunkIndex;aboveRowIndex>=0&&!lodash.every(columns,(function(columnIndex){return!(chunks[columnIndex][aboveRowIndex]||chunks[columnIndex+.5][aboveRowIndex]||chunks[columnIndex-.5][aboveRowIndex])}));aboveRowIndex--,northCost++);for(var southCost=0,belowRowIndex=chunkIndex;belowRowIndex<=maxChunkRowIndex&&!lodash.every(columns,(function(columnIndex){return!(chunks[columnIndex][belowRowIndex]||chunks[columnIndex+.5][belowRowIndex]||chunks[columnIndex-.5][belowRowIndex])}));belowRowIndex++,southCost++);var pathRowIndex=southCost+(belowRowIndex-targetChunkIndex)<northCost+(targetChunkIndex-aboveRowIndex)?belowRowIndex+1:aboveRowIndex-1,points=[link.getFirstPoint()];points.push(new dist.Xs({link,position:new geometry_dist.E9((verticalLines[columns[0]]+verticalLines[columns[0]+1])/2,(pathRowIndex+.5)*nodeMargin)})),lodash.forEach(columns,(function(column){points.push(new dist.Xs({link,position:new geometry_dist.E9(verticalLines[column],(pathRowIndex+.5)*nodeMargin)})),points.push(new dist.Xs({link,position:new geometry_dist.E9((verticalLines[column]+verticalLines[column-1])/2,(pathRowIndex+.5)*nodeMargin)})),chunks[column][pathRowIndex]=!0,chunks[column][pathRowIndex+1]=!0,chunks[column+.5][pathRowIndex]=!0,chunks[column+.5][pathRowIndex+1]=!0})),link.setPoints(points.concat(link.getLastPoint()))}else{link.setPoints([link.getFirstPoint(),link.getLastPoint()]);var columnIndex=(edge.sourceIndex+edge.targetIndex)/2;chunks[columnIndex]||(chunks[columnIndex]={});var rowIndex=Math.floor((edge.sourceY+edge.targetY)/2/nodeMargin);chunks[columnIndex][rowIndex]=!0,chunks[columnIndex][rowIndex+1]=!0}}))}}]),DagreEngine}();const react_diagrams_dist=function(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},engine=new dist.Zc(options);return engine.getLayerFactories().registerFactory(new dist.JM),engine.getLayerFactories().registerFactory(new dist.JW),engine.getLayerFactories().registerFactory(new react_canvas_core_dist.B1),engine.getLabelFactories().registerFactory(new DefaultLabelFactory),engine.getNodeFactories().registerFactory(new DefaultNodeFactory),engine.getLinkFactories().registerFactory(new DefaultLinkFactory),engine.getLinkFactories().registerFactory(new PathFindingLinkFactory),engine.getPortFactories().registerFactory(new DefaultPortFactory),engine.getStateMachine().pushState(new dist.Qo),engine}},"?f9b9":()=>{},"./generated-stories-entry.cjs":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module=__webpack_require__.nmd(module),(0,__webpack_require__("../node_modules/.pnpm/@storybook+react@6.5.15_zdqfsof44thopmx4b7elbx45zy/node_modules/@storybook/react/dist/esm/client/index.js").configure)([__webpack_require__("./demos sync ^\\.[\\\\/](?:(?%21\\.)(?=.)[^/]*?\\.stories\\.tsx)$")],module,!1)}},__webpack_require__=>{var __webpack_exec__=moduleId=>__webpack_require__(__webpack_require__.s=moduleId);__webpack_require__.O(0,[14],(()=>(__webpack_exec__("../node_modules/.pnpm/@storybook+core-client@6.5.15_q43aqc3uyvrd3t7ahqsaa6xgiq/node_modules/@storybook/core-client/dist/esm/globals/polyfills.js"),__webpack_exec__("../node_modules/.pnpm/@storybook+core-client@6.5.15_q43aqc3uyvrd3t7ahqsaa6xgiq/node_modules/@storybook/core-client/dist/esm/globals/globals.js"),__webpack_exec__("./storybook-init-framework-entry.js"),__webpack_exec__("../node_modules/.pnpm/@storybook+react@6.5.15_zdqfsof44thopmx4b7elbx45zy/node_modules/@storybook/react/dist/esm/client/preview/config-generated-config-entry.js"),__webpack_exec__("../node_modules/.pnpm/@storybook+addon-actions@6.5.15_react@18.2.0/node_modules/@storybook/addon-actions/preview.js-generated-config-entry.js"),__webpack_exec__("./.storybook/preview.js-generated-config-entry.js"),__webpack_exec__("./generated-stories-entry.cjs"))));__webpack_require__.O()}]);